var Mr=Object.defineProperty;var Nr=(ve,Se,Te)=>Se in ve?Mr(ve,Se,{enumerable:!0,configurable:!0,writable:!0,value:Te}):ve[Se]=Te;var ln=(ve,Se,Te)=>(Nr(ve,typeof Se!="symbol"?Se+"":Se,Te),Te),Ot=(ve,Se,Te)=>{if(!Se.has(ve))throw TypeError("Cannot "+Te)};var Y=(ve,Se,Te)=>(Ot(ve,Se,"read from private field"),Te?Te.call(ve):Se.get(ve)),Ce=(ve,Se,Te)=>{if(Se.has(ve))throw TypeError("Cannot add the same private member more than once");Se instanceof WeakSet?Se.add(ve):Se.set(ve,Te)},Be=(ve,Se,Te,Ke)=>(Ot(ve,Se,"write to private field"),Ke?Ke.call(ve,Te):Se.set(ve,Te),Te);var yt=(ve,Se,Te)=>(Ot(ve,Se,"access private method"),Te);(function(){"use strict";/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ve=Symbol("Comlink.proxy"),Se=Symbol("Comlink.endpoint"),Te=Symbol("Comlink.releaseProxy"),Ke=Symbol("Comlink.finalizer"),ot=Symbol("Comlink.thrown"),Pt=L=>typeof L=="object"&&L!==null||typeof L=="function",cn={canHandle:L=>Pt(L)&&L[ve],serialize(L){const{port1:Q,port2:le}=new MessageChannel;return qt(L,Q),[le,[le]]},deserialize(L){return L.start(),dn(L)}},un={canHandle:L=>Pt(L)&&ot in L,serialize({value:L}){let Q;return L instanceof Error?Q={isError:!0,value:{message:L.message,name:L.name,stack:L.stack}}:Q={isError:!1,value:L},[Q,[]]},deserialize(L){throw L.isError?Object.assign(new Error(L.value.message),L.value):L.value}},Lt=new Map([["proxy",cn],["throw",un]]);function _n(L,Q){for(const le of L)if(Q===le||le==="*"||le instanceof RegExp&&le.test(Q))return!0;return!1}function qt(L,Q=globalThis,le=["*"]){Q.addEventListener("message",function t(he){if(!he||!he.data)return;if(!_n(le,he.origin)){console.warn(`Invalid origin '${he.origin}' for comlink proxy`);return}const{id:Ie,type:we,path:Ae}=Object.assign({path:[]},he.data),Fe=(he.data.argumentList||[]).map(Ve);let xe;try{const Z=Ae.slice(0,-1).reduce((me,je)=>me[je],L),ye=Ae.reduce((me,je)=>me[je],L);switch(we){case"GET":xe=ye;break;case"SET":Z[Ae.slice(-1)[0]]=Ve(he.data.value),xe=!0;break;case"APPLY":xe=ye.apply(Z,Fe);break;case"CONSTRUCT":{const me=new ye(...Fe);xe=yn(me)}break;case"ENDPOINT":{const{port1:me,port2:je}=new MessageChannel;qt(L,je),xe=gn(me,[me])}break;case"RELEASE":xe=void 0;break;default:return}}catch(Z){xe={value:Z,[ot]:0}}Promise.resolve(xe).catch(Z=>({value:Z,[ot]:0})).then(Z=>{const[ye,me]=ut(Z);Q.postMessage(Object.assign(Object.assign({},ye),{id:Ie}),me),we==="RELEASE"&&(Q.removeEventListener("message",t),Dt(Q),Ke in L&&typeof L[Ke]=="function"&&L[Ke]())}).catch(Z=>{const[ye,me]=ut({value:new TypeError("Unserializable return value"),[ot]:0});Q.postMessage(Object.assign(Object.assign({},ye),{id:Ie}),me)})}),Q.start&&Q.start()}function fn(L){return L.constructor.name==="MessagePort"}function Dt(L){fn(L)&&L.close()}function dn(L,Q){return wt(L,[],Q)}function at(L){if(L)throw new Error("Proxy has been released and is not useable")}function Ct(L){return Je(L,{type:"RELEASE"}).then(()=>{Dt(L)})}const lt=new WeakMap,ct="FinalizationRegistry"in globalThis&&new FinalizationRegistry(L=>{const Q=(lt.get(L)||0)-1;lt.set(L,Q),Q===0&&Ct(L)});function pn(L,Q){const le=(lt.get(Q)||0)+1;lt.set(Q,le),ct&&ct.register(L,Q,L)}function mn(L){ct&&ct.unregister(L)}function wt(L,Q=[],le=function(){}){let t=!1;const he=new Proxy(le,{get(Ie,we){if(at(t),we===Te)return()=>{mn(he),Ct(L),t=!0};if(we==="then"){if(Q.length===0)return{then:()=>he};const Ae=Je(L,{type:"GET",path:Q.map(Fe=>Fe.toString())}).then(Ve);return Ae.then.bind(Ae)}return wt(L,[...Q,we])},set(Ie,we,Ae){at(t);const[Fe,xe]=ut(Ae);return Je(L,{type:"SET",path:[...Q,we].map(Z=>Z.toString()),value:Fe},xe).then(Ve)},apply(Ie,we,Ae){at(t);const Fe=Q[Q.length-1];if(Fe===Se)return Je(L,{type:"ENDPOINT"}).then(Ve);if(Fe==="bind")return wt(L,Q.slice(0,-1));const[xe,Z]=Rt(Ae);return Je(L,{type:"APPLY",path:Q.map(ye=>ye.toString()),argumentList:xe},Z).then(Ve)},construct(Ie,we){at(t);const[Ae,Fe]=Rt(we);return Je(L,{type:"CONSTRUCT",path:Q.map(xe=>xe.toString()),argumentList:Ae},Fe).then(Ve)}});return pn(he,L),he}function hn(L){return Array.prototype.concat.apply([],L)}function Rt(L){const Q=L.map(ut);return[Q.map(le=>le[0]),hn(Q.map(le=>le[1]))]}const Mt=new WeakMap;function gn(L,Q){return Mt.set(L,Q),L}function yn(L){return Object.assign(L,{[ve]:!0})}function ut(L){for(const[Q,le]of Lt)if(le.canHandle(L)){const[t,he]=le.serialize(L);return[{type:"HANDLER",name:Q,value:t},he]}return[{type:"RAW",value:L},Mt.get(L)||[]]}function Ve(L){switch(L.type){case"HANDLER":return Lt.get(L.name).deserialize(L.value);case"RAW":return L.value}}function Je(L,Q,le){return new Promise(t=>{const he=bn();L.addEventListener("message",function Ie(we){!we.data||!we.data.id||we.data.id!==he||(L.removeEventListener("message",Ie),t(we.data))}),L.start&&L.start(),L.postMessage(Object.assign({id:he},Q),le)})}function bn(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var Et=(()=>{var L=self.location.href;return function(Q){var le=Q||{},t=typeof le<"u"?le:{},he,Ie;t.ready=new Promise(function(n,e){he=n,Ie=e});const we=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,we.debugModule("globalThis.location =",globalThis.location);const Ae="emscripten-bug-17951";t[Ae]=function n(e,s){e.env.foo=function(){};const r=t.locateFile(n.uri,typeof me>"u"?"":me);we.debugModule("instantiateWasm() uri =",r);const i=()=>fetch(r,{credentials:"same-origin"});return(WebAssembly.instantiateStreaming?async()=>WebAssembly.instantiateStreaming(i(),e).then(p=>s(p.instance,p.module)):async()=>i().then(p=>p.arrayBuffer()).then(p=>WebAssembly.instantiate(p,e)).then(p=>s(p.instance,p.module)))(),{}},t[Ae].uri="sqlite3.wasm";var Fe=Object.assign({},t),xe="./this.program",Z=typeof window=="object",ye=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var me="";function je(n){return t.locateFile?t.locateFile(n,me):me+n}var tt,_t,St;(Z||ye)&&(ye?me=self.location.href:typeof document<"u"&&document.currentScript&&(me=document.currentScript.src),L&&(me=L),me.indexOf("blob:")!==0?me=me.substr(0,me.replace(/[?#].*/,"").lastIndexOf("/")+1):me="",tt=n=>{var e=new XMLHttpRequest;return e.open("GET",n,!1),e.send(null),e.responseText},ye&&(St=n=>{var e=new XMLHttpRequest;return e.open("GET",n,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),_t=(n,e,s)=>{var r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType="arraybuffer",r.onload=()=>{if(r.status==200||r.status==0&&r.response){e(r.response);return}s()},r.onerror=s,r.send(null)});var ft=t.print||console.log.bind(console),Qe=t.printErr||console.warn.bind(console);Object.assign(t,Fe),Fe=null,t.arguments&&t.arguments,t.thisProgram&&(xe=t.thisProgram),t.quit&&t.quit;var nt;t.wasmBinary&&(nt=t.wasmBinary),t.noExitRuntime,typeof WebAssembly!="object"&&Ze("no native wasm support detected");var He,jt=!1;function An(n,e){n||Ze(e)}var Bt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Xe(n,e,s){for(var r=e+s,i=e;n[i]&&!(i>=r);)++i;if(i-e>16&&n.buffer&&Bt)return Bt.decode(n.subarray(e,i));for(var a="";e<i;){var p=n[e++];if(!(p&128)){a+=String.fromCharCode(p);continue}var E=n[e++]&63;if((p&224)==192){a+=String.fromCharCode((p&31)<<6|E);continue}var P=n[e++]&63;if((p&240)==224?p=(p&15)<<12|E<<6|P:p=(p&7)<<18|E<<12|P<<6|n[e++]&63,p<65536)a+=String.fromCharCode(p);else{var z=p-65536;a+=String.fromCharCode(55296|z>>10,56320|z&1023)}}return a}function In(n,e){return n?Xe(Ye,n,e):""}function dt(n,e,s,r){if(!(r>0))return 0;for(var i=s,a=s+r-1,p=0;p<n.length;++p){var E=n.charCodeAt(p);if(E>=55296&&E<=57343){var P=n.charCodeAt(++p);E=65536+((E&1023)<<10)|P&1023}if(E<=127){if(s>=a)break;e[s++]=E}else if(E<=2047){if(s+1>=a)break;e[s++]=192|E>>6,e[s++]=128|E&63}else if(E<=65535){if(s+2>=a)break;e[s++]=224|E>>12,e[s++]=128|E>>6&63,e[s++]=128|E&63}else{if(s+3>=a)break;e[s++]=240|E>>18,e[s++]=128|E>>12&63,e[s++]=128|E>>6&63,e[s++]=128|E&63}}return e[s]=0,s-i}function zt(n,e,s){return dt(n,Ye,e,s)}function rt(n){for(var e=0,s=0;s<n.length;++s){var r=n.charCodeAt(s);r<=127?e++:r<=2047?e+=2:r>=55296&&r<=57343?(e+=4,++s):e+=3}return e}var Re,Ye,Ut,_e,ke;function Wt(){var n=He.buffer;t.HEAP8=Re=new Int8Array(n),t.HEAP16=Ut=new Int16Array(n),t.HEAP32=_e=new Int32Array(n),t.HEAPU8=Ye=new Uint8Array(n),t.HEAPU16=new Uint16Array(n),t.HEAPU32=ke=new Uint32Array(n),t.HEAPF32=new Float32Array(n),t.HEAPF64=new Float64Array(n),t.HEAP64=new BigInt64Array(n),t.HEAPU64=new BigUint64Array(n)}var Qt=t.INITIAL_MEMORY||16777216;t.wasmMemory?He=t.wasmMemory:He=new WebAssembly.Memory({initial:Qt/65536,maximum:2147483648/65536}),Wt(),Qt=He.buffer.byteLength;var Ht=[],Vt=[],Gt=[];function kn(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)On(t.preRun.shift());At(Ht)}function Tn(){!t.noFSInit&&!o.init.initialized&&o.init(),o.ignorePermissions=!1,At(Vt)}function Fn(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)Ln(t.postRun.shift());At(Gt)}function On(n){Ht.unshift(n)}function Pn(n){Vt.unshift(n)}function Ln(n){Gt.unshift(n)}var Ge=0,st=null;function Wr(n){return n}function xt(n){Ge++,t.monitorRunDependencies&&t.monitorRunDependencies(Ge)}function pt(n){if(Ge--,t.monitorRunDependencies&&t.monitorRunDependencies(Ge),Ge==0&&st){var e=st;st=null,e()}}function Ze(n){t.onAbort&&t.onAbort(n),n="Aborted("+n+")",Qe(n),jt=!0,n+=". Build with -sASSERTIONS for more info.";var e=new WebAssembly.RuntimeError(n);throw Ie(e),e}var Dn="data:application/octet-stream;base64,";function $t(n){return n.startsWith(Dn)}var Ne;t.locateFile?(Ne="sqlite3.wasm",$t(Ne)||(Ne=je(Ne))):Ne=new URL(""+new URL("sqlite3-Dz8YHigf.wasm",self.location.href).href,self.location.href).href;function Kt(n){try{if(n==Ne&&nt)return new Uint8Array(nt);if(St)return St(n);throw"both async and sync fetching of the wasm failed"}catch(e){Ze(e)}}function Cn(){return!nt&&(Z||ye)&&typeof fetch=="function"?fetch(Ne,{credentials:"same-origin"}).then(function(n){if(!n.ok)throw"failed to load wasm binary file at '"+Ne+"'";return n.arrayBuffer()}).catch(function(){return Kt(Ne)}):Promise.resolve().then(function(){return Kt(Ne)})}function Rn(){var n={env:tn,wasi_snapshot_preview1:tn};function e(p,E){var P=p.exports;t.asm=P,t.asm.__indirect_function_table,Pn(t.asm.__wasm_call_ctors),pt()}xt();function s(p){e(p.instance)}function r(p){return Cn().then(function(E){return WebAssembly.instantiate(E,n)}).then(function(E){return E}).then(p,function(E){Qe("failed to asynchronously prepare wasm: "+E),Ze(E)})}function i(){return!nt&&typeof WebAssembly.instantiateStreaming=="function"&&!$t(Ne)&&typeof fetch=="function"?fetch(Ne,{credentials:"same-origin"}).then(function(p){var E=WebAssembly.instantiateStreaming(p,n);return E.then(s,function(P){return Qe("wasm streaming compile failed: "+P),Qe("falling back to ArrayBuffer instantiation"),r(s)})}):r(s)}if(t.instantiateWasm)try{var a=t.instantiateWasm(n,e);return a}catch(p){Qe("Module.instantiateWasm callback failed with error: "+p),Ie(p)}return i().catch(Ie),{}}var de,Pe;function At(n){for(;n.length>0;)n.shift()(t)}var ge={isAbs:n=>n.charAt(0)==="/",splitPath:n=>{var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return e.exec(n).slice(1)},normalizeArray:(n,e)=>{for(var s=0,r=n.length-1;r>=0;r--){var i=n[r];i==="."?n.splice(r,1):i===".."?(n.splice(r,1),s++):s&&(n.splice(r,1),s--)}if(e)for(;s;s--)n.unshift("..");return n},normalize:n=>{var e=ge.isAbs(n),s=n.substr(-1)==="/";return n=ge.normalizeArray(n.split("/").filter(r=>!!r),!e).join("/"),!n&&!e&&(n="."),n&&s&&(n+="/"),(e?"/":"")+n},dirname:n=>{var e=ge.splitPath(n),s=e[0],r=e[1];return!s&&!r?".":(r&&(r=r.substr(0,r.length-1)),s+r)},basename:n=>{if(n==="/")return"/";n=ge.normalize(n),n=n.replace(/\/$/,"");var e=n.lastIndexOf("/");return e===-1?n:n.substr(e+1)},join:function(){var n=Array.prototype.slice.call(arguments);return ge.normalize(n.join("/"))},join2:(n,e)=>ge.normalize(n+"/"+e)};function Mn(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var n=new Uint8Array(1);return()=>(crypto.getRandomValues(n),n[0])}else return()=>Ze("randomDevice")}var Ue={resolve:function(){for(var n="",e=!1,s=arguments.length-1;s>=-1&&!e;s--){var r=s>=0?arguments[s]:o.cwd();if(typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";n=r+"/"+n,e=ge.isAbs(r)}return n=ge.normalizeArray(n.split("/").filter(i=>!!i),!e).join("/"),(e?"/":"")+n||"."},relative:(n,e)=>{n=Ue.resolve(n).substr(1),e=Ue.resolve(e).substr(1);function s(z){for(var V=0;V<z.length&&z[V]==="";V++);for(var te=z.length-1;te>=0&&z[te]==="";te--);return V>te?[]:z.slice(V,te-V+1)}for(var r=s(n.split("/")),i=s(e.split("/")),a=Math.min(r.length,i.length),p=a,E=0;E<a;E++)if(r[E]!==i[E]){p=E;break}for(var P=[],E=p;E<r.length;E++)P.push("..");return P=P.concat(i.slice(p)),P.join("/")}};function It(n,e,s){var r=s>0?s:rt(n)+1,i=new Array(r),a=dt(n,i,0,i.length);return e&&(i.length=a),i}var $e={ttys:[],init:function(){},shutdown:function(){},register:function(n,e){$e.ttys[n]={input:[],output:[],ops:e},o.registerDevice(n,$e.stream_ops)},stream_ops:{open:function(n){var e=$e.ttys[n.node.rdev];if(!e)throw new o.ErrnoError(43);n.tty=e,n.seekable=!1},close:function(n){n.tty.ops.fsync(n.tty)},fsync:function(n){n.tty.ops.fsync(n.tty)},read:function(n,e,s,r,i){if(!n.tty||!n.tty.ops.get_char)throw new o.ErrnoError(60);for(var a=0,p=0;p<r;p++){var E;try{E=n.tty.ops.get_char(n.tty)}catch{throw new o.ErrnoError(29)}if(E===void 0&&a===0)throw new o.ErrnoError(6);if(E==null)break;a++,e[s+p]=E}return a&&(n.node.timestamp=Date.now()),a},write:function(n,e,s,r,i){if(!n.tty||!n.tty.ops.put_char)throw new o.ErrnoError(60);try{for(var a=0;a<r;a++)n.tty.ops.put_char(n.tty,e[s+a])}catch{throw new o.ErrnoError(29)}return r&&(n.node.timestamp=Date.now()),a}},default_tty_ops:{get_char:function(n){if(!n.input.length){var e=null;if(typeof window<"u"&&typeof window.prompt=="function"?(e=window.prompt("Input: "),e!==null&&(e+=`
`)):typeof readline=="function"&&(e=readline(),e!==null&&(e+=`
`)),!e)return null;n.input=It(e,!0)}return n.input.shift()},put_char:function(n,e){e===null||e===10?(ft(Xe(n.output,0)),n.output=[]):e!=0&&n.output.push(e)},fsync:function(n){n.output&&n.output.length>0&&(ft(Xe(n.output,0)),n.output=[])}},default_tty1_ops:{put_char:function(n,e){e===null||e===10?(Qe(Xe(n.output,0)),n.output=[]):e!=0&&n.output.push(e)},fsync:function(n){n.output&&n.output.length>0&&(Qe(Xe(n.output,0)),n.output=[])}}};function Nn(n,e){return Ye.fill(0,n,n+e),n}function jn(n,e){return Math.ceil(n/e)*e}function Jt(n){n=jn(n,65536);var e=sn(65536,n);return e?Nn(e,n):0}var ce={ops_table:null,mount:function(n){return ce.createNode(null,"/",16895,0)},createNode:function(n,e,s,r){if(o.isBlkdev(s)||o.isFIFO(s))throw new o.ErrnoError(63);ce.ops_table||(ce.ops_table={dir:{node:{getattr:ce.node_ops.getattr,setattr:ce.node_ops.setattr,lookup:ce.node_ops.lookup,mknod:ce.node_ops.mknod,rename:ce.node_ops.rename,unlink:ce.node_ops.unlink,rmdir:ce.node_ops.rmdir,readdir:ce.node_ops.readdir,symlink:ce.node_ops.symlink},stream:{llseek:ce.stream_ops.llseek}},file:{node:{getattr:ce.node_ops.getattr,setattr:ce.node_ops.setattr},stream:{llseek:ce.stream_ops.llseek,read:ce.stream_ops.read,write:ce.stream_ops.write,allocate:ce.stream_ops.allocate,mmap:ce.stream_ops.mmap,msync:ce.stream_ops.msync}},link:{node:{getattr:ce.node_ops.getattr,setattr:ce.node_ops.setattr,readlink:ce.node_ops.readlink},stream:{}},chrdev:{node:{getattr:ce.node_ops.getattr,setattr:ce.node_ops.setattr},stream:o.chrdev_stream_ops}});var i=o.createNode(n,e,s,r);return o.isDir(i.mode)?(i.node_ops=ce.ops_table.dir.node,i.stream_ops=ce.ops_table.dir.stream,i.contents={}):o.isFile(i.mode)?(i.node_ops=ce.ops_table.file.node,i.stream_ops=ce.ops_table.file.stream,i.usedBytes=0,i.contents=null):o.isLink(i.mode)?(i.node_ops=ce.ops_table.link.node,i.stream_ops=ce.ops_table.link.stream):o.isChrdev(i.mode)&&(i.node_ops=ce.ops_table.chrdev.node,i.stream_ops=ce.ops_table.chrdev.stream),i.timestamp=Date.now(),n&&(n.contents[e]=i,n.timestamp=i.timestamp),i},getFileDataAsTypedArray:function(n){return n.contents?n.contents.subarray?n.contents.subarray(0,n.usedBytes):new Uint8Array(n.contents):new Uint8Array(0)},expandFileStorage:function(n,e){var s=n.contents?n.contents.length:0;if(!(s>=e)){var r=1024*1024;e=Math.max(e,s*(s<r?2:1.125)>>>0),s!=0&&(e=Math.max(e,256));var i=n.contents;n.contents=new Uint8Array(e),n.usedBytes>0&&n.contents.set(i.subarray(0,n.usedBytes),0)}},resizeFileStorage:function(n,e){if(n.usedBytes!=e)if(e==0)n.contents=null,n.usedBytes=0;else{var s=n.contents;n.contents=new Uint8Array(e),s&&n.contents.set(s.subarray(0,Math.min(e,n.usedBytes))),n.usedBytes=e}},node_ops:{getattr:function(n){var e={};return e.dev=o.isChrdev(n.mode)?n.id:1,e.ino=n.id,e.mode=n.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=n.rdev,o.isDir(n.mode)?e.size=4096:o.isFile(n.mode)?e.size=n.usedBytes:o.isLink(n.mode)?e.size=n.link.length:e.size=0,e.atime=new Date(n.timestamp),e.mtime=new Date(n.timestamp),e.ctime=new Date(n.timestamp),e.blksize=4096,e.blocks=Math.ceil(e.size/e.blksize),e},setattr:function(n,e){e.mode!==void 0&&(n.mode=e.mode),e.timestamp!==void 0&&(n.timestamp=e.timestamp),e.size!==void 0&&ce.resizeFileStorage(n,e.size)},lookup:function(n,e){throw o.genericErrors[44]},mknod:function(n,e,s,r){return ce.createNode(n,e,s,r)},rename:function(n,e,s){if(o.isDir(n.mode)){var r;try{r=o.lookupNode(e,s)}catch{}if(r)for(var i in r.contents)throw new o.ErrnoError(55)}delete n.parent.contents[n.name],n.parent.timestamp=Date.now(),n.name=s,e.contents[s]=n,e.timestamp=n.parent.timestamp,n.parent=e},unlink:function(n,e){delete n.contents[e],n.timestamp=Date.now()},rmdir:function(n,e){var s=o.lookupNode(n,e);for(var r in s.contents)throw new o.ErrnoError(55);delete n.contents[e],n.timestamp=Date.now()},readdir:function(n){var e=[".",".."];for(var s in n.contents)n.contents.hasOwnProperty(s)&&e.push(s);return e},symlink:function(n,e,s){var r=ce.createNode(n,e,41471,0);return r.link=s,r},readlink:function(n){if(!o.isLink(n.mode))throw new o.ErrnoError(28);return n.link}},stream_ops:{read:function(n,e,s,r,i){var a=n.node.contents;if(i>=n.node.usedBytes)return 0;var p=Math.min(n.node.usedBytes-i,r);if(p>8&&a.subarray)e.set(a.subarray(i,i+p),s);else for(var E=0;E<p;E++)e[s+E]=a[i+E];return p},write:function(n,e,s,r,i,a){if(e.buffer===Re.buffer&&(a=!1),!r)return 0;var p=n.node;if(p.timestamp=Date.now(),e.subarray&&(!p.contents||p.contents.subarray)){if(a)return p.contents=e.subarray(s,s+r),p.usedBytes=r,r;if(p.usedBytes===0&&i===0)return p.contents=e.slice(s,s+r),p.usedBytes=r,r;if(i+r<=p.usedBytes)return p.contents.set(e.subarray(s,s+r),i),r}if(ce.expandFileStorage(p,i+r),p.contents.subarray&&e.subarray)p.contents.set(e.subarray(s,s+r),i);else for(var E=0;E<r;E++)p.contents[i+E]=e[s+E];return p.usedBytes=Math.max(p.usedBytes,i+r),r},llseek:function(n,e,s){var r=e;if(s===1?r+=n.position:s===2&&o.isFile(n.node.mode)&&(r+=n.node.usedBytes),r<0)throw new o.ErrnoError(28);return r},allocate:function(n,e,s){ce.expandFileStorage(n.node,e+s),n.node.usedBytes=Math.max(n.node.usedBytes,e+s)},mmap:function(n,e,s,r,i){if(!o.isFile(n.node.mode))throw new o.ErrnoError(43);var a,p,E=n.node.contents;if(!(i&2)&&E.buffer===Re.buffer)p=!1,a=E.byteOffset;else{if((s>0||s+e<E.length)&&(E.subarray?E=E.subarray(s,s+e):E=Array.prototype.slice.call(E,s,s+e)),p=!0,a=Jt(e),!a)throw new o.ErrnoError(48);Re.set(E,a)}return{ptr:a,allocated:p}},msync:function(n,e,s,r,i){return ce.stream_ops.write(n,e,0,r,s,!1),0}}};function Bn(n,e,s,r){var i=r?"":"al "+n;_t(n,a=>{An(a,'Loading data file "'+n+'" failed (no arrayBuffer).'),e(new Uint8Array(a)),i&&pt()},a=>{if(s)s();else throw'Loading data file "'+n+'" failed.'}),i&&xt()}var o={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(n,e={})=>{if(n=Ue.resolve(n),!n)return{path:"",node:null};var s={follow_mount:!0,recurse_count:0};if(e=Object.assign(s,e),e.recurse_count>8)throw new o.ErrnoError(32);for(var r=n.split("/").filter(te=>!!te),i=o.root,a="/",p=0;p<r.length;p++){var E=p===r.length-1;if(E&&e.parent)break;if(i=o.lookupNode(i,r[p]),a=ge.join2(a,r[p]),o.isMountpoint(i)&&(!E||E&&e.follow_mount)&&(i=i.mounted.root),!E||e.follow)for(var P=0;o.isLink(i.mode);){var z=o.readlink(a);a=Ue.resolve(ge.dirname(a),z);var V=o.lookupPath(a,{recurse_count:e.recurse_count+1});if(i=V.node,P++>40)throw new o.ErrnoError(32)}}return{path:a,node:i}},getPath:n=>{for(var e;;){if(o.isRoot(n)){var s=n.mount.mountpoint;return e?s[s.length-1]!=="/"?s+"/"+e:s+e:s}e=e?n.name+"/"+e:n.name,n=n.parent}},hashName:(n,e)=>{for(var s=0,r=0;r<e.length;r++)s=(s<<5)-s+e.charCodeAt(r)|0;return(n+s>>>0)%o.nameTable.length},hashAddNode:n=>{var e=o.hashName(n.parent.id,n.name);n.name_next=o.nameTable[e],o.nameTable[e]=n},hashRemoveNode:n=>{var e=o.hashName(n.parent.id,n.name);if(o.nameTable[e]===n)o.nameTable[e]=n.name_next;else for(var s=o.nameTable[e];s;){if(s.name_next===n){s.name_next=n.name_next;break}s=s.name_next}},lookupNode:(n,e)=>{var s=o.mayLookup(n);if(s)throw new o.ErrnoError(s,n);for(var r=o.hashName(n.id,e),i=o.nameTable[r];i;i=i.name_next){var a=i.name;if(i.parent.id===n.id&&a===e)return i}return o.lookup(n,e)},createNode:(n,e,s,r)=>{var i=new o.FSNode(n,e,s,r);return o.hashAddNode(i),i},destroyNode:n=>{o.hashRemoveNode(n)},isRoot:n=>n===n.parent,isMountpoint:n=>!!n.mounted,isFile:n=>(n&61440)===32768,isDir:n=>(n&61440)===16384,isLink:n=>(n&61440)===40960,isChrdev:n=>(n&61440)===8192,isBlkdev:n=>(n&61440)===24576,isFIFO:n=>(n&61440)===4096,isSocket:n=>(n&49152)===49152,flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:n=>{var e=o.flagModes[n];if(typeof e>"u")throw new Error("Unknown file open mode: "+n);return e},flagsToPermissionString:n=>{var e=["r","w","rw"][n&3];return n&512&&(e+="w"),e},nodePermissions:(n,e)=>o.ignorePermissions?0:e.includes("r")&&!(n.mode&292)||e.includes("w")&&!(n.mode&146)||e.includes("x")&&!(n.mode&73)?2:0,mayLookup:n=>{var e=o.nodePermissions(n,"x");return e||(n.node_ops.lookup?0:2)},mayCreate:(n,e)=>{try{var s=o.lookupNode(n,e);return 20}catch{}return o.nodePermissions(n,"wx")},mayDelete:(n,e,s)=>{var r;try{r=o.lookupNode(n,e)}catch(a){return a.errno}var i=o.nodePermissions(n,"wx");if(i)return i;if(s){if(!o.isDir(r.mode))return 54;if(o.isRoot(r)||o.getPath(r)===o.cwd())return 10}else if(o.isDir(r.mode))return 31;return 0},mayOpen:(n,e)=>n?o.isLink(n.mode)?32:o.isDir(n.mode)&&(o.flagsToPermissionString(e)!=="r"||e&512)?31:o.nodePermissions(n,o.flagsToPermissionString(e)):44,MAX_OPEN_FDS:4096,nextfd:(n=0,e=o.MAX_OPEN_FDS)=>{for(var s=n;s<=e;s++)if(!o.streams[s])return s;throw new o.ErrnoError(33)},getStream:n=>o.streams[n],createStream:(n,e,s)=>{o.FSStream||(o.FSStream=function(){this.shared={}},o.FSStream.prototype={},Object.defineProperties(o.FSStream.prototype,{object:{get:function(){return this.node},set:function(i){this.node=i}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}},flags:{get:function(){return this.shared.flags},set:function(i){this.shared.flags=i}},position:{get:function(){return this.shared.position},set:function(i){this.shared.position=i}}})),n=Object.assign(new o.FSStream,n);var r=o.nextfd(e,s);return n.fd=r,o.streams[r]=n,n},closeStream:n=>{o.streams[n]=null},chrdev_stream_ops:{open:n=>{var e=o.getDevice(n.node.rdev);n.stream_ops=e.stream_ops,n.stream_ops.open&&n.stream_ops.open(n)},llseek:()=>{throw new o.ErrnoError(70)}},major:n=>n>>8,minor:n=>n&255,makedev:(n,e)=>n<<8|e,registerDevice:(n,e)=>{o.devices[n]={stream_ops:e}},getDevice:n=>o.devices[n],getMounts:n=>{for(var e=[],s=[n];s.length;){var r=s.pop();e.push(r),s.push.apply(s,r.mounts)}return e},syncfs:(n,e)=>{typeof n=="function"&&(e=n,n=!1),o.syncFSRequests++,o.syncFSRequests>1&&Qe("warning: "+o.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var s=o.getMounts(o.root.mount),r=0;function i(p){return o.syncFSRequests--,e(p)}function a(p){if(p)return a.errored?void 0:(a.errored=!0,i(p));++r>=s.length&&i(null)}s.forEach(p=>{if(!p.type.syncfs)return a(null);p.type.syncfs(p,n,a)})},mount:(n,e,s)=>{var r=s==="/",i=!s,a;if(r&&o.root)throw new o.ErrnoError(10);if(!r&&!i){var p=o.lookupPath(s,{follow_mount:!1});if(s=p.path,a=p.node,o.isMountpoint(a))throw new o.ErrnoError(10);if(!o.isDir(a.mode))throw new o.ErrnoError(54)}var E={type:n,opts:e,mountpoint:s,mounts:[]},P=n.mount(E);return P.mount=E,E.root=P,r?o.root=P:a&&(a.mounted=E,a.mount&&a.mount.mounts.push(E)),P},unmount:n=>{var e=o.lookupPath(n,{follow_mount:!1});if(!o.isMountpoint(e.node))throw new o.ErrnoError(28);var s=e.node,r=s.mounted,i=o.getMounts(r);Object.keys(o.nameTable).forEach(p=>{for(var E=o.nameTable[p];E;){var P=E.name_next;i.includes(E.mount)&&o.destroyNode(E),E=P}}),s.mounted=null;var a=s.mount.mounts.indexOf(r);s.mount.mounts.splice(a,1)},lookup:(n,e)=>n.node_ops.lookup(n,e),mknod:(n,e,s)=>{var r=o.lookupPath(n,{parent:!0}),i=r.node,a=ge.basename(n);if(!a||a==="."||a==="..")throw new o.ErrnoError(28);var p=o.mayCreate(i,a);if(p)throw new o.ErrnoError(p);if(!i.node_ops.mknod)throw new o.ErrnoError(63);return i.node_ops.mknod(i,a,e,s)},create:(n,e)=>(e=e!==void 0?e:438,e&=4095,e|=32768,o.mknod(n,e,0)),mkdir:(n,e)=>(e=e!==void 0?e:511,e&=1023,e|=16384,o.mknod(n,e,0)),mkdirTree:(n,e)=>{for(var s=n.split("/"),r="",i=0;i<s.length;++i)if(s[i]){r+="/"+s[i];try{o.mkdir(r,e)}catch(a){if(a.errno!=20)throw a}}},mkdev:(n,e,s)=>(typeof s>"u"&&(s=e,e=438),e|=8192,o.mknod(n,e,s)),symlink:(n,e)=>{if(!Ue.resolve(n))throw new o.ErrnoError(44);var s=o.lookupPath(e,{parent:!0}),r=s.node;if(!r)throw new o.ErrnoError(44);var i=ge.basename(e),a=o.mayCreate(r,i);if(a)throw new o.ErrnoError(a);if(!r.node_ops.symlink)throw new o.ErrnoError(63);return r.node_ops.symlink(r,i,n)},rename:(n,e)=>{var s=ge.dirname(n),r=ge.dirname(e),i=ge.basename(n),a=ge.basename(e),p,E,P;if(p=o.lookupPath(n,{parent:!0}),E=p.node,p=o.lookupPath(e,{parent:!0}),P=p.node,!E||!P)throw new o.ErrnoError(44);if(E.mount!==P.mount)throw new o.ErrnoError(75);var z=o.lookupNode(E,i),V=Ue.relative(n,r);if(V.charAt(0)!==".")throw new o.ErrnoError(28);if(V=Ue.relative(e,s),V.charAt(0)!==".")throw new o.ErrnoError(55);var te;try{te=o.lookupNode(P,a)}catch{}if(z!==te){var k=o.isDir(z.mode),_=o.mayDelete(E,i,k);if(_)throw new o.ErrnoError(_);if(_=te?o.mayDelete(P,a,k):o.mayCreate(P,a),_)throw new o.ErrnoError(_);if(!E.node_ops.rename)throw new o.ErrnoError(63);if(o.isMountpoint(z)||te&&o.isMountpoint(te))throw new o.ErrnoError(10);if(P!==E&&(_=o.nodePermissions(E,"w"),_))throw new o.ErrnoError(_);o.hashRemoveNode(z);try{E.node_ops.rename(z,P,a)}catch(d){throw d}finally{o.hashAddNode(z)}}},rmdir:n=>{var e=o.lookupPath(n,{parent:!0}),s=e.node,r=ge.basename(n),i=o.lookupNode(s,r),a=o.mayDelete(s,r,!0);if(a)throw new o.ErrnoError(a);if(!s.node_ops.rmdir)throw new o.ErrnoError(63);if(o.isMountpoint(i))throw new o.ErrnoError(10);s.node_ops.rmdir(s,r),o.destroyNode(i)},readdir:n=>{var e=o.lookupPath(n,{follow:!0}),s=e.node;if(!s.node_ops.readdir)throw new o.ErrnoError(54);return s.node_ops.readdir(s)},unlink:n=>{var e=o.lookupPath(n,{parent:!0}),s=e.node;if(!s)throw new o.ErrnoError(44);var r=ge.basename(n),i=o.lookupNode(s,r),a=o.mayDelete(s,r,!1);if(a)throw new o.ErrnoError(a);if(!s.node_ops.unlink)throw new o.ErrnoError(63);if(o.isMountpoint(i))throw new o.ErrnoError(10);s.node_ops.unlink(s,r),o.destroyNode(i)},readlink:n=>{var e=o.lookupPath(n),s=e.node;if(!s)throw new o.ErrnoError(44);if(!s.node_ops.readlink)throw new o.ErrnoError(28);return Ue.resolve(o.getPath(s.parent),s.node_ops.readlink(s))},stat:(n,e)=>{var s=o.lookupPath(n,{follow:!e}),r=s.node;if(!r)throw new o.ErrnoError(44);if(!r.node_ops.getattr)throw new o.ErrnoError(63);return r.node_ops.getattr(r)},lstat:n=>o.stat(n,!0),chmod:(n,e,s)=>{var r;if(typeof n=="string"){var i=o.lookupPath(n,{follow:!s});r=i.node}else r=n;if(!r.node_ops.setattr)throw new o.ErrnoError(63);r.node_ops.setattr(r,{mode:e&4095|r.mode&-4096,timestamp:Date.now()})},lchmod:(n,e)=>{o.chmod(n,e,!0)},fchmod:(n,e)=>{var s=o.getStream(n);if(!s)throw new o.ErrnoError(8);o.chmod(s.node,e)},chown:(n,e,s,r)=>{var i;if(typeof n=="string"){var a=o.lookupPath(n,{follow:!r});i=a.node}else i=n;if(!i.node_ops.setattr)throw new o.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown:(n,e,s)=>{o.chown(n,e,s,!0)},fchown:(n,e,s)=>{var r=o.getStream(n);if(!r)throw new o.ErrnoError(8);o.chown(r.node,e,s)},truncate:(n,e)=>{if(e<0)throw new o.ErrnoError(28);var s;if(typeof n=="string"){var r=o.lookupPath(n,{follow:!0});s=r.node}else s=n;if(!s.node_ops.setattr)throw new o.ErrnoError(63);if(o.isDir(s.mode))throw new o.ErrnoError(31);if(!o.isFile(s.mode))throw new o.ErrnoError(28);var i=o.nodePermissions(s,"w");if(i)throw new o.ErrnoError(i);s.node_ops.setattr(s,{size:e,timestamp:Date.now()})},ftruncate:(n,e)=>{var s=o.getStream(n);if(!s)throw new o.ErrnoError(8);if(!(s.flags&2097155))throw new o.ErrnoError(28);o.truncate(s.node,e)},utime:(n,e,s)=>{var r=o.lookupPath(n,{follow:!0}),i=r.node;i.node_ops.setattr(i,{timestamp:Math.max(e,s)})},open:(n,e,s)=>{if(n==="")throw new o.ErrnoError(44);e=typeof e=="string"?o.modeStringToFlags(e):e,s=typeof s>"u"?438:s,e&64?s=s&4095|32768:s=0;var r;if(typeof n=="object")r=n;else{n=ge.normalize(n);try{var i=o.lookupPath(n,{follow:!(e&131072)});r=i.node}catch{}}var a=!1;if(e&64)if(r){if(e&128)throw new o.ErrnoError(20)}else r=o.mknod(n,s,0),a=!0;if(!r)throw new o.ErrnoError(44);if(o.isChrdev(r.mode)&&(e&=-513),e&65536&&!o.isDir(r.mode))throw new o.ErrnoError(54);if(!a){var p=o.mayOpen(r,e);if(p)throw new o.ErrnoError(p)}e&512&&!a&&o.truncate(r,0),e&=-131713;var E=o.createStream({node:r,path:o.getPath(r),flags:e,seekable:!0,position:0,stream_ops:r.stream_ops,ungotten:[],error:!1});return E.stream_ops.open&&E.stream_ops.open(E),t.logReadFiles&&!(e&1)&&(o.readFiles||(o.readFiles={}),n in o.readFiles||(o.readFiles[n]=1)),E},close:n=>{if(o.isClosed(n))throw new o.ErrnoError(8);n.getdents&&(n.getdents=null);try{n.stream_ops.close&&n.stream_ops.close(n)}catch(e){throw e}finally{o.closeStream(n.fd)}n.fd=null},isClosed:n=>n.fd===null,llseek:(n,e,s)=>{if(o.isClosed(n))throw new o.ErrnoError(8);if(!n.seekable||!n.stream_ops.llseek)throw new o.ErrnoError(70);if(s!=0&&s!=1&&s!=2)throw new o.ErrnoError(28);return n.position=n.stream_ops.llseek(n,e,s),n.ungotten=[],n.position},read:(n,e,s,r,i)=>{if(r<0||i<0)throw new o.ErrnoError(28);if(o.isClosed(n))throw new o.ErrnoError(8);if((n.flags&2097155)===1)throw new o.ErrnoError(8);if(o.isDir(n.node.mode))throw new o.ErrnoError(31);if(!n.stream_ops.read)throw new o.ErrnoError(28);var a=typeof i<"u";if(!a)i=n.position;else if(!n.seekable)throw new o.ErrnoError(70);var p=n.stream_ops.read(n,e,s,r,i);return a||(n.position+=p),p},write:(n,e,s,r,i,a)=>{if(r<0||i<0)throw new o.ErrnoError(28);if(o.isClosed(n))throw new o.ErrnoError(8);if(!(n.flags&2097155))throw new o.ErrnoError(8);if(o.isDir(n.node.mode))throw new o.ErrnoError(31);if(!n.stream_ops.write)throw new o.ErrnoError(28);n.seekable&&n.flags&1024&&o.llseek(n,0,2);var p=typeof i<"u";if(!p)i=n.position;else if(!n.seekable)throw new o.ErrnoError(70);var E=n.stream_ops.write(n,e,s,r,i,a);return p||(n.position+=E),E},allocate:(n,e,s)=>{if(o.isClosed(n))throw new o.ErrnoError(8);if(e<0||s<=0)throw new o.ErrnoError(28);if(!(n.flags&2097155))throw new o.ErrnoError(8);if(!o.isFile(n.node.mode)&&!o.isDir(n.node.mode))throw new o.ErrnoError(43);if(!n.stream_ops.allocate)throw new o.ErrnoError(138);n.stream_ops.allocate(n,e,s)},mmap:(n,e,s,r,i)=>{if(r&2&&!(i&2)&&(n.flags&2097155)!==2)throw new o.ErrnoError(2);if((n.flags&2097155)===1)throw new o.ErrnoError(2);if(!n.stream_ops.mmap)throw new o.ErrnoError(43);return n.stream_ops.mmap(n,e,s,r,i)},msync:(n,e,s,r,i)=>n.stream_ops.msync?n.stream_ops.msync(n,e,s,r,i):0,munmap:n=>0,ioctl:(n,e,s)=>{if(!n.stream_ops.ioctl)throw new o.ErrnoError(59);return n.stream_ops.ioctl(n,e,s)},readFile:(n,e={})=>{if(e.flags=e.flags||0,e.encoding=e.encoding||"binary",e.encoding!=="utf8"&&e.encoding!=="binary")throw new Error('Invalid encoding type "'+e.encoding+'"');var s,r=o.open(n,e.flags),i=o.stat(n),a=i.size,p=new Uint8Array(a);return o.read(r,p,0,a,0),e.encoding==="utf8"?s=Xe(p,0):e.encoding==="binary"&&(s=p),o.close(r),s},writeFile:(n,e,s={})=>{s.flags=s.flags||577;var r=o.open(n,s.flags,s.mode);if(typeof e=="string"){var i=new Uint8Array(rt(e)+1),a=dt(e,i,0,i.length);o.write(r,i,0,a,void 0,s.canOwn)}else if(ArrayBuffer.isView(e))o.write(r,e,0,e.byteLength,void 0,s.canOwn);else throw new Error("Unsupported data type");o.close(r)},cwd:()=>o.currentPath,chdir:n=>{var e=o.lookupPath(n,{follow:!0});if(e.node===null)throw new o.ErrnoError(44);if(!o.isDir(e.node.mode))throw new o.ErrnoError(54);var s=o.nodePermissions(e.node,"x");if(s)throw new o.ErrnoError(s);o.currentPath=e.path},createDefaultDirectories:()=>{o.mkdir("/tmp"),o.mkdir("/home"),o.mkdir("/home/web_user")},createDefaultDevices:()=>{o.mkdir("/dev"),o.registerDevice(o.makedev(1,3),{read:()=>0,write:(e,s,r,i,a)=>i}),o.mkdev("/dev/null",o.makedev(1,3)),$e.register(o.makedev(5,0),$e.default_tty_ops),$e.register(o.makedev(6,0),$e.default_tty1_ops),o.mkdev("/dev/tty",o.makedev(5,0)),o.mkdev("/dev/tty1",o.makedev(6,0));var n=Mn();o.createDevice("/dev","random",n),o.createDevice("/dev","urandom",n),o.mkdir("/dev/shm"),o.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{o.mkdir("/proc");var n=o.mkdir("/proc/self");o.mkdir("/proc/self/fd"),o.mount({mount:()=>{var e=o.createNode(n,"fd",16895,73);return e.node_ops={lookup:(s,r)=>{var i=+r,a=o.getStream(i);if(!a)throw new o.ErrnoError(8);var p={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>a.path}};return p.parent=p,p}},e}},{},"/proc/self/fd")},createStandardStreams:()=>{t.stdin?o.createDevice("/dev","stdin",t.stdin):o.symlink("/dev/tty","/dev/stdin"),t.stdout?o.createDevice("/dev","stdout",null,t.stdout):o.symlink("/dev/tty","/dev/stdout"),t.stderr?o.createDevice("/dev","stderr",null,t.stderr):o.symlink("/dev/tty1","/dev/stderr"),o.open("/dev/stdin",0),o.open("/dev/stdout",1),o.open("/dev/stderr",1)},ensureErrnoError:()=>{o.ErrnoError||(o.ErrnoError=function(e,s){this.node=s,this.setErrno=function(r){this.errno=r},this.setErrno(e),this.message="FS error"},o.ErrnoError.prototype=new Error,o.ErrnoError.prototype.constructor=o.ErrnoError,[44].forEach(n=>{o.genericErrors[n]=new o.ErrnoError(n),o.genericErrors[n].stack="<generic error, no stack>"}))},staticInit:()=>{o.ensureErrnoError(),o.nameTable=new Array(4096),o.mount(ce,{},"/"),o.createDefaultDirectories(),o.createDefaultDevices(),o.createSpecialDirectories(),o.filesystems={MEMFS:ce}},init:(n,e,s)=>{o.init.initialized=!0,o.ensureErrnoError(),t.stdin=n||t.stdin,t.stdout=e||t.stdout,t.stderr=s||t.stderr,o.createStandardStreams()},quit:()=>{o.init.initialized=!1;for(var n=0;n<o.streams.length;n++){var e=o.streams[n];e&&o.close(e)}},getMode:(n,e)=>{var s=0;return n&&(s|=365),e&&(s|=146),s},findObject:(n,e)=>{var s=o.analyzePath(n,e);return s.exists?s.object:null},analyzePath:(n,e)=>{try{var s=o.lookupPath(n,{follow:!e});n=s.path}catch{}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var s=o.lookupPath(n,{parent:!0});r.parentExists=!0,r.parentPath=s.path,r.parentObject=s.node,r.name=ge.basename(n),s=o.lookupPath(n,{follow:!e}),r.exists=!0,r.path=s.path,r.object=s.node,r.name=s.node.name,r.isRoot=s.path==="/"}catch(i){r.error=i.errno}return r},createPath:(n,e,s,r)=>{n=typeof n=="string"?n:o.getPath(n);for(var i=e.split("/").reverse();i.length;){var a=i.pop();if(a){var p=ge.join2(n,a);try{o.mkdir(p)}catch{}n=p}}return p},createFile:(n,e,s,r,i)=>{var a=ge.join2(typeof n=="string"?n:o.getPath(n),e),p=o.getMode(r,i);return o.create(a,p)},createDataFile:(n,e,s,r,i,a)=>{var p=e;n&&(n=typeof n=="string"?n:o.getPath(n),p=e?ge.join2(n,e):n);var E=o.getMode(r,i),P=o.create(p,E);if(s){if(typeof s=="string"){for(var z=new Array(s.length),V=0,te=s.length;V<te;++V)z[V]=s.charCodeAt(V);s=z}o.chmod(P,E|146);var k=o.open(P,577);o.write(k,s,0,s.length,0,a),o.close(k),o.chmod(P,E)}return P},createDevice:(n,e,s,r)=>{var i=ge.join2(typeof n=="string"?n:o.getPath(n),e),a=o.getMode(!!s,!!r);o.createDevice.major||(o.createDevice.major=64);var p=o.makedev(o.createDevice.major++,0);return o.registerDevice(p,{open:E=>{E.seekable=!1},close:E=>{r&&r.buffer&&r.buffer.length&&r(10)},read:(E,P,z,V,te)=>{for(var k=0,_=0;_<V;_++){var d;try{d=s()}catch{throw new o.ErrnoError(29)}if(d===void 0&&k===0)throw new o.ErrnoError(6);if(d==null)break;k++,P[z+_]=d}return k&&(E.node.timestamp=Date.now()),k},write:(E,P,z,V,te)=>{for(var k=0;k<V;k++)try{r(P[z+k])}catch{throw new o.ErrnoError(29)}return V&&(E.node.timestamp=Date.now()),k}}),o.mkdev(i,a,p)},forceLoadFile:n=>{if(n.isDevice||n.isFolder||n.link||n.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(tt)try{n.contents=It(tt(n.url),!0),n.usedBytes=n.contents.length}catch{throw new o.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:(n,e,s,r,i)=>{function a(){this.lengthKnown=!1,this.chunks=[]}if(a.prototype.get=function(_){if(!(_>this.length-1||_<0)){var d=_%this.chunkSize,b=_/this.chunkSize|0;return this.getter(b)[d]}},a.prototype.setDataGetter=function(_){this.getter=_},a.prototype.cacheLength=function(){var _=new XMLHttpRequest;if(_.open("HEAD",s,!1),_.send(null),!(_.status>=200&&_.status<300||_.status===304))throw new Error("Couldn't load "+s+". Status: "+_.status);var d=Number(_.getResponseHeader("Content-length")),b,A=(b=_.getResponseHeader("Accept-Ranges"))&&b==="bytes",g=(b=_.getResponseHeader("Content-Encoding"))&&b==="gzip",O=1024*1024;A||(O=d);var N=(W,K)=>{if(W>K)throw new Error("invalid range ("+W+", "+K+") or no bytes requested!");if(K>d-1)throw new Error("only "+d+" bytes available! programmer error!");var u=new XMLHttpRequest;if(u.open("GET",s,!1),d!==O&&u.setRequestHeader("Range","bytes="+W+"-"+K),u.responseType="arraybuffer",u.overrideMimeType&&u.overrideMimeType("text/plain; charset=x-user-defined"),u.send(null),!(u.status>=200&&u.status<300||u.status===304))throw new Error("Couldn't load "+s+". Status: "+u.status);return u.response!==void 0?new Uint8Array(u.response||[]):It(u.responseText||"",!0)},B=this;B.setDataGetter(W=>{var K=W*O,u=(W+1)*O-1;if(u=Math.min(u,d-1),typeof B.chunks[W]>"u"&&(B.chunks[W]=N(K,u)),typeof B.chunks[W]>"u")throw new Error("doXHR failed!");return B.chunks[W]}),(g||!d)&&(O=d=1,d=this.getter(0).length,O=d,ft("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=d,this._chunkSize=O,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!ye)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var p=new a;Object.defineProperties(p,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var E={isDevice:!1,contents:p}}else var E={isDevice:!1,url:s};var P=o.createFile(n,e,E,r,i);E.contents?P.contents=E.contents:E.url&&(P.contents=null,P.url=E.url),Object.defineProperties(P,{usedBytes:{get:function(){return this.contents.length}}});var z={},V=Object.keys(P.stream_ops);V.forEach(k=>{var _=P.stream_ops[k];z[k]=function(){return o.forceLoadFile(P),_.apply(null,arguments)}});function te(k,_,d,b,A){var g=k.node.contents;if(A>=g.length)return 0;var O=Math.min(g.length-A,b);if(g.slice)for(var N=0;N<O;N++)_[d+N]=g[A+N];else for(var N=0;N<O;N++)_[d+N]=g.get(A+N);return O}return z.read=(k,_,d,b,A)=>(o.forceLoadFile(P),te(k,_,d,b,A)),z.mmap=(k,_,d,b,A)=>{o.forceLoadFile(P);var g=Jt(_);if(!g)throw new o.ErrnoError(48);return te(k,Re,g,_,d),{ptr:g,allocated:!0}},P.stream_ops=z,P},createPreloadedFile:(n,e,s,r,i,a,p,E,P,z)=>{var V=e?Ue.resolve(ge.join2(n,e)):n;function te(k){function _(d){z&&z(),E||o.createDataFile(n,e,d,r,i,P),a&&a(),pt()}Browser.handledByPreloadPlugin(k,V,_,()=>{p&&p(),pt()})||_(k)}xt(),typeof s=="string"?Bn(s,k=>te(k),p):te(s)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(n,e,s)=>{e=e||(()=>{}),s=s||(()=>{});var r=o.indexedDB();try{var i=r.open(o.DB_NAME(),o.DB_VERSION)}catch(a){return s(a)}i.onupgradeneeded=()=>{ft("creating db");var a=i.result;a.createObjectStore(o.DB_STORE_NAME)},i.onsuccess=()=>{var a=i.result,p=a.transaction([o.DB_STORE_NAME],"readwrite"),E=p.objectStore(o.DB_STORE_NAME),P=0,z=0,V=n.length;function te(){z==0?e():s()}n.forEach(k=>{var _=E.put(o.analyzePath(k).object.contents,k);_.onsuccess=()=>{P++,P+z==V&&te()},_.onerror=()=>{z++,P+z==V&&te()}}),p.onerror=s},i.onerror=s},loadFilesFromDB:(n,e,s)=>{e=e||(()=>{}),s=s||(()=>{});var r=o.indexedDB();try{var i=r.open(o.DB_NAME(),o.DB_VERSION)}catch(a){return s(a)}i.onupgradeneeded=s,i.onsuccess=()=>{var a=i.result;try{var p=a.transaction([o.DB_STORE_NAME],"readonly")}catch(k){s(k);return}var E=p.objectStore(o.DB_STORE_NAME),P=0,z=0,V=n.length;function te(){z==0?e():s()}n.forEach(k=>{var _=E.get(k);_.onsuccess=()=>{o.analyzePath(k).exists&&o.unlink(k),o.createDataFile(ge.dirname(k),ge.basename(k),_.result,!0,!0,!0),P++,P+z==V&&te()},_.onerror=()=>{z++,P+z==V&&te()}}),p.onerror=s},i.onerror=s}},ie={DEFAULT_POLLMASK:5,calculateAt:function(n,e,s){if(ge.isAbs(e))return e;var r;if(n===-100)r=o.cwd();else{var i=ie.getStreamFromFD(n);r=i.path}if(e.length==0){if(!s)throw new o.ErrnoError(44);return r}return ge.join2(r,e)},doStat:function(n,e,s){try{var r=n(e)}catch(E){if(E&&E.node&&ge.normalize(e)!==ge.normalize(o.getPath(E.node)))return-54;throw E}_e[s>>2]=r.dev,_e[s+8>>2]=r.ino,_e[s+12>>2]=r.mode,ke[s+16>>2]=r.nlink,_e[s+20>>2]=r.uid,_e[s+24>>2]=r.gid,_e[s+28>>2]=r.rdev,Pe=[r.size>>>0,(de=r.size,+Math.abs(de)>=1?de>0?(Math.min(+Math.floor(de/4294967296),4294967295)|0)>>>0:~~+Math.ceil((de-+(~~de>>>0))/4294967296)>>>0:0)],_e[s+40>>2]=Pe[0],_e[s+44>>2]=Pe[1],_e[s+48>>2]=4096,_e[s+52>>2]=r.blocks;var i=r.atime.getTime(),a=r.mtime.getTime(),p=r.ctime.getTime();return Pe=[Math.floor(i/1e3)>>>0,(de=Math.floor(i/1e3),+Math.abs(de)>=1?de>0?(Math.min(+Math.floor(de/4294967296),4294967295)|0)>>>0:~~+Math.ceil((de-+(~~de>>>0))/4294967296)>>>0:0)],_e[s+56>>2]=Pe[0],_e[s+60>>2]=Pe[1],ke[s+64>>2]=i%1e3*1e3,Pe=[Math.floor(a/1e3)>>>0,(de=Math.floor(a/1e3),+Math.abs(de)>=1?de>0?(Math.min(+Math.floor(de/4294967296),4294967295)|0)>>>0:~~+Math.ceil((de-+(~~de>>>0))/4294967296)>>>0:0)],_e[s+72>>2]=Pe[0],_e[s+76>>2]=Pe[1],ke[s+80>>2]=a%1e3*1e3,Pe=[Math.floor(p/1e3)>>>0,(de=Math.floor(p/1e3),+Math.abs(de)>=1?de>0?(Math.min(+Math.floor(de/4294967296),4294967295)|0)>>>0:~~+Math.ceil((de-+(~~de>>>0))/4294967296)>>>0:0)],_e[s+88>>2]=Pe[0],_e[s+92>>2]=Pe[1],ke[s+96>>2]=p%1e3*1e3,Pe=[r.ino>>>0,(de=r.ino,+Math.abs(de)>=1?de>0?(Math.min(+Math.floor(de/4294967296),4294967295)|0)>>>0:~~+Math.ceil((de-+(~~de>>>0))/4294967296)>>>0:0)],_e[s+104>>2]=Pe[0],_e[s+108>>2]=Pe[1],0},doMsync:function(n,e,s,r,i){if(!o.isFile(e.node.mode))throw new o.ErrnoError(43);if(r&2)return 0;var a=Ye.slice(n,n+s);o.msync(e,a,i,s,r)},varargs:void 0,get:function(){ie.varargs+=4;var n=_e[ie.varargs-4>>2];return n},getStr:function(n){var e=In(n);return e},getStreamFromFD:function(n){var e=o.getStream(n);if(!e)throw new o.ErrnoError(8);return e}};function zn(n,e){try{return n=ie.getStr(n),o.chmod(n,e),0}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function Un(n,e,s,r){try{if(e=ie.getStr(e),e=ie.calculateAt(n,e),s&-8)return-28;var i=o.lookupPath(e,{follow:!0}),a=i.node;if(!a)return-44;var p="";return s&4&&(p+="r"),s&2&&(p+="w"),s&1&&(p+="x"),p&&o.nodePermissions(a,p)?-2:0}catch(E){if(typeof o>"u"||!(E instanceof o.ErrnoError))throw E;return-E.errno}}function Wn(n,e){try{return o.fchmod(n,e),0}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function Qn(n,e,s){try{return o.fchown(n,e,s),0}catch(r){if(typeof o>"u"||!(r instanceof o.ErrnoError))throw r;return-r.errno}}function Hn(n){return _e[nn()>>2]=n,n}function Vn(n,e,s){ie.varargs=s;try{var r=ie.getStreamFromFD(n);switch(e){case 0:{var i=ie.get();if(i<0)return-28;var a;return a=o.createStream(r,i),a.fd}case 1:case 2:return 0;case 3:return r.flags;case 4:{var i=ie.get();return r.flags|=i,0}case 5:{var i=ie.get(),p=0;return Ut[i+p>>1]=2,0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:return Hn(28),-1;default:return-28}}catch(E){if(typeof o>"u"||!(E instanceof o.ErrnoError))throw E;return-E.errno}}function Gn(n,e){try{var s=ie.getStreamFromFD(n);return ie.doStat(o.stat,s.path,e)}catch(r){if(typeof o>"u"||!(r instanceof o.ErrnoError))throw r;return-r.errno}}var $n=9007199254740992,Kn=-9007199254740992;function Xt(n){return n<Kn||n>$n?NaN:Number(n)}function Jn(n,e){try{return e=Xt(e),isNaN(e)?-61:(o.ftruncate(n,e),0)}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function Xn(n,e){try{if(e===0)return-28;var s=o.cwd(),r=rt(s)+1;return e<r?-68:(zt(s,n,e),r)}catch(i){if(typeof o>"u"||!(i instanceof o.ErrnoError))throw i;return-i.errno}}function Yn(n,e,s){ie.varargs=s;try{var r=ie.getStreamFromFD(n);switch(e){case 21509:case 21505:return r.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return r.tty?0:-59;case 21519:{if(!r.tty)return-59;var i=ie.get();return _e[i>>2]=0,0}case 21520:return r.tty?-28:-59;case 21531:{var i=ie.get();return o.ioctl(r,e,i)}case 21523:return r.tty?0:-59;case 21524:return r.tty?0:-59;default:return-28}}catch(a){if(typeof o>"u"||!(a instanceof o.ErrnoError))throw a;return-a.errno}}function Zn(n,e){try{return n=ie.getStr(n),ie.doStat(o.lstat,n,e)}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function er(n,e,s){try{return e=ie.getStr(e),e=ie.calculateAt(n,e),e=ge.normalize(e),e[e.length-1]==="/"&&(e=e.substr(0,e.length-1)),o.mkdir(e,s,0),0}catch(r){if(typeof o>"u"||!(r instanceof o.ErrnoError))throw r;return-r.errno}}function tr(n,e,s,r){try{e=ie.getStr(e);var i=r&256,a=r&4096;return r=r&-6401,e=ie.calculateAt(n,e,a),ie.doStat(i?o.lstat:o.stat,e,s)}catch(p){if(typeof o>"u"||!(p instanceof o.ErrnoError))throw p;return-p.errno}}function nr(n,e,s,r){ie.varargs=r;try{e=ie.getStr(e),e=ie.calculateAt(n,e);var i=r?ie.get():0;return o.open(e,s,i).fd}catch(a){if(typeof o>"u"||!(a instanceof o.ErrnoError))throw a;return-a.errno}}function rr(n,e,s,r){try{if(e=ie.getStr(e),e=ie.calculateAt(n,e),r<=0)return-28;var i=o.readlink(e),a=Math.min(r,rt(i)),p=Re[s+a];return zt(i,s,r+1),Re[s+a]=p,a}catch(E){if(typeof o>"u"||!(E instanceof o.ErrnoError))throw E;return-E.errno}}function sr(n){try{return n=ie.getStr(n),o.rmdir(n),0}catch(e){if(typeof o>"u"||!(e instanceof o.ErrnoError))throw e;return-e.errno}}function ir(n,e){try{return n=ie.getStr(n),ie.doStat(o.stat,n,e)}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function or(n,e,s){try{return e=ie.getStr(e),e=ie.calculateAt(n,e),s===0?o.unlink(e):s===512?o.rmdir(e):Ze("Invalid flags passed to unlinkat"),0}catch(r){if(typeof o>"u"||!(r instanceof o.ErrnoError))throw r;return-r.errno}}function kt(n){return ke[n>>2]+_e[n+4>>2]*4294967296}function ar(n,e,s,r){try{if(e=ie.getStr(e),e=ie.calculateAt(n,e,!0),s){var p=kt(s),E=_e[s+8>>2];i=p*1e3+E/(1e3*1e3),s+=16,p=kt(s),E=_e[s+8>>2],a=p*1e3+E/(1e3*1e3)}else var i=Date.now(),a=i;return o.utime(e,i,a),0}catch(P){if(typeof o>"u"||!(P instanceof o.ErrnoError))throw P;return-P.errno}}var lr=!0;function cr(){return lr}function ur(n){return n%4===0&&(n%100!==0||n%400===0)}var _r=[0,31,60,91,121,152,182,213,244,274,305,335],fr=[0,31,59,90,120,151,181,212,243,273,304,334];function dr(n){var e=ur(n.getFullYear()),s=e?_r:fr,r=s[n.getMonth()]+n.getDate()-1;return r}function pr(n,e){var s=new Date(kt(n)*1e3);_e[e>>2]=s.getSeconds(),_e[e+4>>2]=s.getMinutes(),_e[e+8>>2]=s.getHours(),_e[e+12>>2]=s.getDate(),_e[e+16>>2]=s.getMonth(),_e[e+20>>2]=s.getFullYear()-1900,_e[e+24>>2]=s.getDay();var r=dr(s)|0;_e[e+28>>2]=r,_e[e+36>>2]=-(s.getTimezoneOffset()*60);var i=new Date(s.getFullYear(),0,1),a=new Date(s.getFullYear(),6,1).getTimezoneOffset(),p=i.getTimezoneOffset(),E=(a!=p&&s.getTimezoneOffset()==Math.min(p,a))|0;_e[e+32>>2]=E}function mr(n,e,s,r,i,a,p){try{var E=ie.getStreamFromFD(r),P=o.mmap(E,n,i,e,s),z=P.ptr;return _e[a>>2]=P.allocated,ke[p>>2]=z,0}catch(V){if(typeof o>"u"||!(V instanceof o.ErrnoError))throw V;return-V.errno}}function hr(n,e,s,r,i,a){try{var p=ie.getStreamFromFD(i);s&2&&ie.doMsync(n,p,e,r,a),o.munmap(p)}catch(E){if(typeof o>"u"||!(E instanceof o.ErrnoError))throw E;return-E.errno}}function Yt(n){var e=rt(n)+1,s=rn(e);return s&&dt(n,Re,s,e),s}function gr(n,e,s){var r=new Date().getFullYear(),i=new Date(r,0,1),a=new Date(r,6,1),p=i.getTimezoneOffset(),E=a.getTimezoneOffset(),P=Math.max(p,E);ke[n>>2]=P*60,_e[e>>2]=+(p!=E);function z(d){var b=d.toTimeString().match(/\(([A-Za-z ]+)\)$/);return b?b[1]:"GMT"}var V=z(i),te=z(a),k=Yt(V),_=Yt(te);E<p?(ke[s>>2]=k,ke[s+4>>2]=_):(ke[s>>2]=_,ke[s+4>>2]=k)}function yr(){return Date.now()}var Zt;Zt=()=>performance.now();function br(){return 2147483648}function qr(n){var e=He.buffer;try{return He.grow(n-e.byteLength+65535>>>16),Wt(),1}catch{}}function wr(n){var e=Ye.length;n=n>>>0;var s=br();if(n>s)return!1;let r=(P,z)=>P+(z-P%z)%z;for(var i=1;i<=4;i*=2){var a=e*(1+.2/i);a=Math.min(a,n+100663296);var p=Math.min(s,r(Math.max(n,a),65536)),E=qr(p);if(E)return!0}return!1}var Tt={};function Er(){return xe||"./this.program"}function it(){if(!it.strings){var n=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:n,_:Er()};for(var s in Tt)Tt[s]===void 0?delete e[s]:e[s]=Tt[s];var r=[];for(var s in e)r.push(s+"="+e[s]);it.strings=r}return it.strings}function vr(n,e,s){for(var r=0;r<n.length;++r)Re[e++>>0]=n.charCodeAt(r);s||(Re[e>>0]=0)}function Sr(n,e){var s=0;return it().forEach(function(r,i){var a=e+s;ke[n+i*4>>2]=a,vr(r,a),s+=r.length+1}),0}function xr(n,e){var s=it();ke[n>>2]=s.length;var r=0;return s.forEach(function(i){r+=i.length+1}),ke[e>>2]=r,0}function Ar(n){try{var e=ie.getStreamFromFD(n);return o.close(e),0}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return s.errno}}function Ir(n,e){try{var s=ie.getStreamFromFD(n),r=s.tty?2:o.isDir(s.mode)?3:o.isLink(s.mode)?7:4;return Re[e>>0]=r,0}catch(i){if(typeof o>"u"||!(i instanceof o.ErrnoError))throw i;return i.errno}}function kr(n,e,s,r){for(var i=0,a=0;a<s;a++){var p=ke[e>>2],E=ke[e+4>>2];e+=8;var P=o.read(n,Re,p,E,r);if(P<0)return-1;if(i+=P,P<E)break;typeof r<"u"&&(r+=P)}return i}function Tr(n,e,s,r){try{var i=ie.getStreamFromFD(n),a=kr(i,e,s);return ke[r>>2]=a,0}catch(p){if(typeof o>"u"||!(p instanceof o.ErrnoError))throw p;return p.errno}}function Fr(n,e,s,r){try{if(e=Xt(e),isNaN(e))return 61;var i=ie.getStreamFromFD(n);return o.llseek(i,e,s),Pe=[i.position>>>0,(de=i.position,+Math.abs(de)>=1?de>0?(Math.min(+Math.floor(de/4294967296),4294967295)|0)>>>0:~~+Math.ceil((de-+(~~de>>>0))/4294967296)>>>0:0)],_e[r>>2]=Pe[0],_e[r+4>>2]=Pe[1],i.getdents&&e===0&&s===0&&(i.getdents=null),0}catch(a){if(typeof o>"u"||!(a instanceof o.ErrnoError))throw a;return a.errno}}function Or(n){try{var e=ie.getStreamFromFD(n);return e.stream_ops&&e.stream_ops.fsync?e.stream_ops.fsync(e):0}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return s.errno}}function Pr(n,e,s,r){for(var i=0,a=0;a<s;a++){var p=ke[e>>2],E=ke[e+4>>2];e+=8;var P=o.write(n,Re,p,E,r);if(P<0)return-1;i+=P,typeof r<"u"&&(r+=P)}return i}function Lr(n,e,s,r){try{var i=ie.getStreamFromFD(n),a=Pr(i,e,s);return ke[r>>2]=a,0}catch(p){if(typeof o>"u"||!(p instanceof o.ErrnoError))throw p;return p.errno}}var en=function(n,e,s,r){n||(n=this),this.parent=n,this.mount=n.mount,this.mounted=null,this.id=o.nextInode++,this.name=e,this.mode=s,this.node_ops={},this.stream_ops={},this.rdev=r},mt=365,ht=146;Object.defineProperties(en.prototype,{read:{get:function(){return(this.mode&mt)===mt},set:function(n){n?this.mode|=mt:this.mode&=~mt}},write:{get:function(){return(this.mode&ht)===ht},set:function(n){n?this.mode|=ht:this.mode&=~ht}},isFolder:{get:function(){return o.isDir(this.mode)}},isDevice:{get:function(){return o.isChrdev(this.mode)}}}),o.FSNode=en,o.staticInit();var tn={__syscall_chmod:zn,__syscall_faccessat:Un,__syscall_fchmod:Wn,__syscall_fchown32:Qn,__syscall_fcntl64:Vn,__syscall_fstat64:Gn,__syscall_ftruncate64:Jn,__syscall_getcwd:Xn,__syscall_ioctl:Yn,__syscall_lstat64:Zn,__syscall_mkdirat:er,__syscall_newfstatat:tr,__syscall_openat:nr,__syscall_readlinkat:rr,__syscall_rmdir:sr,__syscall_stat64:ir,__syscall_unlinkat:or,__syscall_utimensat:ar,_emscripten_get_now_is_monotonic:cr,_localtime_js:pr,_mmap_js:mr,_munmap_js:hr,_tzset_js:gr,emscripten_date_now:yr,emscripten_get_now:Zt,emscripten_resize_heap:wr,environ_get:Sr,environ_sizes_get:xr,fd_close:Ar,fd_fdstat_get:Ir,fd_read:Tr,fd_seek:Fr,fd_sync:Or,fd_write:Lr,memory:He};Rn(),t.___wasm_call_ctors=function(){return(t.___wasm_call_ctors=t.asm.__wasm_call_ctors).apply(null,arguments)},t._sqlite3_status64=function(){return(t._sqlite3_status64=t.asm.sqlite3_status64).apply(null,arguments)},t._sqlite3_status=function(){return(t._sqlite3_status=t.asm.sqlite3_status).apply(null,arguments)},t._sqlite3_db_status=function(){return(t._sqlite3_db_status=t.asm.sqlite3_db_status).apply(null,arguments)},t._sqlite3_msize=function(){return(t._sqlite3_msize=t.asm.sqlite3_msize).apply(null,arguments)},t._sqlite3_vfs_find=function(){return(t._sqlite3_vfs_find=t.asm.sqlite3_vfs_find).apply(null,arguments)},t._sqlite3_initialize=function(){return(t._sqlite3_initialize=t.asm.sqlite3_initialize).apply(null,arguments)},t._sqlite3_malloc=function(){return(t._sqlite3_malloc=t.asm.sqlite3_malloc).apply(null,arguments)},t._sqlite3_free=function(){return(t._sqlite3_free=t.asm.sqlite3_free).apply(null,arguments)},t._sqlite3_vfs_register=function(){return(t._sqlite3_vfs_register=t.asm.sqlite3_vfs_register).apply(null,arguments)},t._sqlite3_vfs_unregister=function(){return(t._sqlite3_vfs_unregister=t.asm.sqlite3_vfs_unregister).apply(null,arguments)},t._sqlite3_malloc64=function(){return(t._sqlite3_malloc64=t.asm.sqlite3_malloc64).apply(null,arguments)},t._sqlite3_realloc=function(){return(t._sqlite3_realloc=t.asm.sqlite3_realloc).apply(null,arguments)},t._sqlite3_realloc64=function(){return(t._sqlite3_realloc64=t.asm.sqlite3_realloc64).apply(null,arguments)},t._sqlite3_value_text=function(){return(t._sqlite3_value_text=t.asm.sqlite3_value_text).apply(null,arguments)},t._sqlite3_randomness=function(){return(t._sqlite3_randomness=t.asm.sqlite3_randomness).apply(null,arguments)},t._sqlite3_stricmp=function(){return(t._sqlite3_stricmp=t.asm.sqlite3_stricmp).apply(null,arguments)},t._sqlite3_strnicmp=function(){return(t._sqlite3_strnicmp=t.asm.sqlite3_strnicmp).apply(null,arguments)},t._sqlite3_uri_parameter=function(){return(t._sqlite3_uri_parameter=t.asm.sqlite3_uri_parameter).apply(null,arguments)};var nn=t.___errno_location=function(){return(nn=t.___errno_location=t.asm.__errno_location).apply(null,arguments)};t._sqlite3_uri_boolean=function(){return(t._sqlite3_uri_boolean=t.asm.sqlite3_uri_boolean).apply(null,arguments)},t._sqlite3_serialize=function(){return(t._sqlite3_serialize=t.asm.sqlite3_serialize).apply(null,arguments)},t._sqlite3_prepare_v2=function(){return(t._sqlite3_prepare_v2=t.asm.sqlite3_prepare_v2).apply(null,arguments)},t._sqlite3_step=function(){return(t._sqlite3_step=t.asm.sqlite3_step).apply(null,arguments)},t._sqlite3_column_int64=function(){return(t._sqlite3_column_int64=t.asm.sqlite3_column_int64).apply(null,arguments)},t._sqlite3_reset=function(){return(t._sqlite3_reset=t.asm.sqlite3_reset).apply(null,arguments)},t._sqlite3_exec=function(){return(t._sqlite3_exec=t.asm.sqlite3_exec).apply(null,arguments)},t._sqlite3_column_int=function(){return(t._sqlite3_column_int=t.asm.sqlite3_column_int).apply(null,arguments)},t._sqlite3_finalize=function(){return(t._sqlite3_finalize=t.asm.sqlite3_finalize).apply(null,arguments)},t._sqlite3_file_control=function(){return(t._sqlite3_file_control=t.asm.sqlite3_file_control).apply(null,arguments)},t._sqlite3_column_name=function(){return(t._sqlite3_column_name=t.asm.sqlite3_column_name).apply(null,arguments)},t._sqlite3_column_text=function(){return(t._sqlite3_column_text=t.asm.sqlite3_column_text).apply(null,arguments)},t._sqlite3_column_type=function(){return(t._sqlite3_column_type=t.asm.sqlite3_column_type).apply(null,arguments)},t._sqlite3_errmsg=function(){return(t._sqlite3_errmsg=t.asm.sqlite3_errmsg).apply(null,arguments)},t._sqlite3_deserialize=function(){return(t._sqlite3_deserialize=t.asm.sqlite3_deserialize).apply(null,arguments)},t._sqlite3_clear_bindings=function(){return(t._sqlite3_clear_bindings=t.asm.sqlite3_clear_bindings).apply(null,arguments)},t._sqlite3_value_blob=function(){return(t._sqlite3_value_blob=t.asm.sqlite3_value_blob).apply(null,arguments)},t._sqlite3_value_bytes=function(){return(t._sqlite3_value_bytes=t.asm.sqlite3_value_bytes).apply(null,arguments)},t._sqlite3_value_double=function(){return(t._sqlite3_value_double=t.asm.sqlite3_value_double).apply(null,arguments)},t._sqlite3_value_int=function(){return(t._sqlite3_value_int=t.asm.sqlite3_value_int).apply(null,arguments)},t._sqlite3_value_int64=function(){return(t._sqlite3_value_int64=t.asm.sqlite3_value_int64).apply(null,arguments)},t._sqlite3_value_subtype=function(){return(t._sqlite3_value_subtype=t.asm.sqlite3_value_subtype).apply(null,arguments)},t._sqlite3_value_pointer=function(){return(t._sqlite3_value_pointer=t.asm.sqlite3_value_pointer).apply(null,arguments)},t._sqlite3_value_type=function(){return(t._sqlite3_value_type=t.asm.sqlite3_value_type).apply(null,arguments)},t._sqlite3_value_nochange=function(){return(t._sqlite3_value_nochange=t.asm.sqlite3_value_nochange).apply(null,arguments)},t._sqlite3_value_frombind=function(){return(t._sqlite3_value_frombind=t.asm.sqlite3_value_frombind).apply(null,arguments)},t._sqlite3_value_dup=function(){return(t._sqlite3_value_dup=t.asm.sqlite3_value_dup).apply(null,arguments)},t._sqlite3_value_free=function(){return(t._sqlite3_value_free=t.asm.sqlite3_value_free).apply(null,arguments)},t._sqlite3_result_blob=function(){return(t._sqlite3_result_blob=t.asm.sqlite3_result_blob).apply(null,arguments)},t._sqlite3_result_error_toobig=function(){return(t._sqlite3_result_error_toobig=t.asm.sqlite3_result_error_toobig).apply(null,arguments)},t._sqlite3_result_error_nomem=function(){return(t._sqlite3_result_error_nomem=t.asm.sqlite3_result_error_nomem).apply(null,arguments)},t._sqlite3_result_double=function(){return(t._sqlite3_result_double=t.asm.sqlite3_result_double).apply(null,arguments)},t._sqlite3_result_error=function(){return(t._sqlite3_result_error=t.asm.sqlite3_result_error).apply(null,arguments)},t._sqlite3_result_int=function(){return(t._sqlite3_result_int=t.asm.sqlite3_result_int).apply(null,arguments)},t._sqlite3_result_int64=function(){return(t._sqlite3_result_int64=t.asm.sqlite3_result_int64).apply(null,arguments)},t._sqlite3_result_null=function(){return(t._sqlite3_result_null=t.asm.sqlite3_result_null).apply(null,arguments)},t._sqlite3_result_pointer=function(){return(t._sqlite3_result_pointer=t.asm.sqlite3_result_pointer).apply(null,arguments)},t._sqlite3_result_subtype=function(){return(t._sqlite3_result_subtype=t.asm.sqlite3_result_subtype).apply(null,arguments)},t._sqlite3_result_text=function(){return(t._sqlite3_result_text=t.asm.sqlite3_result_text).apply(null,arguments)},t._sqlite3_result_zeroblob=function(){return(t._sqlite3_result_zeroblob=t.asm.sqlite3_result_zeroblob).apply(null,arguments)},t._sqlite3_result_zeroblob64=function(){return(t._sqlite3_result_zeroblob64=t.asm.sqlite3_result_zeroblob64).apply(null,arguments)},t._sqlite3_result_error_code=function(){return(t._sqlite3_result_error_code=t.asm.sqlite3_result_error_code).apply(null,arguments)},t._sqlite3_user_data=function(){return(t._sqlite3_user_data=t.asm.sqlite3_user_data).apply(null,arguments)},t._sqlite3_context_db_handle=function(){return(t._sqlite3_context_db_handle=t.asm.sqlite3_context_db_handle).apply(null,arguments)},t._sqlite3_vtab_nochange=function(){return(t._sqlite3_vtab_nochange=t.asm.sqlite3_vtab_nochange).apply(null,arguments)},t._sqlite3_vtab_in_first=function(){return(t._sqlite3_vtab_in_first=t.asm.sqlite3_vtab_in_first).apply(null,arguments)},t._sqlite3_vtab_in_next=function(){return(t._sqlite3_vtab_in_next=t.asm.sqlite3_vtab_in_next).apply(null,arguments)},t._sqlite3_aggregate_context=function(){return(t._sqlite3_aggregate_context=t.asm.sqlite3_aggregate_context).apply(null,arguments)},t._sqlite3_get_auxdata=function(){return(t._sqlite3_get_auxdata=t.asm.sqlite3_get_auxdata).apply(null,arguments)},t._sqlite3_set_auxdata=function(){return(t._sqlite3_set_auxdata=t.asm.sqlite3_set_auxdata).apply(null,arguments)},t._sqlite3_column_count=function(){return(t._sqlite3_column_count=t.asm.sqlite3_column_count).apply(null,arguments)},t._sqlite3_data_count=function(){return(t._sqlite3_data_count=t.asm.sqlite3_data_count).apply(null,arguments)},t._sqlite3_column_blob=function(){return(t._sqlite3_column_blob=t.asm.sqlite3_column_blob).apply(null,arguments)},t._sqlite3_column_bytes=function(){return(t._sqlite3_column_bytes=t.asm.sqlite3_column_bytes).apply(null,arguments)},t._sqlite3_column_double=function(){return(t._sqlite3_column_double=t.asm.sqlite3_column_double).apply(null,arguments)},t._sqlite3_column_value=function(){return(t._sqlite3_column_value=t.asm.sqlite3_column_value).apply(null,arguments)},t._sqlite3_bind_blob=function(){return(t._sqlite3_bind_blob=t.asm.sqlite3_bind_blob).apply(null,arguments)},t._sqlite3_bind_double=function(){return(t._sqlite3_bind_double=t.asm.sqlite3_bind_double).apply(null,arguments)},t._sqlite3_bind_int=function(){return(t._sqlite3_bind_int=t.asm.sqlite3_bind_int).apply(null,arguments)},t._sqlite3_bind_int64=function(){return(t._sqlite3_bind_int64=t.asm.sqlite3_bind_int64).apply(null,arguments)},t._sqlite3_bind_null=function(){return(t._sqlite3_bind_null=t.asm.sqlite3_bind_null).apply(null,arguments)},t._sqlite3_bind_pointer=function(){return(t._sqlite3_bind_pointer=t.asm.sqlite3_bind_pointer).apply(null,arguments)},t._sqlite3_bind_text=function(){return(t._sqlite3_bind_text=t.asm.sqlite3_bind_text).apply(null,arguments)},t._sqlite3_bind_parameter_count=function(){return(t._sqlite3_bind_parameter_count=t.asm.sqlite3_bind_parameter_count).apply(null,arguments)},t._sqlite3_bind_parameter_index=function(){return(t._sqlite3_bind_parameter_index=t.asm.sqlite3_bind_parameter_index).apply(null,arguments)},t._sqlite3_db_handle=function(){return(t._sqlite3_db_handle=t.asm.sqlite3_db_handle).apply(null,arguments)},t._sqlite3_stmt_readonly=function(){return(t._sqlite3_stmt_readonly=t.asm.sqlite3_stmt_readonly).apply(null,arguments)},t._sqlite3_stmt_isexplain=function(){return(t._sqlite3_stmt_isexplain=t.asm.sqlite3_stmt_isexplain).apply(null,arguments)},t._sqlite3_stmt_status=function(){return(t._sqlite3_stmt_status=t.asm.sqlite3_stmt_status).apply(null,arguments)},t._sqlite3_sql=function(){return(t._sqlite3_sql=t.asm.sqlite3_sql).apply(null,arguments)},t._sqlite3_expanded_sql=function(){return(t._sqlite3_expanded_sql=t.asm.sqlite3_expanded_sql).apply(null,arguments)},t._sqlite3_preupdate_old=function(){return(t._sqlite3_preupdate_old=t.asm.sqlite3_preupdate_old).apply(null,arguments)},t._sqlite3_preupdate_count=function(){return(t._sqlite3_preupdate_count=t.asm.sqlite3_preupdate_count).apply(null,arguments)},t._sqlite3_preupdate_depth=function(){return(t._sqlite3_preupdate_depth=t.asm.sqlite3_preupdate_depth).apply(null,arguments)},t._sqlite3_preupdate_blobwrite=function(){return(t._sqlite3_preupdate_blobwrite=t.asm.sqlite3_preupdate_blobwrite).apply(null,arguments)},t._sqlite3_preupdate_new=function(){return(t._sqlite3_preupdate_new=t.asm.sqlite3_preupdate_new).apply(null,arguments)},t._sqlite3_value_numeric_type=function(){return(t._sqlite3_value_numeric_type=t.asm.sqlite3_value_numeric_type).apply(null,arguments)},t._sqlite3_set_authorizer=function(){return(t._sqlite3_set_authorizer=t.asm.sqlite3_set_authorizer).apply(null,arguments)},t._sqlite3_strglob=function(){return(t._sqlite3_strglob=t.asm.sqlite3_strglob).apply(null,arguments)},t._sqlite3_strlike=function(){return(t._sqlite3_strlike=t.asm.sqlite3_strlike).apply(null,arguments)},t._sqlite3_auto_extension=function(){return(t._sqlite3_auto_extension=t.asm.sqlite3_auto_extension).apply(null,arguments)},t._sqlite3_cancel_auto_extension=function(){return(t._sqlite3_cancel_auto_extension=t.asm.sqlite3_cancel_auto_extension).apply(null,arguments)},t._sqlite3_reset_auto_extension=function(){return(t._sqlite3_reset_auto_extension=t.asm.sqlite3_reset_auto_extension).apply(null,arguments)},t._sqlite3_prepare_v3=function(){return(t._sqlite3_prepare_v3=t.asm.sqlite3_prepare_v3).apply(null,arguments)},t._sqlite3_create_module=function(){return(t._sqlite3_create_module=t.asm.sqlite3_create_module).apply(null,arguments)},t._sqlite3_create_module_v2=function(){return(t._sqlite3_create_module_v2=t.asm.sqlite3_create_module_v2).apply(null,arguments)},t._sqlite3_drop_modules=function(){return(t._sqlite3_drop_modules=t.asm.sqlite3_drop_modules).apply(null,arguments)},t._sqlite3_declare_vtab=function(){return(t._sqlite3_declare_vtab=t.asm.sqlite3_declare_vtab).apply(null,arguments)},t._sqlite3_vtab_on_conflict=function(){return(t._sqlite3_vtab_on_conflict=t.asm.sqlite3_vtab_on_conflict).apply(null,arguments)},t._sqlite3_vtab_collation=function(){return(t._sqlite3_vtab_collation=t.asm.sqlite3_vtab_collation).apply(null,arguments)},t._sqlite3_vtab_in=function(){return(t._sqlite3_vtab_in=t.asm.sqlite3_vtab_in).apply(null,arguments)},t._sqlite3_vtab_rhs_value=function(){return(t._sqlite3_vtab_rhs_value=t.asm.sqlite3_vtab_rhs_value).apply(null,arguments)},t._sqlite3_vtab_distinct=function(){return(t._sqlite3_vtab_distinct=t.asm.sqlite3_vtab_distinct).apply(null,arguments)},t._sqlite3_keyword_name=function(){return(t._sqlite3_keyword_name=t.asm.sqlite3_keyword_name).apply(null,arguments)},t._sqlite3_keyword_count=function(){return(t._sqlite3_keyword_count=t.asm.sqlite3_keyword_count).apply(null,arguments)},t._sqlite3_keyword_check=function(){return(t._sqlite3_keyword_check=t.asm.sqlite3_keyword_check).apply(null,arguments)},t._sqlite3_complete=function(){return(t._sqlite3_complete=t.asm.sqlite3_complete).apply(null,arguments)},t._sqlite3_libversion=function(){return(t._sqlite3_libversion=t.asm.sqlite3_libversion).apply(null,arguments)},t._sqlite3_libversion_number=function(){return(t._sqlite3_libversion_number=t.asm.sqlite3_libversion_number).apply(null,arguments)},t._sqlite3_shutdown=function(){return(t._sqlite3_shutdown=t.asm.sqlite3_shutdown).apply(null,arguments)},t._sqlite3_last_insert_rowid=function(){return(t._sqlite3_last_insert_rowid=t.asm.sqlite3_last_insert_rowid).apply(null,arguments)},t._sqlite3_set_last_insert_rowid=function(){return(t._sqlite3_set_last_insert_rowid=t.asm.sqlite3_set_last_insert_rowid).apply(null,arguments)},t._sqlite3_changes64=function(){return(t._sqlite3_changes64=t.asm.sqlite3_changes64).apply(null,arguments)},t._sqlite3_changes=function(){return(t._sqlite3_changes=t.asm.sqlite3_changes).apply(null,arguments)},t._sqlite3_total_changes64=function(){return(t._sqlite3_total_changes64=t.asm.sqlite3_total_changes64).apply(null,arguments)},t._sqlite3_total_changes=function(){return(t._sqlite3_total_changes=t.asm.sqlite3_total_changes).apply(null,arguments)},t._sqlite3_txn_state=function(){return(t._sqlite3_txn_state=t.asm.sqlite3_txn_state).apply(null,arguments)},t._sqlite3_close_v2=function(){return(t._sqlite3_close_v2=t.asm.sqlite3_close_v2).apply(null,arguments)},t._sqlite3_busy_handler=function(){return(t._sqlite3_busy_handler=t.asm.sqlite3_busy_handler).apply(null,arguments)},t._sqlite3_progress_handler=function(){return(t._sqlite3_progress_handler=t.asm.sqlite3_progress_handler).apply(null,arguments)},t._sqlite3_busy_timeout=function(){return(t._sqlite3_busy_timeout=t.asm.sqlite3_busy_timeout).apply(null,arguments)},t._sqlite3_create_function=function(){return(t._sqlite3_create_function=t.asm.sqlite3_create_function).apply(null,arguments)},t._sqlite3_create_function_v2=function(){return(t._sqlite3_create_function_v2=t.asm.sqlite3_create_function_v2).apply(null,arguments)},t._sqlite3_create_window_function=function(){return(t._sqlite3_create_window_function=t.asm.sqlite3_create_window_function).apply(null,arguments)},t._sqlite3_overload_function=function(){return(t._sqlite3_overload_function=t.asm.sqlite3_overload_function).apply(null,arguments)},t._sqlite3_trace_v2=function(){return(t._sqlite3_trace_v2=t.asm.sqlite3_trace_v2).apply(null,arguments)},t._sqlite3_commit_hook=function(){return(t._sqlite3_commit_hook=t.asm.sqlite3_commit_hook).apply(null,arguments)},t._sqlite3_update_hook=function(){return(t._sqlite3_update_hook=t.asm.sqlite3_update_hook).apply(null,arguments)},t._sqlite3_rollback_hook=function(){return(t._sqlite3_rollback_hook=t.asm.sqlite3_rollback_hook).apply(null,arguments)},t._sqlite3_preupdate_hook=function(){return(t._sqlite3_preupdate_hook=t.asm.sqlite3_preupdate_hook).apply(null,arguments)},t._sqlite3_error_offset=function(){return(t._sqlite3_error_offset=t.asm.sqlite3_error_offset).apply(null,arguments)},t._sqlite3_errcode=function(){return(t._sqlite3_errcode=t.asm.sqlite3_errcode).apply(null,arguments)},t._sqlite3_extended_errcode=function(){return(t._sqlite3_extended_errcode=t.asm.sqlite3_extended_errcode).apply(null,arguments)},t._sqlite3_errstr=function(){return(t._sqlite3_errstr=t.asm.sqlite3_errstr).apply(null,arguments)},t._sqlite3_limit=function(){return(t._sqlite3_limit=t.asm.sqlite3_limit).apply(null,arguments)},t._sqlite3_open=function(){return(t._sqlite3_open=t.asm.sqlite3_open).apply(null,arguments)},t._sqlite3_open_v2=function(){return(t._sqlite3_open_v2=t.asm.sqlite3_open_v2).apply(null,arguments)},t._sqlite3_create_collation=function(){return(t._sqlite3_create_collation=t.asm.sqlite3_create_collation).apply(null,arguments)},t._sqlite3_create_collation_v2=function(){return(t._sqlite3_create_collation_v2=t.asm.sqlite3_create_collation_v2).apply(null,arguments)},t._sqlite3_collation_needed=function(){return(t._sqlite3_collation_needed=t.asm.sqlite3_collation_needed).apply(null,arguments)},t._sqlite3_get_autocommit=function(){return(t._sqlite3_get_autocommit=t.asm.sqlite3_get_autocommit).apply(null,arguments)},t._sqlite3_table_column_metadata=function(){return(t._sqlite3_table_column_metadata=t.asm.sqlite3_table_column_metadata).apply(null,arguments)},t._sqlite3_extended_result_codes=function(){return(t._sqlite3_extended_result_codes=t.asm.sqlite3_extended_result_codes).apply(null,arguments)},t._sqlite3_uri_key=function(){return(t._sqlite3_uri_key=t.asm.sqlite3_uri_key).apply(null,arguments)},t._sqlite3_uri_int64=function(){return(t._sqlite3_uri_int64=t.asm.sqlite3_uri_int64).apply(null,arguments)},t._sqlite3_db_name=function(){return(t._sqlite3_db_name=t.asm.sqlite3_db_name).apply(null,arguments)},t._sqlite3_db_filename=function(){return(t._sqlite3_db_filename=t.asm.sqlite3_db_filename).apply(null,arguments)},t._sqlite3_compileoption_used=function(){return(t._sqlite3_compileoption_used=t.asm.sqlite3_compileoption_used).apply(null,arguments)},t._sqlite3_compileoption_get=function(){return(t._sqlite3_compileoption_get=t.asm.sqlite3_compileoption_get).apply(null,arguments)},t._sqlite3session_diff=function(){return(t._sqlite3session_diff=t.asm.sqlite3session_diff).apply(null,arguments)},t._sqlite3session_attach=function(){return(t._sqlite3session_attach=t.asm.sqlite3session_attach).apply(null,arguments)},t._sqlite3session_create=function(){return(t._sqlite3session_create=t.asm.sqlite3session_create).apply(null,arguments)},t._sqlite3session_delete=function(){return(t._sqlite3session_delete=t.asm.sqlite3session_delete).apply(null,arguments)},t._sqlite3session_table_filter=function(){return(t._sqlite3session_table_filter=t.asm.sqlite3session_table_filter).apply(null,arguments)},t._sqlite3session_changeset=function(){return(t._sqlite3session_changeset=t.asm.sqlite3session_changeset).apply(null,arguments)},t._sqlite3session_changeset_strm=function(){return(t._sqlite3session_changeset_strm=t.asm.sqlite3session_changeset_strm).apply(null,arguments)},t._sqlite3session_patchset_strm=function(){return(t._sqlite3session_patchset_strm=t.asm.sqlite3session_patchset_strm).apply(null,arguments)},t._sqlite3session_patchset=function(){return(t._sqlite3session_patchset=t.asm.sqlite3session_patchset).apply(null,arguments)},t._sqlite3session_enable=function(){return(t._sqlite3session_enable=t.asm.sqlite3session_enable).apply(null,arguments)},t._sqlite3session_indirect=function(){return(t._sqlite3session_indirect=t.asm.sqlite3session_indirect).apply(null,arguments)},t._sqlite3session_isempty=function(){return(t._sqlite3session_isempty=t.asm.sqlite3session_isempty).apply(null,arguments)},t._sqlite3session_memory_used=function(){return(t._sqlite3session_memory_used=t.asm.sqlite3session_memory_used).apply(null,arguments)},t._sqlite3session_object_config=function(){return(t._sqlite3session_object_config=t.asm.sqlite3session_object_config).apply(null,arguments)},t._sqlite3session_changeset_size=function(){return(t._sqlite3session_changeset_size=t.asm.sqlite3session_changeset_size).apply(null,arguments)},t._sqlite3changeset_start=function(){return(t._sqlite3changeset_start=t.asm.sqlite3changeset_start).apply(null,arguments)},t._sqlite3changeset_start_v2=function(){return(t._sqlite3changeset_start_v2=t.asm.sqlite3changeset_start_v2).apply(null,arguments)},t._sqlite3changeset_start_strm=function(){return(t._sqlite3changeset_start_strm=t.asm.sqlite3changeset_start_strm).apply(null,arguments)},t._sqlite3changeset_start_v2_strm=function(){return(t._sqlite3changeset_start_v2_strm=t.asm.sqlite3changeset_start_v2_strm).apply(null,arguments)},t._sqlite3changeset_next=function(){return(t._sqlite3changeset_next=t.asm.sqlite3changeset_next).apply(null,arguments)},t._sqlite3changeset_op=function(){return(t._sqlite3changeset_op=t.asm.sqlite3changeset_op).apply(null,arguments)},t._sqlite3changeset_pk=function(){return(t._sqlite3changeset_pk=t.asm.sqlite3changeset_pk).apply(null,arguments)},t._sqlite3changeset_old=function(){return(t._sqlite3changeset_old=t.asm.sqlite3changeset_old).apply(null,arguments)},t._sqlite3changeset_new=function(){return(t._sqlite3changeset_new=t.asm.sqlite3changeset_new).apply(null,arguments)},t._sqlite3changeset_conflict=function(){return(t._sqlite3changeset_conflict=t.asm.sqlite3changeset_conflict).apply(null,arguments)},t._sqlite3changeset_fk_conflicts=function(){return(t._sqlite3changeset_fk_conflicts=t.asm.sqlite3changeset_fk_conflicts).apply(null,arguments)},t._sqlite3changeset_finalize=function(){return(t._sqlite3changeset_finalize=t.asm.sqlite3changeset_finalize).apply(null,arguments)},t._sqlite3changeset_invert=function(){return(t._sqlite3changeset_invert=t.asm.sqlite3changeset_invert).apply(null,arguments)},t._sqlite3changeset_invert_strm=function(){return(t._sqlite3changeset_invert_strm=t.asm.sqlite3changeset_invert_strm).apply(null,arguments)},t._sqlite3changeset_apply_v2=function(){return(t._sqlite3changeset_apply_v2=t.asm.sqlite3changeset_apply_v2).apply(null,arguments)},t._sqlite3changeset_apply=function(){return(t._sqlite3changeset_apply=t.asm.sqlite3changeset_apply).apply(null,arguments)},t._sqlite3changeset_apply_v2_strm=function(){return(t._sqlite3changeset_apply_v2_strm=t.asm.sqlite3changeset_apply_v2_strm).apply(null,arguments)},t._sqlite3changeset_apply_strm=function(){return(t._sqlite3changeset_apply_strm=t.asm.sqlite3changeset_apply_strm).apply(null,arguments)},t._sqlite3changegroup_new=function(){return(t._sqlite3changegroup_new=t.asm.sqlite3changegroup_new).apply(null,arguments)},t._sqlite3changegroup_add=function(){return(t._sqlite3changegroup_add=t.asm.sqlite3changegroup_add).apply(null,arguments)},t._sqlite3changegroup_output=function(){return(t._sqlite3changegroup_output=t.asm.sqlite3changegroup_output).apply(null,arguments)},t._sqlite3changegroup_add_strm=function(){return(t._sqlite3changegroup_add_strm=t.asm.sqlite3changegroup_add_strm).apply(null,arguments)},t._sqlite3changegroup_output_strm=function(){return(t._sqlite3changegroup_output_strm=t.asm.sqlite3changegroup_output_strm).apply(null,arguments)},t._sqlite3changegroup_delete=function(){return(t._sqlite3changegroup_delete=t.asm.sqlite3changegroup_delete).apply(null,arguments)},t._sqlite3changeset_concat=function(){return(t._sqlite3changeset_concat=t.asm.sqlite3changeset_concat).apply(null,arguments)},t._sqlite3changeset_concat_strm=function(){return(t._sqlite3changeset_concat_strm=t.asm.sqlite3changeset_concat_strm).apply(null,arguments)},t._sqlite3session_config=function(){return(t._sqlite3session_config=t.asm.sqlite3session_config).apply(null,arguments)},t._sqlite3_sourceid=function(){return(t._sqlite3_sourceid=t.asm.sqlite3_sourceid).apply(null,arguments)},t._sqlite3_wasm_pstack_ptr=function(){return(t._sqlite3_wasm_pstack_ptr=t.asm.sqlite3_wasm_pstack_ptr).apply(null,arguments)},t._sqlite3_wasm_pstack_restore=function(){return(t._sqlite3_wasm_pstack_restore=t.asm.sqlite3_wasm_pstack_restore).apply(null,arguments)},t._sqlite3_wasm_pstack_alloc=function(){return(t._sqlite3_wasm_pstack_alloc=t.asm.sqlite3_wasm_pstack_alloc).apply(null,arguments)},t._sqlite3_wasm_pstack_remaining=function(){return(t._sqlite3_wasm_pstack_remaining=t.asm.sqlite3_wasm_pstack_remaining).apply(null,arguments)},t._sqlite3_wasm_pstack_quota=function(){return(t._sqlite3_wasm_pstack_quota=t.asm.sqlite3_wasm_pstack_quota).apply(null,arguments)},t._sqlite3_wasm_db_error=function(){return(t._sqlite3_wasm_db_error=t.asm.sqlite3_wasm_db_error).apply(null,arguments)},t._sqlite3_wasm_test_struct=function(){return(t._sqlite3_wasm_test_struct=t.asm.sqlite3_wasm_test_struct).apply(null,arguments)},t._sqlite3_wasm_enum_json=function(){return(t._sqlite3_wasm_enum_json=t.asm.sqlite3_wasm_enum_json).apply(null,arguments)},t._sqlite3_wasm_vfs_unlink=function(){return(t._sqlite3_wasm_vfs_unlink=t.asm.sqlite3_wasm_vfs_unlink).apply(null,arguments)},t._sqlite3_wasm_db_vfs=function(){return(t._sqlite3_wasm_db_vfs=t.asm.sqlite3_wasm_db_vfs).apply(null,arguments)},t._sqlite3_wasm_db_reset=function(){return(t._sqlite3_wasm_db_reset=t.asm.sqlite3_wasm_db_reset).apply(null,arguments)},t._sqlite3_wasm_db_export_chunked=function(){return(t._sqlite3_wasm_db_export_chunked=t.asm.sqlite3_wasm_db_export_chunked).apply(null,arguments)},t._sqlite3_wasm_db_serialize=function(){return(t._sqlite3_wasm_db_serialize=t.asm.sqlite3_wasm_db_serialize).apply(null,arguments)},t._sqlite3_wasm_vfs_create_file=function(){return(t._sqlite3_wasm_vfs_create_file=t.asm.sqlite3_wasm_vfs_create_file).apply(null,arguments)},t._sqlite3_wasm_posix_create_file=function(){return(t._sqlite3_wasm_posix_create_file=t.asm.sqlite3_wasm_posix_create_file).apply(null,arguments)},t._sqlite3_wasm_kvvfsMakeKeyOnPstack=function(){return(t._sqlite3_wasm_kvvfsMakeKeyOnPstack=t.asm.sqlite3_wasm_kvvfsMakeKeyOnPstack).apply(null,arguments)},t._sqlite3_wasm_kvvfs_methods=function(){return(t._sqlite3_wasm_kvvfs_methods=t.asm.sqlite3_wasm_kvvfs_methods).apply(null,arguments)},t._sqlite3_wasm_vtab_config=function(){return(t._sqlite3_wasm_vtab_config=t.asm.sqlite3_wasm_vtab_config).apply(null,arguments)},t._sqlite3_wasm_db_config_ip=function(){return(t._sqlite3_wasm_db_config_ip=t.asm.sqlite3_wasm_db_config_ip).apply(null,arguments)},t._sqlite3_wasm_db_config_pii=function(){return(t._sqlite3_wasm_db_config_pii=t.asm.sqlite3_wasm_db_config_pii).apply(null,arguments)},t._sqlite3_wasm_db_config_s=function(){return(t._sqlite3_wasm_db_config_s=t.asm.sqlite3_wasm_db_config_s).apply(null,arguments)},t._sqlite3_wasm_config_i=function(){return(t._sqlite3_wasm_config_i=t.asm.sqlite3_wasm_config_i).apply(null,arguments)},t._sqlite3_wasm_config_ii=function(){return(t._sqlite3_wasm_config_ii=t.asm.sqlite3_wasm_config_ii).apply(null,arguments)},t._sqlite3_wasm_config_j=function(){return(t._sqlite3_wasm_config_j=t.asm.sqlite3_wasm_config_j).apply(null,arguments)},t._sqlite3_wasm_init_wasmfs=function(){return(t._sqlite3_wasm_init_wasmfs=t.asm.sqlite3_wasm_init_wasmfs).apply(null,arguments)},t._sqlite3_wasm_test_intptr=function(){return(t._sqlite3_wasm_test_intptr=t.asm.sqlite3_wasm_test_intptr).apply(null,arguments)},t._sqlite3_wasm_test_voidptr=function(){return(t._sqlite3_wasm_test_voidptr=t.asm.sqlite3_wasm_test_voidptr).apply(null,arguments)},t._sqlite3_wasm_test_int64_max=function(){return(t._sqlite3_wasm_test_int64_max=t.asm.sqlite3_wasm_test_int64_max).apply(null,arguments)},t._sqlite3_wasm_test_int64_min=function(){return(t._sqlite3_wasm_test_int64_min=t.asm.sqlite3_wasm_test_int64_min).apply(null,arguments)},t._sqlite3_wasm_test_int64_times2=function(){return(t._sqlite3_wasm_test_int64_times2=t.asm.sqlite3_wasm_test_int64_times2).apply(null,arguments)},t._sqlite3_wasm_test_int64_minmax=function(){return(t._sqlite3_wasm_test_int64_minmax=t.asm.sqlite3_wasm_test_int64_minmax).apply(null,arguments)},t._sqlite3_wasm_test_int64ptr=function(){return(t._sqlite3_wasm_test_int64ptr=t.asm.sqlite3_wasm_test_int64ptr).apply(null,arguments)},t._sqlite3_wasm_test_stack_overflow=function(){return(t._sqlite3_wasm_test_stack_overflow=t.asm.sqlite3_wasm_test_stack_overflow).apply(null,arguments)},t._sqlite3_wasm_test_str_hello=function(){return(t._sqlite3_wasm_test_str_hello=t.asm.sqlite3_wasm_test_str_hello).apply(null,arguments)},t._sqlite3_wasm_SQLTester_strglob=function(){return(t._sqlite3_wasm_SQLTester_strglob=t.asm.sqlite3_wasm_SQLTester_strglob).apply(null,arguments)};var rn=t._malloc=function(){return(rn=t._malloc=t.asm.malloc).apply(null,arguments)};t._free=function(){return(t._free=t.asm.free).apply(null,arguments)},t._realloc=function(){return(t._realloc=t.asm.realloc).apply(null,arguments)};var sn=t._emscripten_builtin_memalign=function(){return(sn=t._emscripten_builtin_memalign=t.asm.emscripten_builtin_memalign).apply(null,arguments)};t.stackSave=function(){return(t.stackSave=t.asm.stackSave).apply(null,arguments)},t.stackRestore=function(){return(t.stackRestore=t.asm.stackRestore).apply(null,arguments)},t.stackAlloc=function(){return(t.stackAlloc=t.asm.stackAlloc).apply(null,arguments)},t.wasmMemory=He;var gt;st=function n(){gt||on(),gt||(st=n)};function on(n){if(Ge>0||(kn(),Ge>0))return;function e(){gt||(gt=!0,t.calledRun=!0,!jt&&(Tn(),he(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),Fn()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),e()},1)):e()}if(t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return on(),t.postRun||(t.postRun=[]),t.postRun.push(function(n){if(globalThis.sqlite3ApiBootstrap=function e(s=globalThis.sqlite3ApiConfig||e.defaultConfig){if(e.sqlite3)return console.warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),e.sqlite3;const r=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:typeof n<"u"?!!n.HEAPU64:!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},s||{});Object.assign(r,{allocExportName:r.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:r.useStdAlloc?"free":"sqlite3_free",reallocExportName:r.useStdAlloc?"realloc":"sqlite3_realloc"},r),["exports","memory","wasmfsOpfsDir"].forEach(l=>{typeof r[l]=="function"&&(r[l]=r[l]())});const i=Object.create(null),a=Object.create(null),p=l=>i.sqlite3_js_rc_str&&i.sqlite3_js_rc_str(l)||"Unknown result code #"+l,E=l=>typeof l=="number"&&l===(l|0);class P extends Error{constructor(...c){let q;if(c.length)if(E(c[0]))if(q=c[0],c.length===1)super(p(c[0]));else{const w=p(q);typeof c[1]=="object"?super(w,c[1]):(c[0]=w+":",super(c.join(" ")))}else c.length===2&&typeof c[1]=="object"?super(...c):super(c.join(" "));this.resultCode=q||i.SQLITE_ERROR,this.name="SQLite3Error"}}P.toss=(...l)=>{throw new P(...l)};const z=P.toss;r.wasmfsOpfsDir&&!/^\/[^/]+$/.test(r.wasmfsOpfsDir)&&z("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const V=l=>typeof l!="bigint"&&l===(l|0)&&l<=2147483647&&l>=-2147483648,te=function l(c){return l._max||(l._max=BigInt("0x7fffffffffffffff"),l._min=~l._max),c>=l._min&&c<=l._max},k=l=>l>=-0x7fffffffn-1n&&l<=0x7fffffffn,_=function l(c){return l._min||(l._min=Number.MIN_SAFE_INTEGER,l._max=Number.MAX_SAFE_INTEGER),c>=l._min&&c<=l._max},d=l=>l&&l.constructor&&V(l.constructor.BYTES_PER_ELEMENT)?l:!1,b=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,A=l=>l.buffer instanceof b,g=(l,c,q)=>A(l)?l.slice(c,q):l.subarray(c,q),O=l=>l&&(l instanceof Uint8Array||l instanceof Int8Array||l instanceof ArrayBuffer),N=l=>l&&(l instanceof Uint8Array||l instanceof Int8Array||l instanceof ArrayBuffer),B=l=>O(l)||z("Value is not of a supported TypedArray type."),W=new TextDecoder("utf-8"),K=function(l,c,q){return W.decode(g(l,c,q))},u=function(l){return N(l)?K(l instanceof ArrayBuffer?new Uint8Array(l):l):Array.isArray(l)?l.join(""):(a.isPtr(l)&&(l=a.cstrToJs(l)),l)};class S extends Error{constructor(...c){c.length===2&&typeof c[1]=="object"?super(...c):c.length?super(c.join(" ")):super("Allocation failed."),this.resultCode=i.SQLITE_NOMEM,this.name="WasmAllocError"}}S.toss=(...l)=>{throw new S(...l)},Object.assign(i,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(l,c,q,w,j,J,ne,oe,re)=>{},sqlite3_create_function:(l,c,q,w,j,J,ne,oe)=>{},sqlite3_create_window_function:(l,c,q,w,j,J,ne,oe,re,se)=>{},sqlite3_prepare_v3:(l,c,q,w,j,J)=>{},sqlite3_prepare_v2:(l,c,q,w,j)=>{},sqlite3_exec:(l,c,q,w,j)=>{},sqlite3_randomness:(l,c)=>{}});const x={affirmBindableTypedArray:B,flexibleString:u,bigIntFits32:k,bigIntFits64:te,bigIntFitsDouble:_,isBindableTypedArray:O,isInt32:V,isSQLableTypedArray:N,isTypedArray:d,typedArrayToString:K,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:A,toss:function(...l){throw new Error(l.join(" "))},toss3:z,typedArrayPart:g,affirmDbHeader:function(l){l instanceof ArrayBuffer&&(l=new Uint8Array(l));const c="SQLite format 3";c.length>l.byteLength&&z("Input does not contain an SQLite3 database header.");for(let q=0;q<c.length;++q)c.charCodeAt(q)!==l[q]&&z("Input does not contain an SQLite3 database header.")},affirmIsDb:function(l){l instanceof ArrayBuffer&&(l=new Uint8Array(l));const c=l.byteLength;(c<512||c%512!==0)&&z("Byte array size",c,"is invalid for an SQLite3 db."),x.affirmDbHeader(l)}};Object.assign(a,{ptrSizeof:r.wasmPtrSizeof||4,ptrIR:r.wasmPtrIR||"i32",bigIntEnabled:!!r.bigIntEnabled,exports:r.exports||z("Missing API config.exports (WASM module exports)."),memory:r.memory||r.exports.memory||z("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),a.allocFromTypedArray=function(l){l instanceof ArrayBuffer&&(l=new Uint8Array(l)),B(l);const c=a.alloc(l.byteLength||1);return a.heapForSize(l.constructor).set(l.byteLength?l:[0],c),c};{const l=r.allocExportName,c=r.deallocExportName,q=r.reallocExportName;for(const w of[l,c,q])a.exports[w]instanceof Function||z("Missing required exports[",w,"] function.");a.alloc=function w(j){return w.impl(j)||S.toss("Failed to allocate",j," bytes.")},a.alloc.impl=a.exports[l],a.realloc=function w(j,J){const ne=w.impl(j,J);return J?ne||S.toss("Failed to reallocate",J," bytes."):0},a.realloc.impl=a.exports[q],a.dealloc=a.exports[c]}a.compileOptionUsed=function l(c){if(arguments.length){if(Array.isArray(c)){const q={};return c.forEach(w=>{q[w]=i.sqlite3_compileoption_used(w)}),q}else if(typeof c=="object")return Object.keys(c).forEach(q=>{c[q]=i.sqlite3_compileoption_used(q)}),c}else{if(l._result)return l._result;l._opt||(l._rx=/^([^=]+)=(.+)/,l._rxInt=/^-?\d+$/,l._opt=function(ne,oe){const re=l._rx.exec(ne);oe[0]=re?re[1]:ne,oe[1]=re?l._rxInt.test(re[2])?+re[2]:re[2]:!0});const q={},w=[0,0];let j=0,J;for(;J=i.sqlite3_compileoption_get(j++);)l._opt(J,w),q[w[0]]=w[1];return l._result=q}return typeof c=="string"?!!i.sqlite3_compileoption_used(c):!1},a.pstack=Object.assign(Object.create(null),{restore:a.exports.sqlite3_wasm_pstack_restore,alloc:function(l){return typeof l=="string"&&!(l=a.sizeofIR(l))&&S.toss("Invalid value for pstack.alloc(",arguments[0],")"),a.exports.sqlite3_wasm_pstack_alloc(l)||S.toss("Could not allocate",l,"bytes from the pstack.")},allocChunks:function(l,c){typeof c=="string"&&!(c=a.sizeofIR(c))&&S.toss("Invalid size value for allocChunks(",arguments[1],")");const q=a.pstack.alloc(l*c),w=[];let j=0,J=0;for(;j<l;++j,J+=c)w.push(q+J);return w},allocPtr:(l=1,c=!0)=>l===1?a.pstack.alloc(c?8:a.ptrSizeof):a.pstack.allocChunks(l,c?8:a.ptrSizeof),call:function(l){const c=a.pstack.pointer;try{return l(y)}finally{a.pstack.restore(c)}}}),Object.defineProperties(a.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:a.exports.sqlite3_wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:a.exports.sqlite3_wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:a.exports.sqlite3_wasm_pstack_remaining}}),i.sqlite3_randomness=(...l)=>{if(l.length===1&&x.isTypedArray(l[0])&&l[0].BYTES_PER_ELEMENT===1){const c=l[0];if(c.byteLength===0)return a.exports.sqlite3_randomness(0,0),c;const q=a.pstack.pointer;try{let w=c.byteLength,j=0;const J=a.exports.sqlite3_randomness,ne=a.heap8u(),oe=w<512?w:512,re=a.pstack.alloc(oe);do{const se=w>oe?oe:w;J(se,re),c.set(g(ne,re,re+se),j),w-=se,j+=se}while(w>0)}catch(w){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",w)}finally{a.pstack.restore(q)}return c}a.exports.sqlite3_randomness(...l)};let M;if(i.sqlite3_wasmfs_opfs_dir=function(){if(M!==void 0)return M;const l=r.wasmfsOpfsDir;if(!l||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return M="";try{return l&&a.xCallWrapped("sqlite3_wasm_init_wasmfs","i32",["string"],l)===0?M=l:M=""}catch{return M=""}},i.sqlite3_wasmfs_filename_is_persistent=function(l){const c=i.sqlite3_wasmfs_opfs_dir();return c&&l?l.startsWith(c+"/"):!1},i.sqlite3_js_db_uses_vfs=function(l,c,q=0){try{const w=i.sqlite3_vfs_find(c);return w?l?w===i.sqlite3_js_db_vfs(l,q)?w:!1:w===i.sqlite3_vfs_find(0)?w:!1:!1}catch{return!1}},i.sqlite3_js_vfs_list=function(){const l=[];let c=i.sqlite3_vfs_find(0);for(;c;){const q=new i.sqlite3_vfs(c);l.push(a.cstrToJs(q.$zName)),c=q.$pNext,q.dispose()}return l},i.sqlite3_js_db_export=function(l,c=0){l=a.xWrap.testConvertArg("sqlite3*",l),l||z("Invalid sqlite3* argument."),a.bigIntEnabled||z("BigInt64 support is not enabled.");const q=a.scopedAllocPush();let w;try{const j=a.scopedAlloc(8+a.ptrSizeof),J=j+8,ne=c?a.isPtr(c)?c:a.scopedAllocCString(""+c):0;let oe=a.exports.sqlite3_wasm_db_serialize(l,ne,J,j,0);oe&&z("Database serialization failed with code",y.capi.sqlite3_js_rc_str(oe)),w=a.peekPtr(J);const re=a.peek(j,"i64");return oe=re?a.heap8u().slice(w,w+Number(re)):new Uint8Array,oe}finally{w&&a.exports.sqlite3_free(w),a.scopedAllocPop(q)}},i.sqlite3_js_db_vfs=(l,c=0)=>a.sqlite3_wasm_db_vfs(l,c),i.sqlite3_js_aggregate_context=(l,c)=>i.sqlite3_aggregate_context(l,c)||(c?S.toss("Cannot allocate",c,"bytes for sqlite3_aggregate_context()"):0),i.sqlite3_js_posix_create_file=function(l,c,q){let w;c&&a.isPtr(c)?w=c:c instanceof ArrayBuffer||c instanceof Uint8Array?(w=a.allocFromTypedArray(c),(arguments.length<3||!x.isInt32(q)||q<0)&&(q=c.byteLength)):P.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!x.isInt32(q)||q<0)&&P.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const j=a.sqlite3_wasm_posix_create_file(l,w,q);j&&P.toss("Creation of file failed with sqlite3 result code",i.sqlite3_js_rc_str(j))}finally{a.dealloc(w)}},i.sqlite3_js_vfs_create_file=function(l,c,q,w){r.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let j;q?(a.isPtr(q)?j=q:q instanceof ArrayBuffer&&(q=new Uint8Array(q)),q instanceof Uint8Array?(j=a.allocFromTypedArray(q),(arguments.length<4||!x.isInt32(w)||w<0)&&(w=q.byteLength)):P.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):j=0,(!x.isInt32(w)||w<0)&&(a.dealloc(j),P.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const J=a.sqlite3_wasm_vfs_create_file(l,c,j,w);J&&P.toss("Creation of file failed with sqlite3 result code",i.sqlite3_js_rc_str(J))}finally{a.dealloc(j)}},i.sqlite3_js_sql_to_string=l=>{if(typeof l=="string")return l;const c=u(v);return c===v?void 0:c},x.isUIThread()){const l=function(c){const q=Object.create(null);return q.prefix="kvvfs-"+c,q.stores=[],(c==="session"||c==="")&&q.stores.push(globalThis.sessionStorage),(c==="local"||c==="")&&q.stores.push(globalThis.localStorage),q};i.sqlite3_js_kvvfs_clear=function(c=""){let q=0;const w=l(c);return w.stores.forEach(j=>{const J=[];let ne;for(ne=0;ne<j.length;++ne){const oe=j.key(ne);oe.startsWith(w.prefix)&&J.push(oe)}J.forEach(oe=>j.removeItem(oe)),q+=J.length}),q},i.sqlite3_js_kvvfs_size=function(c=""){let q=0;const w=l(c);return w.stores.forEach(j=>{let J;for(J=0;J<j.length;++J){const ne=j.key(J);ne.startsWith(w.prefix)&&(q+=ne.length,q+=j.getItem(ne).length)}}),q*2}}i.sqlite3_db_config=(function(l,c,...q){switch(this.s||(this.s=a.xWrap("sqlite3_wasm_db_config_s","int",["sqlite3*","int","string:static"]),this.pii=a.xWrap("sqlite3_wasm_db_config_pii","int",["sqlite3*","int","*","int","int"]),this.ip=a.xWrap("sqlite3_wasm_db_config_ip","int",["sqlite3*","int","int","*"])),c){case i.SQLITE_DBCONFIG_ENABLE_FKEY:case i.SQLITE_DBCONFIG_ENABLE_TRIGGER:case i.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case i.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case i.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case i.SQLITE_DBCONFIG_ENABLE_QPSG:case i.SQLITE_DBCONFIG_TRIGGER_EQP:case i.SQLITE_DBCONFIG_RESET_DATABASE:case i.SQLITE_DBCONFIG_DEFENSIVE:case i.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case i.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case i.SQLITE_DBCONFIG_DQS_DML:case i.SQLITE_DBCONFIG_DQS_DDL:case i.SQLITE_DBCONFIG_ENABLE_VIEW:case i.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case i.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case i.SQLITE_DBCONFIG_STMT_SCANSTATUS:case i.SQLITE_DBCONFIG_REVERSE_SCANORDER:return this.ip(l,c,q[0],q[1]||0);case i.SQLITE_DBCONFIG_LOOKASIDE:return this.pii(l,c,q[0],q[1],q[2]);case i.SQLITE_DBCONFIG_MAINDBNAME:return this.s(l,c,q[0]);default:return i.SQLITE_MISUSE}}).bind(Object.create(null)),i.sqlite3_value_to_js=function(l,c=!0){let q;const w=i.sqlite3_value_type(l);switch(w){case i.SQLITE_INTEGER:a.bigIntEnabled?(q=i.sqlite3_value_int64(l),x.bigIntFitsDouble(q)&&(q=Number(q))):q=i.sqlite3_value_double(l);break;case i.SQLITE_FLOAT:q=i.sqlite3_value_double(l);break;case i.SQLITE_TEXT:q=i.sqlite3_value_text(l);break;case i.SQLITE_BLOB:{const j=i.sqlite3_value_bytes(l),J=i.sqlite3_value_blob(l);j&&!J&&y.WasmAllocError.toss("Cannot allocate memory for blob argument of",j,"byte(s)"),q=j?a.heap8u().slice(J,J+Number(j)):null;break}case i.SQLITE_NULL:q=null;break;default:c&&z(i.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",w),q=void 0}return q},i.sqlite3_values_to_js=function(l,c,q=!0){let w;const j=[];for(w=0;w<l;++w)j.push(i.sqlite3_value_to_js(a.peekPtr(c+a.ptrSizeof*w),q));return j},i.sqlite3_result_error_js=function(l,c){c instanceof S?i.sqlite3_result_error_nomem(l):i.sqlite3_result_error(l,""+c,-1)},i.sqlite3_result_js=function(l,c){if(c instanceof Error){i.sqlite3_result_error_js(l,c);return}try{switch(typeof c){case"undefined":break;case"boolean":i.sqlite3_result_int(l,c?1:0);break;case"bigint":x.bigIntFits32(c)?i.sqlite3_result_int(l,Number(c)):x.bigIntFitsDouble(c)?i.sqlite3_result_double(l,Number(c)):a.bigIntEnabled?x.bigIntFits64(c)?i.sqlite3_result_int64(l,c):z("BigInt value",c.toString(),"is too BigInt for int64."):z("BigInt value",c.toString(),"is too BigInt.");break;case"number":{let q;x.isInt32(c)?q=i.sqlite3_result_int:a.bigIntEnabled&&Number.isInteger(c)&&x.bigIntFits64(BigInt(c))?q=i.sqlite3_result_int64:q=i.sqlite3_result_double,q(l,c);break}case"string":{const[q,w]=a.allocCString(c,!0);i.sqlite3_result_text(l,q,w,i.SQLITE_WASM_DEALLOC);break}case"object":if(c===null){i.sqlite3_result_null(l);break}else if(x.isBindableTypedArray(c)){const q=a.allocFromTypedArray(c);i.sqlite3_result_blob(l,q,c.byteLength,i.SQLITE_WASM_DEALLOC);break}default:z("Don't not how to handle this UDF result value:",typeof c,c)}}catch(q){i.sqlite3_result_error_js(l,q)}},i.sqlite3_column_js=function(l,c,q=!0){const w=i.sqlite3_column_value(l,c);return w===0?void 0:i.sqlite3_value_to_js(w,q)};const f=(function(l,c,q){q=i[q],this.ptr?a.pokePtr(this.ptr,0):this.ptr=a.allocPtr();const w=q(l,c,this.ptr);if(w)return P.toss(w,arguments[2]+"() failed with code "+w);const j=a.peekPtr(this.ptr);return j?i.sqlite3_value_to_js(j,!0):void 0}).bind(Object.create(null));i.sqlite3_preupdate_new_js=(l,c)=>f(l,c,"sqlite3_preupdate_new"),i.sqlite3_preupdate_old_js=(l,c)=>f(l,c,"sqlite3_preupdate_old"),i.sqlite3changeset_new_js=(l,c)=>f(l,c,"sqlite3changeset_new"),i.sqlite3changeset_old_js=(l,c)=>f(l,c,"sqlite3changeset_old");const y={WasmAllocError:S,SQLite3Error:P,capi:i,util:x,wasm:a,config:r,version:Object.create(null),client:void 0,asyncPostInit:async function l(){if(l.isReady instanceof Promise)return l.isReady;let c=e.initializersAsync;delete e.initializersAsync;const q=async()=>(y.__isUnderTest||(delete y.util,delete y.StructBinder),y),w=J=>{throw r.error("an async sqlite3 initializer failed:",J),J};if(!c||!c.length)return l.isReady=q().catch(w);c=c.map(J=>J instanceof Function?async ne=>J(y):J),c.push(q);let j=Promise.resolve(y);for(;c.length;)j=j.then(c.shift());return l.isReady=j.catch(w)},scriptInfo:void 0};try{e.initializers.forEach(l=>{l(y)})}catch(l){throw console.error("sqlite3 bootstrap initializer threw:",l),l}return delete e.initializers,e.sqlite3=y,y},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(e){e.bigIntEnabled===void 0&&(e.bigIntEnabled=!!globalThis.BigInt64Array);const s=(...u)=>{throw new Error(u.join(" "))};e.exports||Object.defineProperty(e,"exports",{enumerable:!0,configurable:!0,get:()=>e.instance&&e.instance.exports});const r=e.pointerIR||"i32",i=e.ptrSizeof=r==="i32"?4:r==="i64"?8:s("Unhandled ptrSizeof:",r),a=Object.create(null);a.heapSize=0,a.memory=null,a.freeFuncIndexes=[],a.scopedAlloc=[],a.utf8Decoder=new TextDecoder,a.utf8Encoder=new TextEncoder("utf-8"),e.sizeofIR=u=>{switch(u){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return i;default:return(""+u).endsWith("*")?i:void 0}};const p=function(){if(!a.memory)a.memory=e.memory instanceof WebAssembly.Memory?e.memory:e.exports.memory;else if(a.heapSize===a.memory.buffer.byteLength)return a;const u=a.memory.buffer;return a.HEAP8=new Int8Array(u),a.HEAP8U=new Uint8Array(u),a.HEAP16=new Int16Array(u),a.HEAP16U=new Uint16Array(u),a.HEAP32=new Int32Array(u),a.HEAP32U=new Uint32Array(u),e.bigIntEnabled&&(a.HEAP64=new BigInt64Array(u),a.HEAP64U=new BigUint64Array(u)),a.HEAP32F=new Float32Array(u),a.HEAP64F=new Float64Array(u),a.heapSize=u.byteLength,a};e.heap8=()=>p().HEAP8,e.heap8u=()=>p().HEAP8U,e.heap16=()=>p().HEAP16,e.heap16u=()=>p().HEAP16U,e.heap32=()=>p().HEAP32,e.heap32u=()=>p().HEAP32U,e.heapForSize=function(u,S=!0){const x=a.memory&&a.heapSize===a.memory.buffer.byteLength?a:p();switch(u){case Int8Array:return x.HEAP8;case Uint8Array:return x.HEAP8U;case Int16Array:return x.HEAP16;case Uint16Array:return x.HEAP16U;case Int32Array:return x.HEAP32;case Uint32Array:return x.HEAP32U;case 8:return S?x.HEAP8U:x.HEAP8;case 16:return S?x.HEAP16U:x.HEAP16;case 32:return S?x.HEAP32U:x.HEAP32;case 64:if(x.HEAP64)return S?x.HEAP64U:x.HEAP64;break;default:if(e.bigIntEnabled){if(u===globalThis.BigUint64Array)return x.HEAP64U;if(u===globalThis.BigInt64Array)return x.HEAP64;break}}s("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},e.functionTable=function(){return e.exports.__indirect_function_table},e.functionEntry=function(u){const S=e.functionTable();return u<S.length?S.get(u):void 0},e.jsFuncToWasm=function u(S,x){if(u._||(u._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(y,l,c){c<128?y[l](c):y[l](c%128|128,c>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(y){const l=u._.rxJSig.exec(y);return l?l[2]:y.substr(1)},letterType:y=>u._.sigTypes[y]||s("Invalid signature letter:",y),pushSigType:(y,l)=>y.push(u._.typeCodes[u._.letterType(l)])}),typeof S=="string"){const y=x;x=S,S=y}const M=u._.sigParams(x),f=[1,96];u._.uleb128Encode(f,"push",M.length);for(const y of M)u._.pushSigType(f,y);return x[0]==="v"?f.push(0):(f.push(1),u._.pushSigType(f,x[0])),u._.uleb128Encode(f,"unshift",f.length),f.unshift(0,97,115,109,1,0,0,0,1),f.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(f)),{e:{f:S}}).exports.f};const E=function(S,x,M){if(M&&!a.scopedAlloc.length&&s("No scopedAllocPush() scope is active."),typeof S=="string"){const c=x;x=S,S=c}(typeof x!="string"||!(S instanceof Function))&&s("Invalid arguments: expecting (function,signature) or (signature,function).");const f=e.functionTable(),y=f.length;let l;for(;a.freeFuncIndexes.length&&(l=a.freeFuncIndexes.pop(),f.get(l));){l=null;continue}l||(l=y,f.grow(1));try{return f.set(l,S),M&&a.scopedAlloc[a.scopedAlloc.length-1].push(l),l}catch(c){if(!(c instanceof TypeError))throw l===y&&a.freeFuncIndexes.push(y),c}try{const c=e.jsFuncToWasm(S,x);f.set(l,c),M&&a.scopedAlloc[a.scopedAlloc.length-1].push(l)}catch(c){throw l===y&&a.freeFuncIndexes.push(y),c}return l};e.installFunction=(u,S)=>E(u,S,!1),e.scopedInstallFunction=(u,S)=>E(u,S,!0),e.uninstallFunction=function(u){if(!u&&u!==0)return;const S=a.freeFuncIndexes,x=e.functionTable();S.push(u);const M=x.get(u);return x.set(u,null),M},e.peek=function(S,x="i8"){x.endsWith("*")&&(x=r);const M=a.memory&&a.heapSize===a.memory.buffer.byteLength?a:p(),f=Array.isArray(S)?[]:void 0;let y;do{switch(f&&(S=arguments[0].shift()),x){case"i1":case"i8":y=M.HEAP8[S>>0];break;case"i16":y=M.HEAP16[S>>1];break;case"i32":y=M.HEAP32[S>>2];break;case"float":case"f32":y=M.HEAP32F[S>>2];break;case"double":case"f64":y=Number(M.HEAP64F[S>>3]);break;case"i64":if(e.bigIntEnabled){y=BigInt(M.HEAP64[S>>3]);break}default:s("Invalid type for peek():",x)}f&&f.push(y)}while(f&&arguments[0].length);return f||y},e.poke=function(u,S,x="i8"){x.endsWith("*")&&(x=r);const M=a.memory&&a.heapSize===a.memory.buffer.byteLength?a:p();for(const f of Array.isArray(u)?u:[u])switch(x){case"i1":case"i8":M.HEAP8[f>>0]=S;continue;case"i16":M.HEAP16[f>>1]=S;continue;case"i32":M.HEAP32[f>>2]=S;continue;case"float":case"f32":M.HEAP32F[f>>2]=S;continue;case"double":case"f64":M.HEAP64F[f>>3]=S;continue;case"i64":if(M.HEAP64){M.HEAP64[f>>3]=BigInt(S);continue}default:s("Invalid type for poke(): "+x)}return this},e.peekPtr=(...u)=>e.peek(u.length===1?u[0]:u,r),e.pokePtr=(u,S=0)=>e.poke(u,S,r),e.peek8=(...u)=>e.peek(u.length===1?u[0]:u,"i8"),e.poke8=(u,S)=>e.poke(u,S,"i8"),e.peek16=(...u)=>e.peek(u.length===1?u[0]:u,"i16"),e.poke16=(u,S)=>e.poke(u,S,"i16"),e.peek32=(...u)=>e.peek(u.length===1?u[0]:u,"i32"),e.poke32=(u,S)=>e.poke(u,S,"i32"),e.peek64=(...u)=>e.peek(u.length===1?u[0]:u,"i64"),e.poke64=(u,S)=>e.poke(u,S,"i64"),e.peek32f=(...u)=>e.peek(u.length===1?u[0]:u,"f32"),e.poke32f=(u,S)=>e.poke(u,S,"f32"),e.peek64f=(...u)=>e.peek(u.length===1?u[0]:u,"f64"),e.poke64f=(u,S)=>e.poke(u,S,"f64"),e.getMemValue=e.peek,e.getPtrValue=e.peekPtr,e.setMemValue=e.poke,e.setPtrValue=e.pokePtr,e.isPtr32=u=>typeof u=="number"&&u===(u|0)&&u>=0,e.isPtr=e.isPtr32,e.cstrlen=function(u){if(!u||!e.isPtr(u))return null;const S=p().HEAP8U;let x=u;for(;S[x]!==0;++x);return x-u};const P=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,z=function(u,S,x){return a.utf8Decoder.decode(u.buffer instanceof P?u.slice(S,x):u.subarray(S,x))};e.cstrToJs=function(u){const S=e.cstrlen(u);return S?z(p().HEAP8U,u,u+S):S===null?S:""},e.jstrlen=function(u){if(typeof u!="string")return null;const S=u.length;let x=0;for(let M=0;M<S;++M){let f=u.charCodeAt(M);f>=55296&&f<=57343&&(f=65536+((f&1023)<<10)|u.charCodeAt(++M)&1023),f<=127?++x:f<=2047?x+=2:f<=65535?x+=3:x+=4}return x},e.jstrcpy=function(u,S,x=0,M=-1,f=!0){if((!S||!(S instanceof Int8Array)&&!(S instanceof Uint8Array))&&s("jstrcpy() target must be an Int8Array or Uint8Array."),M<0&&(M=S.length-x),!(M>0)||!(x>=0))return 0;let y=0,l=u.length;const c=x,q=x+M-(f?1:0);for(;y<l&&x<q;++y){let w=u.charCodeAt(y);if(w>=55296&&w<=57343&&(w=65536+((w&1023)<<10)|u.charCodeAt(++y)&1023),w<=127){if(x>=q)break;S[x++]=w}else if(w<=2047){if(x+1>=q)break;S[x++]=192|w>>6,S[x++]=128|w&63}else if(w<=65535){if(x+2>=q)break;S[x++]=224|w>>12,S[x++]=128|w>>6&63,S[x++]=128|w&63}else{if(x+3>=q)break;S[x++]=240|w>>18,S[x++]=128|w>>12&63,S[x++]=128|w>>6&63,S[x++]=128|w&63}}return f&&(S[x++]=0),x-c},e.cstrncpy=function(u,S,x){if((!u||!S)&&s("cstrncpy() does not accept NULL strings."),x<0)x=e.cstrlen(strPtr)+1;else if(!(x>0))return 0;const M=e.heap8u();let f=0,y;for(;f<x&&(y=M[S+f]);++f)M[u+f]=y;return f<x&&(M[u+f++]=0),f},e.jstrToUintArray=(u,S=!1)=>a.utf8Encoder.encode(S?u+"\0":u);const V=(u,S)=>{(!(u.alloc instanceof Function)||!(u.dealloc instanceof Function))&&s("Object is missing alloc() and/or dealloc() function(s)","required by",S+"().")},te=function(u,S,x,M){if(V(e,M),typeof u!="string")return null;{const f=a.utf8Encoder.encode(u),y=x(f.length+1),l=p().HEAP8U;return l.set(f,y),l[y+f.length]=0,S?[y,f.length]:y}};e.allocCString=(u,S=!1)=>te(u,S,e.alloc,"allocCString()"),e.scopedAllocPush=function(){V(e,"scopedAllocPush");const u=[];return a.scopedAlloc.push(u),u},e.scopedAllocPop=function(u){V(e,"scopedAllocPop");const S=arguments.length?a.scopedAlloc.indexOf(u):a.scopedAlloc.length-1;S<0&&s("Invalid state object for scopedAllocPop()."),arguments.length===0&&(u=a.scopedAlloc[S]),a.scopedAlloc.splice(S,1);for(let x;x=u.pop();)e.functionEntry(x)?e.uninstallFunction(x):e.dealloc(x)},e.scopedAlloc=function(u){a.scopedAlloc.length||s("No scopedAllocPush() scope is active.");const S=e.alloc(u);return a.scopedAlloc[a.scopedAlloc.length-1].push(S),S},Object.defineProperty(e.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>a.scopedAlloc.length,set:()=>s("The 'active' property is read-only.")}),e.scopedAllocCString=(u,S=!1)=>te(u,S,e.scopedAlloc,"scopedAllocCString()");const k=function(u,S){const x=e[u?"scopedAlloc":"alloc"]((S.length+1)*e.ptrSizeof);let M=0;return S.forEach(f=>{e.pokePtr(x+e.ptrSizeof*M++,e[u?"scopedAllocCString":"allocCString"](""+f))}),e.pokePtr(x+e.ptrSizeof*M,0),x};e.scopedAllocMainArgv=u=>k(!0,u),e.allocMainArgv=u=>k(!1,u),e.cArgvToJs=(u,S)=>{const x=[];for(let M=0;M<u;++M){const f=e.peekPtr(S+e.ptrSizeof*M);x.push(f?e.cstrToJs(f):null)}return x},e.scopedAllocCall=function(u){e.scopedAllocPush();try{return u()}finally{e.scopedAllocPop()}};const _=function(u,S,x){V(e,x);const M=S?"i64":r;let f=e[x](u*(S?8:i));if(e.poke(f,0,M),u===1)return f;const y=[f];for(let l=1;l<u;++l)f+=S?8:i,y[l]=f,e.poke(f,0,M);return y};e.allocPtr=(u=1,S=!0)=>_(u,S,"alloc"),e.scopedAllocPtr=(u=1,S=!0)=>_(u,S,"scopedAlloc"),e.xGet=function(u){return e.exports[u]||s("Cannot find exported symbol:",u)};const d=(u,S)=>s(u+"() requires",S,"argument(s).");e.xCall=function(u,...S){const x=e.xGet(u);return x instanceof Function||s("Exported symbol",u,"is not a function."),x.length!==S.length&&d(u,x.length),arguments.length===2&&Array.isArray(arguments[1])?x.apply(null,arguments[1]):x.apply(null,S)},a.xWrap=Object.create(null),a.xWrap.convert=Object.create(null),a.xWrap.convert.arg=new Map,a.xWrap.convert.result=new Map;const b=a.xWrap.convert.arg,A=a.xWrap.convert.result;e.bigIntEnabled&&b.set("i64",u=>BigInt(u));const g=r==="i32"?u=>u|0:u=>BigInt(u)|BigInt(0);b.set("i32",g).set("i16",u=>(u|0)&65535).set("i8",u=>(u|0)&255).set("f32",u=>Number(u).valueOf()).set("float",b.get("f32")).set("f64",b.get("f32")).set("double",b.get("f64")).set("int",b.get("i32")).set("null",u=>u).set(null,b.get("null")).set("**",g).set("*",g),A.set("*",g).set("pointer",g).set("number",u=>Number(u)).set("void",u=>{}).set("null",u=>u).set(null,A.get("null"));{const u=["i8","i16","i32","int","f32","float","f64","double"];e.bigIntEnabled&&u.push("i64");const S=b.get(r);for(const x of u)b.set(x+"*",S),A.set(x+"*",S),A.set(x,b.get(x)||s("Missing arg converter:",x))}const O=function(u){return typeof u=="string"?e.scopedAllocCString(u):u?g(u):null};b.set("string",O).set("utf8",O).set("pointer",O),A.set("string",u=>e.cstrToJs(u)).set("utf8",A.get("string")).set("string:dealloc",u=>{try{return u?e.cstrToJs(u):null}finally{e.dealloc(u)}}).set("utf8:dealloc",A.get("string:dealloc")).set("json",u=>JSON.parse(e.cstrToJs(u))).set("json:dealloc",u=>{try{return u?JSON.parse(e.cstrToJs(u)):null}finally{e.dealloc(u)}});const N=class{constructor(u){this.name=u.name||"unnamed adapter"}convertArg(u,S,x){s("AbstractArgAdapter must be subclassed.")}};b.FuncPtrAdapter=class We extends N{constructor(S){super(S),b.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",S),this.name=S.name||"unnamed",this.signature=S.signature,S.contextKey instanceof Function&&(this.contextKey=S.contextKey,S.bindScope||(S.bindScope="context")),this.bindScope=S.bindScope||s("FuncPtrAdapter options requires a bindScope (explicit or implied)."),We.bindScopes.indexOf(S.bindScope)<0&&s("Invalid options.bindScope ("+S.bindMod+") for FuncPtrAdapter. Expecting one of: ("+We.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=S.callProxy instanceof Function?S.callProxy:void 0}contextKey(S,x){return this}contextMap(S){const x=this.__cmap||(this.__cmap=new Map);let M=x.get(S);return M===void 0&&x.set(S,M=[]),M}convertArg(S,x,M){let f=this.singleton;if(!f&&this.isContext&&(f=this.contextMap(this.contextKey(x,M))),f&&f[0]===S)return f[1];if(S instanceof Function){this.callProxy&&(S=this.callProxy(S));const y=E(S,this.signature,this.isTransient);if(We.debugFuncInstall&&We.debugOut("FuncPtrAdapter installed",this,this.contextKey(x,M),"@"+y,S),f){if(f[1]){We.debugFuncInstall&&We.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(x,M),"@"+f[1],S);try{a.scopedAlloc[a.scopedAlloc.length-1].push(f[1])}catch{}}f[0]=S,f[1]=y}return y}else if(e.isPtr(S)||S===null||S===void 0){if(f&&f[1]&&f[1]!==S){We.debugFuncInstall&&We.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(x,M),"@"+f[1],S);try{a.scopedAlloc[a.scopedAlloc.length-1].push(f[1])}catch{}f[0]=f[1]=S|0}return S||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},b.FuncPtrAdapter.warnOnUse=!1,b.FuncPtrAdapter.debugFuncInstall=!1,b.FuncPtrAdapter.debugOut=console.debug.bind(console),b.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const B=u=>b.get(u)||s("Argument adapter not found:",u),W=u=>A.get(u)||s("Result adapter not found:",u);a.xWrap.convertArg=(u,...S)=>B(u)(...S),a.xWrap.convertArgNoCheck=(u,...S)=>b.get(u)(...S),a.xWrap.convertResult=(u,S)=>u===null?S:u?W(u)(S):void 0,a.xWrap.convertResultNoCheck=(u,S)=>u===null?S:u?A.get(u)(S):void 0,e.xWrap=function(u,S,...x){arguments.length===3&&Array.isArray(arguments[2])&&(x=arguments[2]),e.isPtr(u)&&(u=e.functionEntry(u)||s("Function pointer not found in WASM function table."));const M=u instanceof Function,f=M?u:e.xGet(u);if(M&&(u=f.name||"unnamed function"),x.length!==f.length&&d(u,f.length),S===null&&f.length===0)return f;S!=null&&W(S);for(const l of x)l instanceof N?b.set(l,(...c)=>l.convertArg(...c)):B(l);const y=a.xWrap;return f.length===0?(...l)=>l.length?d(u,f.length):y.convertResult(S,f.call(null)):function(...l){l.length!==f.length&&d(u,f.length);const c=e.scopedAllocPush();try{for(const q in l)l[q]=y.convertArgNoCheck(x[q],l[q],l,q);return y.convertResultNoCheck(S,f.apply(null,l))}finally{e.scopedAllocPop(c)}}};const K=function(u,S,x,M,f,y){if(typeof x=="string"){if(S===1)return y.get(x);if(S===2){if(M)M instanceof Function||s(f,"requires a function argument.");else return delete y.get(x),u;return y.set(x,M),u}}s("Invalid arguments to",f)};return e.xWrap.resultAdapter=function u(S,x){return K(u,arguments.length,S,x,"resultAdapter()",A)},e.xWrap.argAdapter=function u(S,x){return K(u,arguments.length,S,x,"argAdapter()",b)},e.xWrap.FuncPtrAdapter=b.FuncPtrAdapter,e.xCallWrapped=function(u,S,x,...M){return Array.isArray(arguments[3])&&(M=arguments[3]),e.xWrap(u,S,x||[]).apply(null,M||[])},e.xWrap.testConvertArg=a.xWrap.convertArg,e.xWrap.testConvertResult=a.xWrap.convertResult,e},globalThis.WhWasmUtilInstaller.yawl=(function(e){const s=()=>fetch(e.uri,{credentials:"same-origin"}),r=this,i=function(p){if(e.wasmUtilTarget){const E=(...z)=>{throw new Error(z.join(" "))},P=e.wasmUtilTarget;if(P.module=p.module,P.instance=p.instance,P.instance.exports.memory||(P.memory=e.imports&&e.imports.env&&e.imports.env.memory||E("Missing 'memory' object!")),!P.alloc&&p.instance.exports.malloc){const z=p.instance.exports;P.alloc=function(V){return z.malloc(V)||E("Allocation of",V,"bytes failed.")},P.dealloc=function(V){z.free(V)}}r(P)}return e.onload&&e.onload(p,e),p};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(s(),e.imports||{}).then(i)}:function(){return s().then(E=>E.arrayBuffer()).then(E=>WebAssembly.instantiate(E,e.imports||{})).then(i)}}).bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function e(s){const r=(...m)=>{throw new Error(m.join(" "))};!(s.heap instanceof WebAssembly.Memory)&&!(s.heap instanceof Function)&&r("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(m){s[m]instanceof Function||r("Config option '"+m+"' must be a function.")});const i=e,a=s.heap instanceof Function?s.heap:()=>new Uint8Array(s.heap.buffer),p=s.alloc,E=s.dealloc,P=s.log||console.log.bind(console),z=s.memberPrefix||"",V=s.memberSuffix||"",te=s.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!s.bigIntEnabled,k=globalThis.BigInt,_=globalThis.BigInt64Array,d=s.ptrSizeof||4,b=s.ptrIR||"i32";i.debugFlags||(i.__makeDebugFlags=function(m=null){m&&m.__flags&&(m=m.__flags);const I=function T(D){return arguments.length===0?T.__flags:(D<0?(delete T.__flags.getter,delete T.__flags.setter,delete T.__flags.alloc,delete T.__flags.dealloc):(T.__flags.getter=(1&D)!==0,T.__flags.setter=(2&D)!==0,T.__flags.alloc=(4&D)!==0,T.__flags.dealloc=(8&D)!==0),T._flags)};return Object.defineProperty(I,"__flags",{iterable:!1,writable:!1,value:Object.create(m)}),m||I(0),I},i.debugFlags=i.__makeDebugFlags());const A=function(){const m=new ArrayBuffer(2);return new DataView(m).setInt16(0,256,!0),new Int16Array(m)[0]===256}(),g=m=>m[1]==="(",O=m=>m==="P",N=m=>g(m)?"p":m[0],B=function(m){switch(N(m)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return b;case"j":return"i64";case"f":return"float";case"d":return"double"}r("Unhandled signature IR:",m)},W=_?()=>!0:()=>r("BigInt64Array is not available."),K=function(m){switch(N(m)){case"p":case"P":case"s":{switch(d){case 4:return"getInt32";case 8:return W()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return W()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}r("Unhandled DataView getter for signature:",m)},u=function(m){switch(N(m)){case"p":case"P":case"s":{switch(d){case 4:return"setInt32";case 8:return W()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return W()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}r("Unhandled DataView setter for signature:",m)},S=function(m){switch(N(m)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return W()&&k;case"p":case"P":case"s":switch(d){case 4:return Number;case 8:return W()&&k}break}r("Unhandled DataView set wrapper for signature:",m)},x=(m,I)=>m+"::"+I,M=function(m,I){return()=>r(x(m,I),"is read-only.")},f=new WeakMap,y="(pointer-is-external)",l=function(m,I,T){if(T||(T=f.get(I)),T){if(f.delete(I),Array.isArray(I.ondispose)){let D;for(;D=I.ondispose.shift();)try{D instanceof Function?D.call(I):D instanceof H?D.dispose():typeof D=="number"&&E(D)}catch(G){console.warn("ondispose() for",m.structName,"@",T,"threw. NOT propagating it.",G)}}else if(I.ondispose instanceof Function)try{I.ondispose()}catch(D){console.warn("ondispose() for",m.structName,"@",T,"threw. NOT propagating it.",D)}delete I.ondispose,m.debugFlags.__flags.dealloc&&P("debug.dealloc:",I[y]?"EXTERNAL":"",m.structName,"instance:",m.structInfo.sizeof,"bytes @"+T),I[y]||E(T)}},c=m=>({configurable:!1,writable:!1,iterable:!1,value:m}),q=function(m,I,T){let D=!T;T?Object.defineProperty(I,y,c(T)):(T=p(m.structInfo.sizeof),T||r("Allocation of",m.structName,"structure failed."));try{m.debugFlags.__flags.alloc&&P("debug.alloc:",D?"":"EXTERNAL",m.structName,"instance:",m.structInfo.sizeof,"bytes @"+T),D&&a().fill(0,T,T+m.structInfo.sizeof),f.set(I,T)}catch(G){throw l(m,I,T),G}},w=function(){const m=this.pointer;return m?new Uint8Array(a().slice(m,m+this.structInfo.sizeof)):null},J=c(m=>z+m+V),ne=function(m,I,T=!0){let D=m.members[I];if(!D&&(z||V)){for(const G of Object.values(m.members))if(G.key===I){D=G;break}!D&&T&&r(x(m.name,I),"is not a mapped struct member.")}return D},oe=function m(I,T,D=!1){m._||(m._=ee=>ee.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const G=ne(I.structInfo,T,!0);return D?m._(G.signature):G.signature},re={configurable:!1,enumerable:!1,get:function(){return f.get(this)},set:()=>r("Cannot assign the 'pointer' property of a struct.")},se=c(function(){const m=[];for(const I of Object.keys(this.structInfo.members))m.push(this.memberKey(I));return m}),ue=new TextDecoder("utf-8"),fe=new TextEncoder,be=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,qe=function(m,I,T){return ue.decode(m.buffer instanceof be?m.slice(I,T):m.subarray(I,T))},Le=function(m,I,T=!1){const D=ne(m.structInfo,I,T);return D&&D.signature.length===1&&D.signature[0]==="s"?D:!1},Ee=function(m){m.signature!=="s"&&r("Invalid member type signature for C-string value:",JSON.stringify(m))},F=function(I,T){const D=ne(I.structInfo,T,!0);Ee(D);const G=I[D.key];if(!G)return null;let ee=G;const ae=a();for(;ae[ee]!==0;++ee);return G===ee?"":qe(ae,G,ee)},C=function(m,...I){m.ondispose?Array.isArray(m.ondispose)||(m.ondispose=[m.ondispose]):m.ondispose=[],m.ondispose.push(...I)},R=function(m){const I=fe.encode(m),T=p(I.length+1);T||r("Allocation error while duplicating string:",m);const D=a();return D.set(I,T),D[T+I.length]=0,T},$=function(m,I,T){const D=ne(m.structInfo,I,!0);Ee(D);const G=R(T);return m[D.key]=G,C(m,G),m},H=function(I,T){arguments[2]!==c&&r("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:c(I),structInfo:c(T)})};H.prototype=Object.create(null,{dispose:c(function(){l(this.constructor,this)}),lookupMember:c(function(m,I=!0){return ne(this.structInfo,m,I)}),memberToJsString:c(function(m){return F(this,m)}),memberIsString:c(function(m,I=!0){return Le(this,m,I)}),memberKey:J,memberKeys:se,memberSignature:c(function(m,I=!1){return oe(this,m,I)}),memoryDump:c(w),pointer:re,setMemberCString:c(function(m,I){return $(this,m,I)})}),Object.assign(H.prototype,{addOnDispose:function(...m){return C(this,...m),this}}),Object.defineProperties(H,{allocCString:c(R),isA:c(m=>m instanceof H),hasExternalPointer:c(m=>m instanceof H&&!!m[y]),memberKey:J});const X=m=>Number.isFinite(m)||m instanceof(k||Number),U=function m(I,T,D){if(!m._){m._={getters:{},setters:{},sw:{}};const De=["i","c","C","p","P","s","f","d","v()"];te&&De.push("j"),De.forEach(function(ze){m._.getters[ze]=K(ze),m._.setters[ze]=u(ze),m._.sw[ze]=S(ze)});const Dr=/^[ipPsjfdcC]$/,Cr=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;m.sigCheck=function(ze,Rr,an,Ft){Object.prototype.hasOwnProperty.call(ze,an)&&r(ze.structName,"already has a property named",an+"."),Dr.test(Ft)||Cr.test(Ft)||r("Malformed signature for",x(ze.structName,Rr)+":",Ft)}}const G=I.memberKey(T);m.sigCheck(I.prototype,T,G,D.signature),D.key=G,D.name=T;const ee=N(D.signature),ae=x(I.prototype.structName,G),pe=I.prototype.debugFlags.__flags,Me=Object.create(null);Me.configurable=!1,Me.enumerable=!1,Me.get=function(){pe.getter&&P("debug.getter:",m._.getters[ee],"for",B(ee),ae,"@",this.pointer,"+",D.offset,"sz",D.sizeof);let De=new DataView(a().buffer,this.pointer+D.offset,D.sizeof)[m._.getters[ee]](0,A);return pe.getter&&P("debug.getter:",ae,"result =",De),De},D.readOnly?Me.set=M(I.prototype.structName,G):Me.set=function(De){if(pe.setter&&P("debug.setter:",m._.setters[ee],"for",B(ee),ae,"@",this.pointer,"+",D.offset,"sz",D.sizeof,De),this.pointer||r("Cannot set struct property on disposed instance."),De===null)De=0;else for(;!X(De);){if(O(D.signature)&&De instanceof H){De=De.pointer||0,pe.setter&&P("debug.setter:",ae,"resolved to",De);break}r("Invalid value for pointer-type",ae+".")}new DataView(a().buffer,this.pointer+D.offset,D.sizeof)[m._.setters[ee]](0,m._.sw[ee](De),A)},Object.defineProperty(I.prototype,G,Me)},h=function m(I,T){arguments.length===1?(T=I,I=T.name):T.name||(T.name=I),I||r("Struct name is required.");let D=!1;Object.keys(T.members).forEach(ae=>{const pe=T.members[ae];pe.sizeof?pe.sizeof===1?pe.signature==="c"||pe.signature==="C"||r("Unexpected sizeof==1 member",x(T.name,ae),"with signature",pe.signature):(pe.sizeof%4!==0&&(console.warn("Invalid struct member description =",pe,"from",T),r(I,"member",ae,"sizeof is not aligned. sizeof="+pe.sizeof)),pe.offset%4!==0&&(console.warn("Invalid struct member description =",pe,"from",T),r(I,"member",ae,"offset is not aligned. offset="+pe.offset))):r(I,"member",ae,"is missing sizeof."),(!D||D.offset<pe.offset)&&(D=pe)}),D?T.sizeof<D.offset+D.sizeof&&r("Invalid struct config:",I,"max member offset ("+D.offset+") ","extends past end of struct (sizeof="+T.sizeof+")."):r("No member property descriptions found.");const G=c(i.__makeDebugFlags(m.debugFlags)),ee=function ae(pe){this instanceof ae?arguments.length?((pe!==(pe|0)||pe<=0)&&r("Invalid pointer value for",I,"constructor."),q(ae,this,pe)):q(ae,this):r("The",I,"constructor may only be called via 'new'.")};return Object.defineProperties(ee,{debugFlags:G,isA:c(ae=>ae instanceof ee),memberKey:J,memberKeys:se,methodInfoForKey:c(function(ae){}),structInfo:c(T),structName:c(I)}),ee.prototype=new H(I,T,c),Object.defineProperties(ee.prototype,{debugFlags:G,constructor:c(ee)}),Object.keys(T.members).forEach(ae=>U(ee,ae,T.members[ae])),ee};return h.StructType=H,h.config=s,h.allocCString=R,h.debugFlags||(h.debugFlags=i.__makeDebugFlags(i.debugFlags)),h},globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const s=(...k)=>{throw new Error(k.join(" "))};e.SQLite3Error.toss;const r=e.capi,i=e.wasm,a=e.util;if(globalThis.WhWasmUtilInstaller(i),delete globalThis.WhWasmUtilInstaller,i.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(k,_)=>k[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:k=>k[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new i.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:k=>{let _;return(d,b,A,g)=>{try{const O=i.cArgvToJs(b,A);return _||(_=i.cArgvToJs(b,g)),k(O,_)|0}catch(O){return O.resultCode||r.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_progress_handler",void 0,["sqlite3*","int",new i.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(k,_)=>k[0]}),"*"]],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:k=>k[0]}),"*"]],["sqlite3_set_authorizer","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(k,_)=>k[0],callProxy:k=>(_,d,b,A,g,O)=>{try{return b=b&&i.cstrToJs(b),A=A&&i.cstrToJs(A),g=g&&i.cstrToJs(g),O=O&&i.cstrToJs(O),k(_,d,b,A,g,O)||0}catch(N){return N.resultCode||r.SQLITE_ERROR}}}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*",new i.xWrap.FuncPtrAdapter({name:"xDestroyAuxData",signature:"v(*)",contextKey:(k,_)=>k[0]})]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_isexplain","int",["sqlite3_stmt*"]],["sqlite3_stmt_readonly","int",["sqlite3_stmt*"]],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new i.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(k,_)=>k[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],i.exports.sqlite3_activate_see instanceof Function&&i.bindingSignatures.push(["sqlite3_key","int","sqlite3*","string","int"],["sqlite3_key_v2","int","sqlite3*","string","*","int"],["sqlite3_rekey","int","sqlite3*","string","int"],["sqlite3_rekey_v2","int","sqlite3*","string","*","int"],["sqlite3_activate_see",void 0,"string"]),i.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:k=>k[0],callProxy:k=>(_,d,b,A,g,O,N)=>{k(_,d,b,i.cstrToJs(A),i.cstrToJs(g),O,N)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:k=>k[0],callProxy:k=>(_,d,b,A,g)=>{k(_,d,i.cstrToJs(b),i.cstrToJs(A),g)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]],i.bigIntEnabled&&i.exports.sqlite3changegroup_add){const k={signature:"i(ps)",callProxy:_=>(d,b)=>{try{return _(d,i.cstrToJs(b))|0}catch(A){return A.resultCode||r.SQLITE_ERROR}}};i.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...k}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...k}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...k}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...k}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new i.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xFilter",...k,contextKey:(_,d)=>_[0]}),"*"]])}i.bindingSignatures.wasm=[["sqlite3_wasm_db_reset","int","sqlite3*"],["sqlite3_wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3_wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3_wasm_posix_create_file","int","string","*","int"],["sqlite3_wasm_vfs_unlink","int","sqlite3_vfs*","string"]],e.StructBinder=globalThis.Jaccwabyt({heap:i.heap8u,alloc:i.alloc,dealloc:i.dealloc,bigIntEnabled:i.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const k=i.xWrap.argAdapter("string");i.xWrap.argAdapter("string:flexible",g=>k(a.flexibleString(g))),i.xWrap.argAdapter("string:static",(function(g){return i.isPtr(g)?g:(g=""+g,this[g]||(this[g]=i.allocCString(g)))}).bind(Object.create(null)));const _=i.xWrap.argAdapter("*"),d=function(){};i.xWrap.argAdapter("sqlite3_filename",_)("sqlite3_context*",_)("sqlite3_value*",_)("void*",_)("sqlite3_changegroup*",_)("sqlite3_changeset_iter*",_)("sqlite3_session*",_)("sqlite3_stmt*",g=>{var O;return _(g instanceof(((O=e==null?void 0:e.oo1)==null?void 0:O.Stmt)||d)?g.pointer:g)})("sqlite3*",g=>{var O;return _(g instanceof(((O=e==null?void 0:e.oo1)==null?void 0:O.DB)||d)?g.pointer:g)})("sqlite3_index_info*",g=>_(g instanceof(r.sqlite3_index_info||d)?g.pointer:g))("sqlite3_module*",g=>_(g instanceof(r.sqlite3_module||d)?g.pointer:g))("sqlite3_vfs*",g=>typeof g=="string"?r.sqlite3_vfs_find(g)||e.SQLite3Error.toss(r.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",g):_(g instanceof(r.sqlite3_vfs||d)?g.pointer:g));const b=i.xWrap.resultAdapter("*");i.xWrap.resultAdapter("sqlite3*",b)("sqlite3_context*",b)("sqlite3_stmt*",b)("sqlite3_value*",b)("sqlite3_vfs*",b)("void*",b),i.exports.sqlite3_step.length===0&&(i.xWrap.doArgcCheck=!1,e.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const g of i.bindingSignatures)r[g[0]]=i.xWrap.apply(null,g);for(const g of i.bindingSignatures.wasm)i[g[0]]=i.xWrap.apply(null,g);const A=function(g){return()=>s(g+"() is unavailable due to lack","of BigInt support in this build.")};for(const g of i.bindingSignatures.int64)r[g[0]]=i.bigIntEnabled?i.xWrap.apply(null,g):A(g[0]);if(delete i.bindingSignatures,i.exports.sqlite3_wasm_db_error){const g=i.xWrap("sqlite3_wasm_db_error","int","sqlite3*","int","string");a.sqlite3_wasm_db_error=function(O,N,B){return N instanceof e.WasmAllocError?(N=r.SQLITE_NOMEM,B=0):N instanceof Error&&(B=B||""+N,N=N.resultCode||r.SQLITE_ERROR),O?g(O,N,B):N}}else a.sqlite3_wasm_db_error=function(g,O,N){return console.warn("sqlite3_wasm_db_error() is not exported.",arguments),O}}{const k=i.xCall("sqlite3_wasm_enum_json");k||s("Maintenance required: increase sqlite3_wasm_enum_json()'s","static buffer size!"),i.ctype=JSON.parse(i.cstrToJs(k));const _=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];i.bigIntEnabled&&_.push("serialize","session","vtab");for(const A of _)for(const g of Object.entries(i.ctype[A]))r[g[0]]=g[1];i.functionEntry(r.SQLITE_WASM_DEALLOC)||s("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+r.SQLITE_WASM_DEALLOC+").");const d=Object.create(null);for(const A of["resultCodes"])for(const g of Object.entries(i.ctype[A]))d[g[1]]=g[0];r.sqlite3_js_rc_str=A=>d[A];const b=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!a.isUIThread(),sqlite3_index_info:!i.bigIntEnabled,sqlite3_index_constraint:!i.bigIntEnabled,sqlite3_index_orderby:!i.bigIntEnabled,sqlite3_index_constraint_usage:!i.bigIntEnabled});for(const A of i.ctype.structs)b[A.name]||(r[A.name]=e.StructBinder(A));if(r.sqlite3_index_info){for(const A of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])r.sqlite3_index_info[A]=r[A],delete r[A];r.sqlite3_vtab_config=i.xWrap("sqlite3_wasm_vtab_config","int",["sqlite3*","int","int"])}}const p=(k,_,d)=>a.sqlite3_wasm_db_error(k,r.SQLITE_MISUSE,_+"() requires "+d+" argument"+(d===1?"":"s")+"."),E=k=>a.sqlite3_wasm_db_error(k,r.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),P=k=>i.xWrap.argAdapter("sqlite3*")(k),z=k=>i.isPtr(k)?i.cstrToJs(k):k,V=(function(k,_){k=P(k);let d=this.dbMap.get(k);if(_)!d&&_>0&&this.dbMap.set(k,d=Object.create(null));else return this.dbMap.delete(k),d;return d}).bind(Object.assign(Object.create(null),{dbMap:new Map}));V.addCollation=function(k,_){const d=V(k,1);d.collation||(d.collation=new Set),d.collation.add(z(_).toLowerCase())},V._addUDF=function(k,_,d,b){_=z(_).toLowerCase();let A=b.get(_);A||b.set(_,A=new Set),A.add(d<0?-1:d)},V.addFunction=function(k,_,d){const b=V(k,1);b.udf||(b.udf=new Map),this._addUDF(k,_,d,b.udf)},V.addWindowFunc=function(k,_,d){const b=V(k,1);b.wudf||(b.wudf=new Map),this._addUDF(k,_,d,b.wudf)},V.cleanup=function(k){k=P(k);const _=[k];for(const A of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const g=i.exports[A];_.length=g.length;try{r[A](..._)}catch(O){console.warn("close-time call of",A+"(",_,") threw:",O)}}const d=V(k,0);if(!d)return;if(d.collation){for(const A of d.collation)try{r.sqlite3_create_collation_v2(k,A,r.SQLITE_UTF8,0,0,0)}catch{}delete d.collation}let b;for(b=0;b<2;++b){const A=b?d.wudf:d.udf;if(!A)continue;const g=b?r.sqlite3_create_window_function:r.sqlite3_create_function_v2;for(const O of A){const N=O[0],B=O[1],W=[k,N,0,r.SQLITE_UTF8,0,0,0,0,0];b&&W.push(0);for(const K of B)try{W[2]=K,g.apply(null,W)}catch{}B.clear()}A.clear()}delete d.udf,delete d.wudf};{const k=i.xWrap("sqlite3_close_v2","int","sqlite3*");r.sqlite3_close_v2=function(_){if(arguments.length!==1)return p(_,"sqlite3_close_v2",1);if(_)try{V.cleanup(_)}catch{}return k(_)}}if(r.sqlite3session_table_filter){const k=i.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);r.sqlite3session_delete=function(_){if(arguments.length!==1)return p(pDb,"sqlite3session_delete",1);_&&r.sqlite3session_table_filter(_,0,0),k(_)}}{const k=(d,b)=>"argv["+b+"]:"+d[0]+":"+i.cstrToJs(d[1]).toLowerCase(),_=i.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new i.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:k}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:k})]);r.sqlite3_create_collation_v2=function(d,b,A,g,O,N){if(arguments.length!==6)return p(d,"sqlite3_create_collation_v2",6);if(!(A&15))A|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(A&15))return E(d);try{const B=_(d,b,A,g,O,N);return B===0&&O instanceof Function&&V.addCollation(d,b),B}catch(B){return a.sqlite3_wasm_db_error(d,B)}},r.sqlite3_create_collation=(d,b,A,g,O)=>arguments.length===5?r.sqlite3_create_collation_v2(d,b,A,g,O,0):p(d,"sqlite3_create_collation",5)}{const k=function(A,g){return A[0]+":"+(A[2]<0?-1:A[2])+":"+g+":"+i.cstrToJs(A[1]).toLowerCase()},_=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:k,callProxy:A=>(g,O,N)=>{try{A(g,...r.sqlite3_values_to_js(O,N))}catch(B){r.sqlite3_result_error_js(g,B)}}},xFinalAndValue:{signature:"v(p)",contextKey:k,callProxy:A=>g=>{try{r.sqlite3_result_js(g,A(g))}catch(O){r.sqlite3_result_error_js(g,O)}}},xFunc:{signature:"v(pip)",contextKey:k,callProxy:A=>(g,O,N)=>{try{r.sqlite3_result_js(g,A(g,...r.sqlite3_values_to_js(O,N)))}catch(B){r.sqlite3_result_error_js(g,B)}}},xDestroy:{signature:"v(p)",contextKey:k,callProxy:A=>g=>{try{A(g)}catch(O){console.error("UDF xDestroy method threw:",O)}}}}),d=i.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new i.xWrap.FuncPtrAdapter({name:"xFunc",..._.xFunc}),new i.xWrap.FuncPtrAdapter({name:"xStep",..._.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xFinal",..._.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",..._.xDestroy})]),b=i.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new i.xWrap.FuncPtrAdapter({name:"xStep",..._.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xFinal",..._.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xValue",..._.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xInverse",..._.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",..._.xDestroy})]);r.sqlite3_create_function_v2=function A(g,O,N,B,W,K,u,S,x){if(A.length!==arguments.length)return p(g,"sqlite3_create_function_v2",A.length);if(!(B&15))B|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(B&15))return E(g);try{const M=d(g,O,N,B,W,K,u,S,x);return M===0&&(K instanceof Function||u instanceof Function||S instanceof Function||x instanceof Function)&&V.addFunction(g,O,N),M}catch(M){return console.error("sqlite3_create_function_v2() setup threw:",M),a.sqlite3_wasm_db_error(g,M,"Creation of UDF threw: "+M)}},r.sqlite3_create_function=function A(g,O,N,B,W,K,u,S){return A.length===arguments.length?r.sqlite3_create_function_v2(g,O,N,B,W,K,u,S,0):p(g,"sqlite3_create_function",A.length)},r.sqlite3_create_window_function=function A(g,O,N,B,W,K,u,S,x,M){if(A.length!==arguments.length)return p(g,"sqlite3_create_window_function",A.length);if(!(B&15))B|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(B&15))return E(g);try{const f=b(g,O,N,B,W,K,u,S,x,M);return f===0&&(K instanceof Function||u instanceof Function||S instanceof Function||x instanceof Function||M instanceof Function)&&V.addWindowFunc(g,O,N),f}catch(f){return console.error("sqlite3_create_window_function() setup threw:",f),a.sqlite3_wasm_db_error(g,f,"Creation of UDF threw: "+f)}},r.sqlite3_create_function_v2.udfSetResult=r.sqlite3_create_function.udfSetResult=r.sqlite3_create_window_function.udfSetResult=r.sqlite3_result_js,r.sqlite3_create_function_v2.udfConvertArgs=r.sqlite3_create_function.udfConvertArgs=r.sqlite3_create_window_function.udfConvertArgs=r.sqlite3_values_to_js,r.sqlite3_create_function_v2.udfSetError=r.sqlite3_create_function.udfSetError=r.sqlite3_create_window_function.udfSetError=r.sqlite3_result_error_js}{const k=(d,b)=>(typeof d=="string"?b=-1:a.isSQLableTypedArray(d)?(b=d.byteLength,d=a.typedArrayToString(d instanceof ArrayBuffer?new Uint8Array(d):d)):Array.isArray(d)&&(d=d.join(""),b=-1),[d,b]),_={basic:i.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:i.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};r.sqlite3_prepare_v3=function d(b,A,g,O,N,B){if(d.length!==arguments.length)return p(b,"sqlite3_prepare_v3",d.length);const[W,K]=k(A,g);switch(typeof W){case"string":return _.basic(b,W,K,O,N,null);case"number":return _.full(b,W,K,O,N,B);default:return a.sqlite3_wasm_db_error(b,r.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},r.sqlite3_prepare_v2=function d(b,A,g,O,N){return d.length===arguments.length?r.sqlite3_prepare_v3(b,A,g,0,O,N):p(b,"sqlite3_prepare_v2",d.length)}}{const k=i.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),_=i.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);r.sqlite3_bind_text=function d(b,A,g,O,N){if(d.length!==arguments.length)return p(r.sqlite3_db_handle(b),"sqlite3_bind_text",d.length);if(i.isPtr(g)||g===null)return k(b,A,g,O,N);g instanceof ArrayBuffer?g=new Uint8Array(g):Array.isArray(pMem)&&(g=pMem.join(""));let B,W;try{if(a.isSQLableTypedArray(g))B=i.allocFromTypedArray(g),W=g.byteLength;else if(typeof g=="string")[B,W]=i.allocCString(g);else return a.sqlite3_wasm_db_error(r.sqlite3_db_handle(b),r.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return k(b,A,B,W,r.SQLITE_WASM_DEALLOC)}catch(K){return i.dealloc(B),a.sqlite3_wasm_db_error(r.sqlite3_db_handle(b),K)}},r.sqlite3_bind_blob=function d(b,A,g,O,N){if(d.length!==arguments.length)return p(r.sqlite3_db_handle(b),"sqlite3_bind_blob",d.length);if(i.isPtr(g)||g===null)return _(b,A,g,O,N);g instanceof ArrayBuffer?g=new Uint8Array(g):Array.isArray(g)&&(g=g.join(""));let B,W;try{if(a.isBindableTypedArray(g))B=i.allocFromTypedArray(g),W=O>=0?O:g.byteLength;else if(typeof g=="string")[B,W]=i.allocCString(g);else return a.sqlite3_wasm_db_error(r.sqlite3_db_handle(b),r.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return _(b,A,B,W,r.SQLITE_WASM_DEALLOC)}catch(K){return i.dealloc(B),a.sqlite3_wasm_db_error(r.sqlite3_db_handle(b),K)}}}r.sqlite3_config=function(k,..._){if(arguments.length<2)return r.SQLITE_MISUSE;switch(k){case r.SQLITE_CONFIG_COVERING_INDEX_SCAN:case r.SQLITE_CONFIG_MEMSTATUS:case r.SQLITE_CONFIG_SMALL_MALLOC:case r.SQLITE_CONFIG_SORTERREF_SIZE:case r.SQLITE_CONFIG_STMTJRNL_SPILL:case r.SQLITE_CONFIG_URI:return i.exports.sqlite3_wasm_config_i(k,_[0]);case r.SQLITE_CONFIG_LOOKASIDE:return i.exports.sqlite3_wasm_config_ii(k,_[0],_[1]);case r.SQLITE_CONFIG_MEMDB_MAXSIZE:return i.exports.sqlite3_wasm_config_j(k,_[0]);case r.SQLITE_CONFIG_GETMALLOC:case r.SQLITE_CONFIG_GETMUTEX:case r.SQLITE_CONFIG_GETPCACHE2:case r.SQLITE_CONFIG_GETPCACHE:case r.SQLITE_CONFIG_HEAP:case r.SQLITE_CONFIG_LOG:case r.SQLITE_CONFIG_MALLOC:case r.SQLITE_CONFIG_MMAP_SIZE:case r.SQLITE_CONFIG_MULTITHREAD:case r.SQLITE_CONFIG_MUTEX:case r.SQLITE_CONFIG_PAGECACHE:case r.SQLITE_CONFIG_PCACHE2:case r.SQLITE_CONFIG_PCACHE:case r.SQLITE_CONFIG_PCACHE_HDRSZ:case r.SQLITE_CONFIG_PMASZ:case r.SQLITE_CONFIG_SERIALIZED:case r.SQLITE_CONFIG_SINGLETHREAD:case r.SQLITE_CONFIG_SQLLOG:case r.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return r.SQLITE_NOTFOUND}};{const k=new Set;r.sqlite3_auto_extension=function(_){if(_ instanceof Function)_=i.installFunction("i(ppp)",_);else if(arguments.length!==1||!i.isPtr(_))return r.SQLITE_MISUSE;const d=i.exports.sqlite3_auto_extension(_);return _!==arguments[0]&&(d===0?k.add(_):i.uninstallFunction(_)),d},r.sqlite3_cancel_auto_extension=function(_){return!_||arguments.length!==1||!i.isPtr(_)?0:i.exports.sqlite3_cancel_auto_extension(_)},r.sqlite3_reset_auto_extension=function(){i.exports.sqlite3_reset_auto_extension();for(const _ of k)i.uninstallFunction(_);k.clear()}}const te=r.sqlite3_vfs_find("kvvfs");if(te)if(a.isUIThread()){const k=new r.sqlite3_kvvfs_methods(i.exports.sqlite3_wasm_kvvfs_methods());delete r.sqlite3_kvvfs_methods;const _=i.exports.sqlite3_wasm_kvvfsMakeKeyOnPstack,d=i.pstack,b=g=>i.peek(g)===115?sessionStorage:localStorage,A={xRead:(g,O,N,B)=>{const W=d.pointer,K=i.scopedAllocPush();try{const u=_(g,O);if(!u)return-3;const S=i.cstrToJs(u),x=b(g).getItem(S);if(!x)return-1;const M=x.length;if(B<=0)return M;if(B===1)return i.poke(N,0),M;const f=i.scopedAllocCString(x);return B>M+1&&(B=M+1),i.heap8u().copyWithin(N,f,f+B-1),i.poke(N+B-1,0),B-1}catch(u){return console.error("kvstorageRead()",u),-2}finally{d.restore(W),i.scopedAllocPop(K)}},xWrite:(g,O,N)=>{const B=d.pointer;try{const W=_(g,O);if(!W)return 1;const K=i.cstrToJs(W);return b(g).setItem(K,i.cstrToJs(N)),0}catch(W){return console.error("kvstorageWrite()",W),r.SQLITE_IOERR}finally{d.restore(B)}},xDelete:(g,O)=>{const N=d.pointer;try{const B=_(g,O);return B?(b(g).removeItem(i.cstrToJs(B)),0):1}catch(B){return console.error("kvstorageDelete()",B),r.SQLITE_IOERR}finally{d.restore(N)}}};for(const g of Object.keys(A))k[k.memberKey(g)]=i.installFunction(k.memberSignature(g),A[g])}else r.sqlite3_vfs_unregister(te);i.xWrap.FuncPtrAdapter.warnOnUse=!0}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){e.version={libVersion:"3.45.2",libVersionNumber:3045002,sourceId:"2024-03-12 11:06:23 d8cd6d49b46a395b13955387d05e9e1a2a47e54fb99f3c9b59835bbefad6af77",downloadVersion:3450200}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const s=(...f)=>{throw new e.SQLite3Error(...f)},r=e.capi,i=e.wasm,a=e.util,p=new WeakMap,E=new WeakMap,P=(f,y,l)=>{const c=Object.getOwnPropertyDescriptor(f,y);return c?c.value:l},z=function(f,y){return y&&(f instanceof _&&(f=f.pointer),s(y,"sqlite3 result code",y+":",f?r.sqlite3_errmsg(f):r.sqlite3_errstr(y))),arguments[0]},V=i.installFunction("i(ippp)",(function(f,y,l,c){r.SQLITE_TRACE_STMT===f&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+y+":",i.cstrToJs(c))}).bind({counter:0})),te=Object.create(null),k=function f(...y){if(!f._name2vfs){f._name2vfs=Object.create(null);const se=typeof importScripts=="function"?ue=>s("The VFS for",ue,"is only available in the main window thread."):!1;f._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:se||(()=>"local")},f._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:se||(()=>"session")}}const l=f.normalizeArgs(...y);let c=l.filename,q=l.vfs,w=l.flags;(typeof c!="string"&&typeof c!="number"||typeof w!="string"||q&&typeof q!="string"&&typeof q!="number")&&(e.config.error("Invalid DB ctor args",l,arguments),s("Invalid arguments for DB constructor."));let j=typeof c=="number"?i.cstrToJs(c):c;const J=f._name2vfs[j];J&&(q=J.vfs,c=j=J.filename(j));let ne,oe=0;w.indexOf("c")>=0&&(oe|=r.SQLITE_OPEN_CREATE|r.SQLITE_OPEN_READWRITE),w.indexOf("w")>=0&&(oe|=r.SQLITE_OPEN_READWRITE),oe===0&&(oe|=r.SQLITE_OPEN_READONLY),oe|=r.SQLITE_OPEN_EXRESCODE;const re=i.pstack.pointer;try{const se=i.pstack.allocPtr();let ue=r.sqlite3_open_v2(c,se,oe,q||0);ne=i.peekPtr(se),z(ne,ue),r.sqlite3_extended_result_codes(ne,1),w.indexOf("t")>=0&&r.sqlite3_trace_v2(ne,r.SQLITE_TRACE_STMT,V,ne)}catch(se){throw ne&&r.sqlite3_close_v2(ne),se}finally{i.pstack.restore(re)}this.filename=j,p.set(this,ne),E.set(this,Object.create(null));try{const se=r.sqlite3_js_db_vfs(ne);se||s("Internal error: cannot get VFS for new db handle.");const ue=te[se];ue instanceof Function?ue(this,e):ue&&z(ne,r.sqlite3_exec(ne,ue,0,0,0))}catch(se){throw this.close(),se}};k.setVfsPostOpenSql=function(f,y){te[f]=y},k.normalizeArgs=function(f=":memory:",y="c",l=null){const c={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(c,arguments[0]),c.flags===void 0&&(c.flags="c"),c.vfs===void 0&&(c.vfs=null),c.filename===void 0&&(c.filename=":memory:")):(c.filename=f,c.flags=y,c.vfs=l),c};const _=function(...f){k.apply(this,f)};_.dbCtorHelper=k;const d={null:1,number:2,string:3,boolean:4,blob:5};d.undefined==d.null,i.bigIntEnabled&&(d.bigint=d.number);const b=function(){d!==arguments[2]&&s(r.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],p.set(this,arguments[1]),this.parameterCount=r.sqlite3_bind_parameter_count(this.pointer)},A=function(f){return f.pointer||s("DB has been closed."),f},g=function(f,y){return(y!==(y|0)||y<0||y>=f.columnCount)&&s("Column index",y,"is out of range."),f},O=function(f,y){const l=Object.create(null);switch(l.opt=Object.create(null),y.length){case 1:typeof y[0]=="string"||a.isSQLableTypedArray(y[0])||Array.isArray(y[0])?l.sql=y[0]:y[0]&&typeof y[0]=="object"&&(l.opt=y[0],l.sql=l.opt.sql);break;case 2:l.sql=y[0],l.opt=y[1];break;default:s("Invalid argument count for exec().")}l.sql=a.flexibleString(l.sql),typeof l.sql!="string"&&s("Missing SQL argument or unsupported SQL value type.");const c=l.opt;switch(c.returnValue){case"resultRows":c.resultRows||(c.resultRows=[]),l.returnVal=()=>c.resultRows;break;case"saveSql":c.saveSql||(c.saveSql=[]),l.returnVal=()=>c.saveSql;break;case void 0:case"this":l.returnVal=()=>f;break;default:s("Invalid returnValue value:",c.returnValue)}if(!c.callback&&!c.returnValue&&c.rowMode!==void 0&&(c.resultRows||(c.resultRows=[]),l.returnVal=()=>c.resultRows),c.callback||c.resultRows)switch(c.rowMode===void 0?"array":c.rowMode){case"object":l.cbArg=q=>q.get(Object.create(null));break;case"array":l.cbArg=q=>q.get([]);break;case"stmt":Array.isArray(c.resultRows)&&s("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),l.cbArg=q=>q;break;default:if(a.isInt32(c.rowMode)){l.cbArg=q=>q.get(c.rowMode);break}else if(typeof c.rowMode=="string"&&c.rowMode.length>1&&c.rowMode[0]==="$"){const q=c.rowMode.substr(1);l.cbArg=w=>{const j=w.get(Object.create(null))[q];return j===void 0?s(r.SQLITE_NOTFOUND,"exec(): unknown result column:",q):j};break}s("Invalid rowMode:",c.rowMode)}return l},N=(f,y,l,...c)=>{const q=f.prepare(y);try{const w=q.bind(l).step()?q.get(...c):void 0;return q.reset(),w}finally{q.finalize()}},B=(f,y,l,c)=>f.exec({sql:y,bind:l,rowMode:c,returnValue:"resultRows"});_.checkRc=(f,y)=>z(f,y),_.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return A(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}const f=this.pointer;if(Object.keys(E.get(this)).forEach((y,l)=>{if(l&&l.pointer)try{l.finalize()}catch{}}),p.delete(this),E.delete(this),r.sqlite3_close_v2(f),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(f=!1,y=!1){const l=A(this).pointer;return f?y?r.sqlite3_total_changes64(l):r.sqlite3_total_changes(l):y?r.sqlite3_changes64(l):r.sqlite3_changes(l)},dbFilename:function(f="main"){return r.sqlite3_db_filename(A(this).pointer,f)},dbName:function(f=0){return r.sqlite3_db_name(A(this).pointer,f)},dbVfsName:function(f=0){let y;const l=r.sqlite3_js_db_vfs(A(this).pointer,f);if(l){const c=new r.sqlite3_vfs(l);try{y=i.cstrToJs(c.$zName)}finally{c.dispose()}}return y},prepare:function(f){A(this);const y=i.pstack.pointer;let l,c;try{l=i.pstack.alloc(8),_.checkRc(this,r.sqlite3_prepare_v2(this.pointer,f,-1,l,null)),c=i.peekPtr(l)}finally{i.pstack.restore(y)}c||s("Cannot prepare empty SQL.");const q=new b(this,c,d);return E.get(this)[c]=q,q},exec:function(){A(this);const f=O(this,arguments);if(!f.sql)return s("exec() requires an SQL string.");const y=f.opt,l=y.callback,c=Array.isArray(y.resultRows)?y.resultRows:void 0;let q,w=y.bind,j=!!(f.cbArg||y.columnNames||c);const J=i.scopedAllocPush(),ne=Array.isArray(y.saveSql)?y.saveSql:void 0;try{const oe=a.isSQLableTypedArray(f.sql);let re=oe?f.sql.byteLength:i.jstrlen(f.sql);const se=i.scopedAlloc(2*i.ptrSizeof+(re+1)),ue=se+i.ptrSizeof;let fe=ue+i.ptrSizeof;const be=fe+re;for(oe?i.heap8().set(f.sql,fe):i.jstrcpy(f.sql,i.heap8(),fe,re,!1),i.poke(fe+re,0);fe&&i.peek(fe,"i8");){i.pokePtr([se,ue],0),_.checkRc(this,r.sqlite3_prepare_v3(this.pointer,fe,re,0,se,ue));const qe=i.peekPtr(se);if(fe=i.peekPtr(ue),re=be-fe,!!qe){if(ne&&ne.push(r.sqlite3_sql(qe).trim()),q=new b(this,qe,d),w&&q.parameterCount&&(q.bind(w),w=null),j&&q.columnCount){let Le=Array.isArray(y.columnNames)?0:1;if(j=!1,f.cbArg||c){for(;q.step();q._lockedByExec=!1){Le++===0&&q.getColumnNames(y.columnNames),q._lockedByExec=!0;const Ee=f.cbArg(q);if(c&&c.push(Ee),l&&l.call(y,Ee,q)===!1)break}q._lockedByExec=!1}Le===0&&q.getColumnNames(y.columnNames)}else q.step();q.reset().finalize(),q=null}}}finally{i.scopedAllocPop(J),q&&(delete q._lockedByExec,q.finalize())}return f.returnVal()},createFunction:function(y,l,c){const q=Ee=>Ee instanceof Function;switch(arguments.length){case 1:c=y,y=c.name,l=c.xFunc||0;break;case 2:q(l)||(c=l,l=c.xFunc||0);break}c||(c={}),typeof y!="string"&&s("Invalid arguments: missing function name.");let w=c.xStep||0,j=c.xFinal||0;const J=c.xValue||0,ne=c.xInverse||0;let oe;q(l)?(oe=!1,(q(w)||q(j))&&s("Ambiguous arguments: scalar or aggregate?"),w=j=null):q(w)?(q(j)||s("Missing xFinal() callback for aggregate or window UDF."),l=null):q(j)?s("Missing xStep() callback for aggregate or window UDF."):s("Missing function-type properties."),oe===!1?(q(J)||q(ne))&&s("xValue and xInverse are not permitted for non-window UDFs."):q(J)?(q(ne)||s("xInverse must be provided if xValue is."),oe=!0):q(ne)&&s("xValue must be provided if xInverse is.");const re=c.pApp;re!=null&&(typeof re!="number"||!a.isInt32(re))&&s("Invalid value for pApp property. Must be a legal WASM pointer value.");const se=c.xDestroy||0;se&&!q(se)&&s("xDestroy property must be a function.");let ue=0;P(c,"deterministic")&&(ue|=r.SQLITE_DETERMINISTIC),P(c,"directOnly")&&(ue|=r.SQLITE_DIRECTONLY),P(c,"innocuous")&&(ue|=r.SQLITE_INNOCUOUS),y=y.toLowerCase();const fe=l||w,be=P(c,"arity"),qe=typeof be=="number"?be:fe.length?fe.length-1:0;let Le;return oe?Le=r.sqlite3_create_window_function(this.pointer,y,qe,r.SQLITE_UTF8|ue,re||0,w,j,J,ne,se):Le=r.sqlite3_create_function_v2(this.pointer,y,qe,r.SQLITE_UTF8|ue,re||0,l,w,j,se),_.checkRc(this,Le),this},selectValue:function(f,y,l){return N(this,f,y,0,l)},selectValues:function(f,y,l){const c=this.prepare(f),q=[];try{for(c.bind(y);c.step();)q.push(c.get(0,l));c.reset()}finally{c.finalize()}return q},selectArray:function(f,y){return N(this,f,y,[])},selectObject:function(f,y){return N(this,f,y,{})},selectArrays:function(f,y){return B(this,f,y,"array")},selectObjects:function(f,y){return B(this,f,y,"object")},openStatementCount:function(){return this.pointer?Object.keys(E.get(this)).length:0},transaction:function(f){let y="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&s(r.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),y+=" "+arguments[0],f=arguments[1]),A(this).exec(y);try{const l=f(this);return this.exec("COMMIT"),l}catch(l){throw this.exec("ROLLBACK"),l}},savepoint:function(f){A(this).exec("SAVEPOINT oo1");try{const y=f(this);return this.exec("RELEASE oo1"),y}catch(y){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),y}},checkRc:function(f){return z(this,f)}};const W=function(f){return f.pointer||s("Stmt has been closed."),f},K=function(f){let y=d[f==null?"null":typeof f];switch(y){case d.boolean:case d.null:case d.number:case d.string:return y;case d.bigint:if(i.bigIntEnabled)return y;default:return a.isBindableTypedArray(f)?d.blob:void 0}},u=function(f){return K(f)||s("Unsupported bind() argument type:",typeof f)},S=function(f,y){const l=typeof y=="number"?y:r.sqlite3_bind_parameter_index(f.pointer,y);return l===0||!a.isInt32(l)?s("Invalid bind() parameter name: "+y):(l<1||l>f.parameterCount)&&s("Bind index",y,"is out of range."),l},x=function(f,y){return f._lockedByExec&&s("Operation is illegal when statement is locked:",y),f},M=function f(y,l,c,q){x(W(y),"bind()"),f._||(f._tooBigInt=j=>s("BigInt value is too big to store without precision loss:",j),f._={string:function(j,J,ne,oe){const[re,se]=i.allocCString(ne,!0);return(oe?r.sqlite3_bind_blob:r.sqlite3_bind_text)(j.pointer,J,re,se,r.SQLITE_WASM_DEALLOC)}}),u(q),l=S(y,l);let w=0;switch(q==null?d.null:c){case d.null:w=r.sqlite3_bind_null(y.pointer,l);break;case d.string:w=f._.string(y,l,q,!1);break;case d.number:{let j;a.isInt32(q)?j=r.sqlite3_bind_int:typeof q=="bigint"?a.bigIntFits64(q)?i.bigIntEnabled?j=r.sqlite3_bind_int64:a.bigIntFitsDouble(q)?(q=Number(q),j=r.sqlite3_bind_double):f._tooBigInt(q):f._tooBigInt(q):(q=Number(q),i.bigIntEnabled&&Number.isInteger(q)?j=r.sqlite3_bind_int64:j=r.sqlite3_bind_double),w=j(y.pointer,l,q);break}case d.boolean:w=r.sqlite3_bind_int(y.pointer,l,q?1:0);break;case d.blob:{if(typeof q=="string"){w=f._.string(y,l,q,!0);break}else q instanceof ArrayBuffer?q=new Uint8Array(q):a.isBindableTypedArray(q)||s("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const j=i.alloc(q.byteLength||1);i.heap8().set(q.byteLength?q:[0],j),w=r.sqlite3_bind_blob(y.pointer,l,j,q.byteLength,r.SQLITE_WASM_DEALLOC);break}default:e.config.warn("Unsupported bind() argument type:",q),s("Unsupported bind() argument type: "+typeof q)}return w&&_.checkRc(y.db.pointer,w),y._mayGet=!1,y};b.prototype={finalize:function(){if(this.pointer){x(this,"finalize()");const f=r.sqlite3_finalize(this.pointer);return delete E.get(this.db)[this.pointer],p.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,f}},clearBindings:function(){return x(W(this),"clearBindings()"),r.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(f){x(this,"reset()"),f&&this.clearBindings();const y=r.sqlite3_reset(W(this).pointer);return this._mayGet=!1,z(this.db,y),this},bind:function(){W(this);let f,y;switch(arguments.length){case 1:f=1,y=arguments[0];break;case 2:f=arguments[0],y=arguments[1];break;default:s("Invalid bind() arguments.")}return y===void 0?this:(this.parameterCount||s("This statement has no bindable parameters."),this._mayGet=!1,y===null?M(this,f,d.null,y):Array.isArray(y)?(arguments.length!==1&&s("When binding an array, an index argument is not permitted."),y.forEach((l,c)=>M(this,c+1,u(l),l)),this):(y instanceof ArrayBuffer&&(y=new Uint8Array(y)),typeof y=="object"&&!a.isBindableTypedArray(y)?(arguments.length!==1&&s("When binding an object, an index argument is not permitted."),Object.keys(y).forEach(l=>M(this,l,u(y[l]),y[l])),this):M(this,f,u(y),y)))},bindAsBlob:function(f,y){W(this),arguments.length===1&&(y=f,f=1);const l=u(y);return d.string!==l&&d.blob!==l&&d.null!==l&&s("Invalid value type for bindAsBlob()"),M(this,f,d.blob,y)},step:function(){x(this,"step()");const f=r.sqlite3_step(W(this).pointer);switch(f){case r.SQLITE_DONE:return this._mayGet=!1;case r.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,e.config.warn("sqlite3_step() rc=",f,r.sqlite3_js_rc_str(f),"SQL =",r.sqlite3_sql(this.pointer)),_.checkRc(this.db.pointer,f)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const f=this.step();return this.reset(),f}finally{try{this.finalize()}catch{}}},get:function(f,y){if(W(this)._mayGet||s("Stmt.step() has not (recently) returned true."),Array.isArray(f)){let l=0;const c=this.columnCount;for(;l<c;)f[l]=this.get(l++);return f}else if(f&&typeof f=="object"){let l=0;const c=this.columnCount;for(;l<c;)f[r.sqlite3_column_name(this.pointer,l)]=this.get(l++);return f}switch(g(this,f),y===void 0?r.sqlite3_column_type(this.pointer,f):y){case r.SQLITE_NULL:return null;case r.SQLITE_INTEGER:if(i.bigIntEnabled){const l=r.sqlite3_column_int64(this.pointer,f);return l>=Number.MIN_SAFE_INTEGER&&l<=Number.MAX_SAFE_INTEGER?Number(l).valueOf():l}else{const l=r.sqlite3_column_double(this.pointer,f);return(l>Number.MAX_SAFE_INTEGER||l<Number.MIN_SAFE_INTEGER)&&s("Integer is out of range for JS integer range: "+l),a.isInt32(l)?l|0:l}case r.SQLITE_FLOAT:return r.sqlite3_column_double(this.pointer,f);case r.SQLITE_TEXT:return r.sqlite3_column_text(this.pointer,f);case r.SQLITE_BLOB:{const l=r.sqlite3_column_bytes(this.pointer,f),c=r.sqlite3_column_blob(this.pointer,f),q=new Uint8Array(l);return l&&q.set(i.heap8u().slice(c,c+l),0),l&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(q.buffer),q}default:s("Don't know how to translate","type of result column #"+f+".")}s("Not reached.")},getInt:function(f){return this.get(f,r.SQLITE_INTEGER)},getFloat:function(f){return this.get(f,r.SQLITE_FLOAT)},getString:function(f){return this.get(f,r.SQLITE_TEXT)},getBlob:function(f){return this.get(f,r.SQLITE_BLOB)},getJSON:function(f){const y=this.get(f,r.SQLITE_STRING);return y===null?y:JSON.parse(y)},getColumnName:function(f){return r.sqlite3_column_name(g(W(this),f).pointer,f)},getColumnNames:function(f=[]){g(W(this),0);const y=this.columnCount;for(let l=0;l<y;++l)f.push(r.sqlite3_column_name(this.pointer,l));return f},getParamIndex:function(f){return W(this).parameterCount?r.sqlite3_bind_parameter_index(this.pointer,f):void 0}};{const f={enumerable:!0,get:function(){return p.get(this)},set:()=>s("The pointer property is read-only.")};Object.defineProperty(b.prototype,"pointer",f),Object.defineProperty(_.prototype,"pointer",f)}if(Object.defineProperty(b.prototype,"columnCount",{enumerable:!1,get:function(){return r.sqlite3_column_count(this.pointer)},set:()=>s("The columnCount property is read-only.")}),e.oo1={DB:_,Stmt:b},a.isUIThread()){e.oo1.JsStorageDb=function(y="session"){y!=="session"&&y!=="local"&&s("JsStorageDb db name must be one of 'session' or 'local'."),k.call(this,{filename:y,flags:"c",vfs:"kvvfs"})};const f=e.oo1.JsStorageDb;f.prototype=Object.create(_.prototype),f.clearStorage=r.sqlite3_js_kvvfs_clear,f.prototype.clearStorage=function(){return f.clearStorage(A(this).filename)},f.storageSize=r.sqlite3_js_kvvfs_size,f.prototype.storageSize=function(){return f.storageSize(A(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){e.initWorker1API=(function(){const s=(..._)=>{throw new Error(_.join(" "))};globalThis.WorkerGlobalScope instanceof Function||s("initWorker1API() must be run from a Worker thread.");const r=this.sqlite3||s("Missing this.sqlite3 object."),i=r.oo1.DB,a=function(_){let d=p.idMap.get(_);return d||(d="db#"+ ++p.idSeq+"@"+_.pointer,p.idMap.set(_,d),d)},p={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(_){const d=new i(_);return this.dbs[a(d)]=d,this.dbList.indexOf(d)<0&&this.dbList.push(d),d},close:function(_,d){if(_){delete this.dbs[a(_)];const b=_.filename,A=r.wasm.sqlite3_wasm_db_vfs(_.pointer,0);_.close();const g=this.dbList.indexOf(_);g>=0&&this.dbList.splice(g,1),d&&b&&A&&r.wasm.sqlite3_wasm_vfs_unlink(A,b)}},post:function(_,d){d&&d.length?(globalThis.postMessage(_,Array.from(d)),d.length=0):globalThis.postMessage(_)},dbs:Object.create(null),getDb:function(_,d=!0){return this.dbs[_]||(d?s("Unknown (or closed) DB ID:",_):void 0)}},E=function(_=p.dbList[0]){return _&&_.pointer?_:s("DB is not opened.")},P=function(_,d=!0){const b=p.getDb(_.dbId,!1)||p.dbList[0];return d?E(b):b},z=function(){return p.dbList[0]&&a(p.dbList[0])},V=function(_){const d=/^file:.+(vfs=(\w+))/.exec(_);return r.capi.sqlite3_vfs_find(d?d[2]:0)},te=_=>_===""||_[0]===":",k={open:function(_){const d=Object.create(null),b=_.args||Object.create(null);b.simulateError&&s("Throwing because of simulateError flag.");const A=Object.create(null);let g,O;if(d.vfs=b.vfs,te(b.filename)?d.filename=b.filename||"":(d.filename=b.filename,g=b.byteArray,g&&(O=V(b.filename))),O){let B;try{B=r.wasm.allocFromTypedArray(g);const W=r.wasm.sqlite3_wasm_vfs_create_file(O,d.filename,B,g.byteLength);W&&r.SQLite3Error.toss(W)}catch(W){throw new r.SQLite3Error(W.name+" creating "+b.filename+": "+W.message,{cause:W})}finally{B&&r.wasm.dealloc(B)}}const N=p.open(d);return A.filename=N.filename,A.persistent=!!r.capi.sqlite3_js_db_uses_vfs(N.pointer,"opfs"),A.dbId=a(N),A.vfs=N.dbVfsName(),A},close:function(_){const d=P(_,!1),b={filename:d&&d.filename};if(d){const A=_.args&&typeof _.args=="object"?!!_.args.unlink:!1;p.close(d,A)}return b},exec:function(_){const d=typeof _.args=="string"?{sql:_.args}:_.args||Object.create(null);d.rowMode==="stmt"?s("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):d.sql||s("'exec' requires input SQL.");const b=P(_);(d.callback||Array.isArray(d.resultRows))&&(b._blobXfer=p.xfer);const A=d.callback;let g=0;const O=!!d.columnNames;typeof A=="string"&&(O||(d.columnNames=[]),d.callback=function(N,B){p.post({type:A,columnNames:d.columnNames,rowNumber:++g,row:N},p.xfer)});try{const N=d.countChanges?b.changes(!0,d.countChanges===64):void 0;b.exec(d),N!==void 0&&(d.changeCount=b.changes(!0,d.countChanges===64)-N),d.callback instanceof Function&&(d.callback=A,p.post({type:A,columnNames:d.columnNames,rowNumber:null,row:void 0}))}finally{delete b._blobXfer,d.callback&&(d.callback=A)}return d},"config-get":function(){const _=Object.create(null),d=r.config;return["bigIntEnabled"].forEach(function(b){Object.getOwnPropertyDescriptor(d,b)&&(_[b]=d[b])}),_.version=r.version,_.vfsList=r.capi.sqlite3_js_vfs_list(),_.opfsEnabled=!!r.opfs,_},export:function(_){const d=P(_),b={byteArray:r.capi.sqlite3_js_db_export(d.pointer),filename:d.filename,mimetype:"application/x-sqlite3"};return p.xfer.push(b.byteArray.buffer),b},toss:function(_){s("Testing worker exception")},"opfs-tree":async function(_){return r.opfs||s("OPFS support is unavailable."),await r.opfs.treeList()}};globalThis.onmessage=async function(_){_=_.data;let d,b=_.dbId,A=_.type;const g=performance.now();try{k.hasOwnProperty(A)&&k[A]instanceof Function?d=await k[A](_):s("Unknown db worker message type:",_.type)}catch(O){A="error",d={operation:_.type,message:O.message,errorClass:O.name,input:_},O.stack&&(d.stack=typeof O.stack=="string"?O.stack.split(/\n\s*/):O.stack)}b||(b=d.dbId||z()),p.post({type:A,dbId:b,messageId:_.messageId,workerReceivedTime:g,workerRespondTime:performance.now(),departureTime:_.departureTime,result:d},p.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}).bind({sqlite3:e})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const s=e.wasm,r=e.capi,i=e.util.toss3,a=Object.create(null),p=Object.create(null),E=e.StructBinder;e.vfs=a,e.vtab=p;const P=r.sqlite3_index_info;P.prototype.nthConstraint=function(_,d=!1){if(_<0||_>=this.$nConstraint)return!1;const b=this.$aConstraint+P.sqlite3_index_constraint.structInfo.sizeof*_;return d?b:new P.sqlite3_index_constraint(b)},P.prototype.nthConstraintUsage=function(_,d=!1){if(_<0||_>=this.$nConstraint)return!1;const b=this.$aConstraintUsage+P.sqlite3_index_constraint_usage.structInfo.sizeof*_;return d?b:new P.sqlite3_index_constraint_usage(b)},P.prototype.nthOrderBy=function(_,d=!1){if(_<0||_>=this.$nOrderBy)return!1;const b=this.$aOrderBy+P.sqlite3_index_orderby.structInfo.sizeof*_;return d?b:new P.sqlite3_index_orderby(b)};const z=function _(d,b,A,g=_.installMethodArgcCheck){if(d instanceof E.StructType?!(A instanceof Function)&&!s.isPtr(A)&&i("Usage errror: expecting a Function or WASM pointer to one."):i("Usage error: target object is-not-a StructType."),arguments.length===1)return(W,K)=>_(d,W,K,g);_.argcProxy||(_.argcProxy=function(W,K,u,S){return function(...x){return u.length!==arguments.length&&i("Argument mismatch for",W.structInfo.name+"::"+K+": Native signature is:",S),u.apply(this,x)}},_.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((W,K)=>{if(typeof W=="number")try{s.uninstallFunction(W)}catch{}}),delete this.ondispose.__removeFuncList)});const O=d.memberSignature(b);O.length<2&&i("Member",b,"does not have a function pointer signature:",O);const N=d.memberKey(b),B=g&&!s.isPtr(A)?_.argcProxy(d,N,A,O):A;if(s.isPtr(B))B&&!s.functionEntry(B)&&i("Pointer",B,"is not a WASM function table entry."),d[N]=B;else{const W=s.installFunction(B,d.memberSignature(b,!0));d[N]=W,(!d.ondispose||!d.ondispose.__removeFuncList)&&(d.addOnDispose("ondispose.__removeFuncList handler",_.removeFuncList),d.ondispose.__removeFuncList=[]),d.ondispose.__removeFuncList.push(N,W)}return(W,K)=>_(d,W,K,g)};z.installMethodArgcCheck=!1;const V=function(_,d,b=z.installMethodArgcCheck){const A=new Map;for(const g of Object.keys(d)){const O=d[g],N=A.get(O);if(N){const B=_.memberKey(g);_[B]=_[_.memberKey(N)]}else z(_,g,O,b),A.set(O,g)}return _};E.StructType.prototype.installMethod=function(d,b,A=z.installMethodArgcCheck){return arguments.length<3&&d&&typeof d=="object"?V(this,...arguments):z(this,...arguments)},E.StructType.prototype.installMethods=function(_,d=z.installMethodArgcCheck){return V(this,_,d)},r.sqlite3_vfs.prototype.registerVfs=function(_=!1){this instanceof e.capi.sqlite3_vfs||i("Expecting a sqlite3_vfs-type argument.");const d=r.sqlite3_vfs_register(this,_?1:0);return d&&i("sqlite3_vfs_register(",this,") failed with rc",d),this.pointer!==r.sqlite3_vfs_find(this.$zName)&&i("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},a.installVfs=function(_){let d=0;const b=["io","vfs"];for(const A of b){const g=_[A];g&&(++d,V(g.struct,g.methods,!!g.applyArgcCheck),A==="vfs"&&(!g.struct.$zName&&typeof g.name=="string"&&g.struct.addOnDispose(g.struct.$zName=s.allocCString(g.name)),g.struct.registerVfs(!!g.asDefault)))}return d||i("Misuse: installVfs() options object requires at least","one of:",b),this};const te=function(_,d){return(function(b,A=!1){if(arguments.length===0&&(b=new d),b instanceof d)return this.set(b.pointer,b),b;s.isPtr(b)||e.SQLite3Error.toss("Invalid argument to",_+"()");let g=this.get(b);return A&&this.delete(b),g}).bind(new Map)},k=function(_,d){const b=te(_,d);return Object.assign(Object.create(null),{StructType:d,create:A=>{const g=b();return s.pokePtr(A,g.pointer),g},get:A=>b(A),unget:A=>b(A,!0),dispose:A=>{const g=b(A,!0);g&&g.dispose()}})};p.xVtab=k("xVtab",r.sqlite3_vtab),p.xCursor=k("xCursor",r.sqlite3_vtab_cursor),p.xIndexInfo=_=>new r.sqlite3_index_info(_),p.xError=function _(d,b,A){if(_.errorReporter instanceof Function)try{_.errorReporter("sqlite3_module::"+d+"(): "+b.message)}catch{}let g;return b instanceof e.WasmAllocError?g=r.SQLITE_NOMEM:arguments.length>2?g=A:b instanceof e.SQLite3Error&&(g=b.resultCode),g||r.SQLITE_ERROR},p.xError.errorReporter=console.error.bind(console),p.xRowid=(_,d)=>s.poke(_,d,"i64"),p.setupModule=function(_){let d=!1;const b=this instanceof r.sqlite3_module?this:_.struct||(d=new r.sqlite3_module);try{const A=_.methods||i("Missing 'methods' object.");for(const g of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const O=g[0],N=g[1];A[O]===!0?A[O]=A[N]:A[N]===!0&&(A[N]=A[O])}if(_.catchExceptions){const g=function(B,W){return["xConnect","xCreate"].indexOf(B)>=0?function(K,u,S,x,M,f){try{return W(...arguments)||0}catch(y){return y instanceof e.WasmAllocError||(s.dealloc(s.peekPtr(f)),s.pokePtr(f,s.allocCString(y.message))),p.xError(B,y)}}:function(...K){try{return W(...K)||0}catch(u){return p.xError(B,u)}}},O=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],N=Object.create(null);for(const B of O){const W=A[B];if(W instanceof Function)B==="xConnect"&&A.xCreate===W?N[B]=A.xCreate:B==="xCreate"&&A.xConnect===W?N[B]=A.xConnect:N[B]=g(B,W);else continue}V(b,N,!1)}else V(b,A,!!_.applyArgcCheck);if(b.$iVersion===0){let g;typeof _.iVersion=="number"?g=_.iVersion:b.$xShadowName?g=3:b.$xSavePoint||b.$xRelease||b.$xRollbackTo?g=2:g=1,b.$iVersion=g}}catch(A){throw d&&d.dispose(),A}return b},r.sqlite3_module.prototype.setupModule=function(_){return p.setupModule.call(this,_)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const s=function r(i){var E;if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!((E=navigator==null?void 0:navigator.storage)!=null&&E.getDirectory))return Promise.reject(new Error("Missing required OPFS APIs."));(!i||typeof i!="object")&&(i=Object.create(null));const a=new URL(globalThis.location.href).searchParams;return a.has("opfs-disable")?Promise.resolve(e):(i.verbose===void 0&&(i.verbose=a.has("opfs-verbose")?+a.get("opfs-verbose")||2:1),i.sanityChecks===void 0&&(i.sanityChecks=a.has("opfs-sanity-check")),i.proxyUri===void 0&&(i.proxyUri=r.defaultProxyUri),typeof i.proxyUri=="function"&&(i.proxyUri=i.proxyUri()),new Promise(function(P,z){const V=[e.config.error,e.config.warn,e.config.log],te=(F,...C)=>{i.verbose>F&&V[F]("OPFS syncer:",...C)},k=(...F)=>te(2,...F),_=(...F)=>te(1,...F),d=(...F)=>te(0,...F),b=e.util.toss,A=e.capi,g=e.util,O=e.wasm,N=A.sqlite3_vfs,B=A.sqlite3_file,W=A.sqlite3_io_methods,K=Object.create(null),u=()=>{var F;return globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&((F=navigator==null?void 0:navigator.storage)==null?void 0:F.getDirectory)};K.metrics={dump:function(){let F,C=0,R=0,$=0;for(F in w.opIds){const H=j[F];C+=H.count,R+=H.time,$+=H.wait,H.avgTime=H.count&&H.time?H.time/H.count:0,H.avgWait=H.count&&H.wait?H.wait/H.count:0}e.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",j,`
Total of`,C,"op(s) for",R,"ms (incl. "+$+" ms of waiting on the async side)"),e.config.log("Serialization metrics:",j.s11n),l.postMessage({type:"opfs-async-metrics"})},reset:function(){let F;const C=$=>$.count=$.time=$.wait=0;for(F in w.opIds)C(j[F]=Object.create(null));let R=j.s11n=Object.create(null);R=R.serialize=Object.create(null),R.count=R.time=0,R=j.s11n.deserialize=Object.create(null),R.count=R.time=0}};const S=new W,x=new N().addOnDispose(()=>S.dispose());let M;const f=F=>(M=!0,x.dispose(),z(F)),y=()=>(M=!1,P(e)),l=new Worker(new URL(""+new URL("sqlite3-opfs-async-proxy-BlD9cCm_.js",self.location.href).href,self.location.href));setTimeout(()=>{M===void 0&&f(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),l._originalOnError=l.onerror,l.onerror=function(F){d("Error initializing OPFS asyncer:",F),f(new Error("Loading OPFS async Worker failed for unknown reasons."))};const c=A.sqlite3_vfs_find(null),q=c?new N(c):null;S.$iVersion=1,x.$iVersion=2,x.$szOsFile=A.sqlite3_file.structInfo.sizeof,x.$mxPathname=1024,x.$zName=O.allocCString("opfs"),x.$xDlOpen=x.$xDlError=x.$xDlSym=x.$xDlClose=null,x.addOnDispose("$zName",x.$zName,"cleanup default VFS wrapper",()=>q?q.dispose():null);const w=Object.create(null);w.verbose=i.verbose,w.littleEndian=(()=>{const F=new ArrayBuffer(2);return new DataView(F).setInt16(0,256,!0),new Int16Array(F)[0]===256})(),w.asyncIdleWaitTime=150,w.asyncS11nExceptions=1,w.fileBufferSize=1024*64,w.sabS11nOffset=w.fileBufferSize,w.sabS11nSize=x.$mxPathname*2,w.sabIO=new SharedArrayBuffer(w.fileBufferSize+w.sabS11nSize),w.opIds=Object.create(null);const j=Object.create(null);{let F=0;w.opIds.whichOp=F++,w.opIds.rc=F++,w.opIds.xAccess=F++,w.opIds.xClose=F++,w.opIds.xDelete=F++,w.opIds.xDeleteNoWait=F++,w.opIds.xFileSize=F++,w.opIds.xLock=F++,w.opIds.xOpen=F++,w.opIds.xRead=F++,w.opIds.xSleep=F++,w.opIds.xSync=F++,w.opIds.xTruncate=F++,w.opIds.xUnlock=F++,w.opIds.xWrite=F++,w.opIds.mkdir=F++,w.opIds["opfs-async-metrics"]=F++,w.opIds["opfs-async-shutdown"]=F++,w.opIds.retry=F++,w.sabOP=new SharedArrayBuffer(F*4),K.metrics.reset()}w.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(F=>{(w.sq3Codes[F]=A[F])===void 0&&b("Maintenance required: not found:",F)}),w.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,defaultUnlockAsap:!1});const J=(F,...C)=>{const R=w.opIds[F]||b("Invalid op ID:",F);w.s11n.serialize(...C),Atomics.store(w.sabOPView,w.opIds.rc,-1),Atomics.store(w.sabOPView,w.opIds.whichOp,R),Atomics.notify(w.sabOPView,w.opIds.whichOp);const $=performance.now();Atomics.wait(w.sabOPView,w.opIds.rc,-1);const H=Atomics.load(w.sabOPView,w.opIds.rc);if(j[F].wait+=performance.now()-$,H&&w.asyncS11nExceptions){const X=w.s11n.deserialize();X&&d(F+"() async error:",...X)}return H};K.debug={asyncShutdown:()=>{_("Shutting down OPFS async listener. The OPFS VFS will no longer work."),J("opfs-async-shutdown")},asyncRestart:()=>{_("Attempting to restart OPFS VFS async listener. Might work, might not."),l.postMessage({type:"opfs-async-restart"})}};const ne=()=>{if(w.s11n)return w.s11n;const F=new TextDecoder,C=new TextEncoder("utf-8"),R=new Uint8Array(w.sabIO,w.sabS11nOffset,w.sabS11nSize),$=new DataView(w.sabIO,w.sabS11nOffset,w.sabS11nSize);w.s11n=Object.create(null);const H=Object.create(null);H.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},H.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},H.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},H.string={id:4};const X=h=>H[typeof h]||b("Maintenance required: this value type cannot be serialized.",h),U=h=>{switch(h){case H.number.id:return H.number;case H.bigint.id:return H.bigint;case H.boolean.id:return H.boolean;case H.string.id:return H.string;default:b("Invalid type ID:",h)}};return w.s11n.deserialize=function(h=!1){++j.s11n.deserialize.count;const m=performance.now(),I=R[0],T=I?[]:null;if(I){const D=[];let G=1,ee,ae,pe;for(ee=0;ee<I;++ee,++G)D.push(U(R[G]));for(ee=0;ee<I;++ee){const Me=D[ee];Me.getter?(pe=$[Me.getter](G,w.littleEndian),G+=Me.size):(ae=$.getInt32(G,w.littleEndian),G+=4,pe=F.decode(R.slice(G,G+ae)),G+=ae),T.push(pe)}}return h&&(R[0]=0),j.s11n.deserialize.time+=performance.now()-m,T},w.s11n.serialize=function(...h){const m=performance.now();if(++j.s11n.serialize.count,h.length){const I=[];let T=0,D=1;for(R[0]=h.length&255;T<h.length;++T,++D)I.push(X(h[T])),R[D]=I[T].id;for(T=0;T<h.length;++T){const G=I[T];if(G.setter)$[G.setter](D,h[T],w.littleEndian),D+=G.size;else{const ee=C.encode(h[T]);$.setInt32(D,ee.byteLength,w.littleEndian),D+=4,R.set(ee,D),D+=ee.byteLength}}}else R[0]=0;j.s11n.serialize.time+=performance.now()-m},w.s11n},oe=function F(C=16){F._chars||(F._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",F._n=F._chars.length);const R=[];let $=0;for(;$<C;++$){const H=Math.random()*(F._n*64)%F._n|0;R[$]=F._chars[H]}return R.join("")},re=Object.create(null),se=Object.create(null);se.op=void 0,se.start=void 0;const ue=F=>{se.start=performance.now(),se.op=F,++j[F].count},fe=()=>j[se.op].time+=performance.now()-se.start,be={xCheckReservedLock:function(F,C){const R=re[F];return O.poke(C,R.lockType?1:0,"i32"),0},xClose:function(F){ue("xClose");let C=0;const R=re[F];return R&&(delete re[F],C=J("xClose",F),R.sq3File&&R.sq3File.dispose()),fe(),C},xDeviceCharacteristics:function(F){return A.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(F,C,R){return A.SQLITE_NOTFOUND},xFileSize:function(F,C){ue("xFileSize");let R=J("xFileSize",F);if(R==0)try{const $=w.s11n.deserialize()[0];O.poke(C,$,"i64")}catch($){d("Unexpected error reading xFileSize() result:",$),R=w.sq3Codes.SQLITE_IOERR}return fe(),R},xLock:function(F,C){ue("xLock");const R=re[F];let $=0;return R.lockType?R.lockType=C:($=J("xLock",F,C),$===0&&(R.lockType=C)),fe(),$},xRead:function(F,C,R,$){ue("xRead");const H=re[F];let X;try{X=J("xRead",F,R,Number($)),(X===0||A.SQLITE_IOERR_SHORT_READ===X)&&O.heap8u().set(H.sabView.subarray(0,R),C)}catch(U){d("xRead(",arguments,") failed:",U,H),X=A.SQLITE_IOERR_READ}return fe(),X},xSync:function(F,C){ue("xSync"),++j.xSync.count;const R=J("xSync",F,C);return fe(),R},xTruncate:function(F,C){ue("xTruncate");const R=J("xTruncate",F,Number(C));return fe(),R},xUnlock:function(F,C){ue("xUnlock");const R=re[F];let $=0;return A.SQLITE_LOCK_NONE===C&&R.lockType&&($=J("xUnlock",F,C)),$===0&&(R.lockType=C),fe(),$},xWrite:function(F,C,R,$){ue("xWrite");const H=re[F];let X;try{H.sabView.set(O.heap8u().subarray(C,C+R)),X=J("xWrite",F,R,Number($))}catch(U){d("xWrite(",arguments,") failed:",U,H),X=A.SQLITE_IOERR_WRITE}return fe(),X}},qe={xAccess:function(F,C,R,$){ue("xAccess");const H=J("xAccess",O.cstrToJs(C));return O.poke($,H?0:1,"i32"),fe(),0},xCurrentTime:function(F,C){return O.poke(C,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(F,C){return O.poke(C,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(F,C,R){ue("xDelete");const $=J("xDelete",O.cstrToJs(C),R,!1);return fe(),$},xFullPathname:function(F,C,R,$){return O.cstrncpy($,C,R)<R?0:A.SQLITE_CANTOPEN},xGetLastError:function(F,C,R){return _("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(C,R,$,H,X){ue("xOpen");let U=0;R===0?R=oe():typeof R=="number"&&(A.sqlite3_uri_boolean(R,"opfs-unlock-asap",0)&&(U|=w.opfsFlags.OPFS_UNLOCK_ASAP),R=O.cstrToJs(R));const h=Object.create(null);h.fid=$,h.filename=R,h.sab=new SharedArrayBuffer(w.fileBufferSize),h.flags=H;const m=J("xOpen",$,R,H,U);return m||(h.readOnly&&O.poke(X,A.SQLITE_OPEN_READONLY,"i32"),re[$]=h,h.sabView=w.sabFileBufView,h.sq3File=new B($),h.sq3File.$pMethods=S.pointer,h.lockType=A.SQLITE_LOCK_NONE),fe(),m}};q&&(x.$xRandomness=q.$xRandomness,x.$xSleep=q.$xSleep),x.$xRandomness||(qe.xRandomness=function(F,C,R){const $=O.heap8u();let H=0;for(;H<C;++H)$[R+H]=Math.random()*255e3&255;return H}),x.$xSleep||(qe.xSleep=function(F,C){return Atomics.wait(w.sabOPView,w.opIds.xSleep,0,C),0}),K.getResolvedPath=function(F,C){const R=new URL(F,"file://irrelevant").pathname;return C?R.split("/").filter($=>!!$):R},K.getDirForFilename=async function(C,R=!1){const $=K.getResolvedPath(C,!0),H=$.pop();let X=K.rootDirectory;for(const U of $)U&&(X=await X.getDirectoryHandle(U,{create:!!R}));return[X,H]},K.mkdir=async function(F){try{return await K.getDirForFilename(F+"/filepart",!0),!0}catch{return!1}},K.entryExists=async function(F){try{const[C,R]=await K.getDirForFilename(F);return await C.getFileHandle(R),!0}catch{return!1}},K.randomFilename=oe,K.registerVfs=(F=!1)=>O.exports.sqlite3_vfs_register(x.pointer,F?1:0),K.treeList=async function(){const F=async function R($,H){H.name=$.name,H.dirs=[],H.files=[];for await(const X of $.values())if(X.kind==="directory"){const U=Object.create(null);H.dirs.push(U),await R(X,U)}else H.files.push(X.name)},C=Object.create(null);return await F(K.rootDirectory,C),C},K.rmfr=async function(){const F=K.rootDirectory,C={recurse:!0};for await(const R of F.values())F.removeEntry(R.name,C)},K.unlink=async function(F,C=!1,R=!1){try{const[$,H]=await K.getDirForFilename(F,!1);return await $.removeEntry(H,{recursive:C}),!0}catch($){if(R)throw new Error("unlink(",arguments[0],") failed: "+$.message,{cause:$});return!1}},K.traverse=async function(F){const C={recursive:!0,directory:K.rootDirectory};typeof F=="function"&&(F={callback:F}),F=Object.assign(C,F||{}),async function $(H,X){for await(const U of H.values()){if(F.callback(U,H,X)===!1)return!1;if(F.recursive&&U.kind==="directory"&&await $(U,X+1)===!1)break}}(F.directory,0)};const Le=async function(F,C){const[R,$]=await K.getDirForFilename(F,!0);let X=await(await R.getFileHandle($,{create:!0})).createSyncAccessHandle(),U=0,h,m=!1;try{for(X.truncate(0);(h=await C())!==void 0;)h instanceof ArrayBuffer&&(h=new Uint8Array(h)),U===0&&h.byteLength>=15&&(g.affirmDbHeader(h),m=!0),X.write(h,{at:U}),U+=h.byteLength;if((U<512||U%512!==0)&&b("Input size",U,"is not correct for an SQLite database."),!m){const I=new Uint8Array(20);X.read(I,{at:0}),g.affirmDbHeader(I)}return X.write(new Uint8Array([1,1]),{at:18}),U}catch(I){throw await X.close(),X=void 0,await R.removeEntry($).catch(()=>{}),I}finally{X&&await X.close()}};if(K.importDb=async function(F,C){if(C instanceof Function)return Le(F,C);C instanceof ArrayBuffer&&(C=new Uint8Array(C)),g.affirmIsDb(C);const R=C.byteLength,[$,H]=await K.getDirForFilename(F,!0);let X,U=0;try{return X=await(await $.getFileHandle(H,{create:!0})).createSyncAccessHandle(),X.truncate(0),U=X.write(C,{at:0}),U!=R&&b("Expected to write "+R+" bytes but wrote "+U+"."),X.write(new Uint8Array([1,1]),{at:18}),U}catch(h){throw X&&(await X.close(),X=void 0),await $.removeEntry(H).catch(()=>{}),h}finally{X&&await X.close()}},e.oo1){const F=function(...C){const R=e.oo1.DB.dbCtorHelper.normalizeArgs(...C);R.vfs=x.$zName,e.oo1.DB.dbCtorHelper.call(this,R)};F.prototype=Object.create(e.oo1.DB.prototype),e.oo1.OpfsDb=F,F.importDb=K.importDb,e.oo1.DB.dbCtorHelper.setVfsPostOpenSql(x.pointer,function(C,R){R.capi.sqlite3_busy_timeout(C,1e4),R.capi.sqlite3_exec(C,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)})}const Ee=function(){const F=O.scopedAllocPush(),C=new B;try{const R=C.pointer,$=A.SQLITE_OPEN_CREATE|A.SQLITE_OPEN_READWRITE|A.SQLITE_OPEN_MAIN_DB,H=O.scopedAlloc(8),X="/sanity/check/file"+oe(8),U=O.scopedAllocCString(X);let h;if(w.s11n.serialize("This is ä string."),h=w.s11n.deserialize(),k("deserialize() says:",h),h[0]!=="This is ä string."&&b("String d13n error."),qe.xAccess(x.pointer,U,0,H),h=O.peek(H,"i32"),k("xAccess(",X,") exists ?=",h),h=qe.xOpen(x.pointer,U,R,$,H),k("open rc =",h,"state.sabOPView[xOpen] =",w.sabOPView[w.opIds.xOpen]),h!==0){d("open failed with code",h);return}qe.xAccess(x.pointer,U,0,H),h=O.peek(H,"i32"),h||b("xAccess() failed to detect file."),h=be.xSync(C.pointer,0),h&&b("sync failed w/ rc",h),h=be.xTruncate(C.pointer,1024),h&&b("truncate failed w/ rc",h),O.poke(H,0,"i64"),h=be.xFileSize(C.pointer,H),h&&b("xFileSize failed w/ rc",h),k("xFileSize says:",O.peek(H,"i64")),h=be.xWrite(C.pointer,U,10,1),h&&b("xWrite() failed!");const m=O.scopedAlloc(16);h=be.xRead(C.pointer,m,6,2),O.poke(m+6,0);let I=O.cstrToJs(m);k("xRead() got:",I),I!=="sanity"&&b("Unexpected xRead() value."),qe.xSleep&&(k("xSleep()ing before close()ing..."),qe.xSleep(x.pointer,2e3),k("waking up from xSleep()")),h=be.xClose(R),k("xClose rc =",h,"sabOPView =",w.sabOPView),k("Deleting file:",X),qe.xDelete(x.pointer,U,4660),qe.xAccess(x.pointer,U,0,H),h=O.peek(H,"i32"),h&&b("Expecting 0 from xAccess(",X,") after xDelete()."),_("End of OPFS sanity checks.")}finally{C.dispose(),O.scopedAllocPop(F)}};l.onmessage=function({data:F}){switch(F.type){case"opfs-unavailable":f(new Error(F.payload.join(" ")));break;case"opfs-async-loaded":l.postMessage({type:"opfs-async-init",args:w});break;case"opfs-async-inited":{if(M===!0)break;try{e.vfs.installVfs({io:{struct:S,methods:be},vfs:{struct:x,methods:qe}}),w.sabOPView=new Int32Array(w.sabOP),w.sabFileBufView=new Uint8Array(w.sabIO,0,w.fileBufferSize),w.sabS11nView=new Uint8Array(w.sabIO,w.sabS11nOffset,w.sabS11nSize),ne(),i.sanityChecks&&(_("Running sanity checks because of opfs-sanity-check URL arg..."),Ee()),u()?navigator.storage.getDirectory().then(C=>{l.onerror=l._originalOnError,delete l._originalOnError,e.opfs=K,K.rootDirectory=C,k("End of OPFS sqlite3_vfs setup.",x),y()}).catch(f):y()}catch(C){d(C),f(C)}break}default:{const C="Unexpected message from the OPFS async worker: "+JSON.stringify(F);d(C),f(new Error(C));break}}}}))};s.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async r=>{try{let i=s.defaultProxyUri;return r.scriptInfo.sqlite3Dir&&(s.defaultProxyUri=r.scriptInfo.sqlite3Dir+i),s().catch(a=>{r.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",a.message)})}catch(i){return r.config.error("installOpfsVfs() exception:",i),Promise.reject(i)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){var re,se,ue,fe,be,qe,Le,Ee,F,C,R,$,bt,X;const s=e.util.toss,r=e.util.toss3,i=Object.create(null),a=e.capi,p=e.util,E=e.wasm,P=4096,z=512,V=4,te=8,k=z+V,_=z,d=k,b=P,A=a.SQLITE_OPEN_MAIN_DB|a.SQLITE_OPEN_MAIN_JOURNAL|a.SQLITE_OPEN_SUPER_JOURNAL|a.SQLITE_OPEN_WAL,g=".opaque",O=()=>Math.random().toString(36).slice(2),N=new TextDecoder,B=new TextEncoder,W=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2}),K=[e.config.error,e.config.warn,e.config.log];e.config.log;const u=e.config.warn;e.config.error;const S=new Map,x=U=>S.get(U),M=(U,h)=>{h?S.set(U,h):S.delete(U)},f=new Map,y=U=>f.get(U),l=(U,h)=>{h?f.set(U,h):f.delete(U)},c={xCheckReservedLock:function(U,h){const m=y(U);return m.log("xCheckReservedLock"),m.storeErr(),E.poke32(h,1),0},xClose:function(U){const h=y(U);h.storeErr();const m=h.getOFileForS3File(U);if(m)try{h.log(`xClose ${m.path}`),h.mapS3FileToOFile(U,!1),m.sah.flush(),m.flags&a.SQLITE_OPEN_DELETEONCLOSE&&h.deletePath(m.path)}catch(I){return h.storeErr(I,a.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(U){return a.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(U,h,m){return a.SQLITE_NOTFOUND},xFileSize:function(U,h){const m=y(U);m.log("xFileSize");const T=m.getOFileForS3File(U).sah.getSize()-b;return E.poke64(h,BigInt(T)),0},xLock:function(U,h){const m=y(U);m.log(`xLock ${h}`),m.storeErr();const I=m.getOFileForS3File(U);return I.lockType=h,0},xRead:function(U,h,m,I){const T=y(U);T.storeErr();const D=T.getOFileForS3File(U);T.log(`xRead ${D.path} ${m} @ ${I}`);try{const G=D.sah.read(E.heap8u().subarray(h,h+m),{at:b+Number(I)});return G<m?(E.heap8u().fill(0,h+G,h+m),a.SQLITE_IOERR_SHORT_READ):0}catch(G){return T.storeErr(G,a.SQLITE_IOERR)}},xSectorSize:function(U){return P},xSync:function(U,h){const m=y(U);m.log(`xSync ${h}`),m.storeErr();const I=m.getOFileForS3File(U);try{return I.sah.flush(),0}catch(T){return m.storeErr(T,a.SQLITE_IOERR)}},xTruncate:function(U,h){const m=y(U);m.log(`xTruncate ${h}`),m.storeErr();const I=m.getOFileForS3File(U);try{return I.sah.truncate(b+Number(h)),0}catch(T){return m.storeErr(T,a.SQLITE_IOERR)}},xUnlock:function(U,h){const m=y(U);m.log("xUnlock");const I=m.getOFileForS3File(U);return I.lockType=h,0},xWrite:function(U,h,m,I){const T=y(U);T.storeErr();const D=T.getOFileForS3File(U);T.log(`xWrite ${D.path} ${m} ${I}`);try{const G=D.sah.write(E.heap8u().subarray(h,h+m),{at:b+Number(I)});return m===G?0:s("Unknown write() failure.")}catch(G){return T.storeErr(G,a.SQLITE_IOERR)}}},q=new a.sqlite3_io_methods;q.$iVersion=1,e.vfs.installVfs({io:{struct:q,methods:c}});const w={xAccess:function(U,h,m,I){const T=x(U);T.storeErr();try{const D=T.getPath(h);E.poke32(I,T.hasFilename(D)?1:0)}catch{E.poke32(I,0)}return 0},xCurrentTime:function(U,h){return E.poke(h,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(U,h){return E.poke(h,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(U,h,m){const I=x(U);I.log(`xDelete ${E.cstrToJs(h)}`),I.storeErr();try{return I.deletePath(I.getPath(h)),0}catch(T){return I.storeErr(T),a.SQLITE_IOERR_DELETE}},xFullPathname:function(U,h,m,I){return E.cstrncpy(I,h,m)<m?0:a.SQLITE_CANTOPEN},xGetLastError:function(U,h,m){const I=x(U),T=I.popErr();if(I.log(`xGetLastError ${h} e =`,T),T){const D=E.scopedAllocPush();try{const[G,ee]=E.scopedAllocCString(T.message,!0);E.cstrncpy(m,G,h),ee>h&&E.poke8(m+h-1,0)}catch{return a.SQLITE_NOMEM}finally{E.scopedAllocPop(D)}}return T?T.sqlite3Rc||a.SQLITE_IOERR:0},xOpen:function(h,m,I,T,D){const G=x(h);try{G.log(`xOpen ${E.cstrToJs(m)} ${T}`);const ee=m&&E.peek8(m)?G.getPath(m):O();let ae=G.getSAHForPath(ee);!ae&&T&a.SQLITE_OPEN_CREATE&&(G.getFileCount()<G.getCapacity()?(ae=G.nextAvailableSAH(),G.setAssociatedPath(ae,ee,T)):s("SAH pool is full. Cannot create file",ee)),ae||s("file not found:",ee);const pe={path:ee,flags:T,sah:ae};G.mapS3FileToOFile(I,pe),pe.lockType=a.SQLITE_LOCK_NONE;const Me=new a.sqlite3_file(I);return Me.$pMethods=q.pointer,Me.dispose(),E.poke32(D,T),0}catch(ee){return G.storeErr(ee),a.SQLITE_CANTOPEN}}},j=function(U){e.capi.sqlite3_vfs_find(U)&&r("VFS name is already registered:",U);const h=new a.sqlite3_vfs,m=a.sqlite3_vfs_find(null),I=m?new a.sqlite3_vfs(m):null;return h.$iVersion=2,h.$szOsFile=a.sqlite3_file.structInfo.sizeof,h.$mxPathname=z,h.addOnDispose(h.$zName=E.allocCString(U),()=>M(h.pointer,0)),I&&(h.$xRandomness=I.$xRandomness,h.$xSleep=I.$xSleep,I.dispose()),!h.$xRandomness&&!w.xRandomness&&(w.xRandomness=function(T,D,G){const ee=E.heap8u();let ae=0;for(;ae<D;++ae)ee[G+ae]=Math.random()*255e3&255;return ae}),!h.$xSleep&&!w.xSleep&&(w.xSleep=(T,D)=>0),e.vfs.installVfs({vfs:{struct:h,methods:w}}),h};class J{constructor(h=Object.create(null)){Ce(this,$);ln(this,"vfsDir");Ce(this,re,void 0);Ce(this,se,void 0);Ce(this,ue,void 0);Ce(this,fe,new Map);Ce(this,be,new Map);Ce(this,qe,new Set);Ce(this,Le,new Map);Ce(this,Ee,new Uint8Array(k));Ce(this,F,void 0);Ce(this,C,void 0);Ce(this,R,void 0);Be(this,R,h.verbosity??W.verbosity),this.vfsName=h.name||W.name,Be(this,C,j(this.vfsName)),M(Y(this,C).pointer,this),this.vfsDir=h.directory||"."+this.vfsName,Be(this,F,new DataView(Y(this,Ee).buffer,Y(this,Ee).byteOffset)),this.isReady=this.reset(!!(h.clearOnInit??W.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(h.initialCapacity||W.initialCapacity)})}log(...h){yt(this,$,bt).call(this,2,...h)}warn(...h){yt(this,$,bt).call(this,1,...h)}error(...h){yt(this,$,bt).call(this,0,...h)}getVfs(){return Y(this,C)}getCapacity(){return Y(this,fe).size}getFileCount(){return Y(this,be).size}getFileNames(){const h=[],m=Y(this,be).keys();for(const I of m)h.push(I);return h}async addCapacity(h){for(let m=0;m<h;++m){const I=O(),D=await(await Y(this,se).getFileHandle(I,{create:!0})).createSyncAccessHandle();Y(this,fe).set(D,I),this.setAssociatedPath(D,"",0)}return this.getCapacity()}async reduceCapacity(h){let m=0;for(const I of Array.from(Y(this,qe))){if(m===h||this.getFileCount()===this.getCapacity())break;const T=Y(this,fe).get(I);I.close(),await Y(this,se).removeEntry(T),Y(this,fe).delete(I),Y(this,qe).delete(I),++m}return m}releaseAccessHandles(){for(const h of Y(this,fe).keys())h.close();Y(this,fe).clear(),Y(this,be).clear(),Y(this,qe).clear()}async acquireAccessHandles(h){const m=[];for await(const[I,T]of Y(this,se))T.kind==="file"&&m.push([I,T]);return Promise.all(m.map(async([I,T])=>{try{const D=await T.createSyncAccessHandle();if(Y(this,fe).set(D,I),h)D.truncate(b),this.setAssociatedPath(D,"",0);else{const G=this.getAssociatedPath(D);G?Y(this,be).set(G,D):Y(this,qe).add(D)}}catch(D){throw this.storeErr(D),this.releaseAccessHandles(),D}}))}getAssociatedPath(h){h.read(Y(this,Ee),{at:0});const m=Y(this,F).getUint32(_);if(Y(this,Ee)[0]&&(m&a.SQLITE_OPEN_DELETEONCLOSE||!(m&A)))return u(`Removing file with unexpected flags ${m.toString(16)}`,Y(this,Ee)),this.setAssociatedPath(h,"",0),"";const I=new Uint32Array(te/4);h.read(I,{at:d});const T=this.computeDigest(Y(this,Ee));if(I.every((D,G)=>D===T[G])){const D=Y(this,Ee).findIndex(G=>G===0);return D===0&&h.truncate(b),D?N.decode(Y(this,Ee).subarray(0,D)):""}else return u("Disassociating file with bad digest."),this.setAssociatedPath(h,"",0),""}setAssociatedPath(h,m,I){const T=B.encodeInto(m,Y(this,Ee));z<=T.written+1&&s("Path too long:",m),Y(this,Ee).fill(0,T.written,z),Y(this,F).setUint32(_,I);const D=this.computeDigest(Y(this,Ee));h.write(Y(this,Ee),{at:0}),h.write(D,{at:d}),h.flush(),m?(Y(this,be).set(m,h),Y(this,qe).delete(h)):(h.truncate(b),Y(this,qe).add(h))}computeDigest(h){let m=3735928559,I=1103547991;for(const T of h)m=31*m+T*307,I=31*I+T*307;return new Uint32Array([m>>>0,I>>>0])}async reset(h){await this.isReady;let m=await navigator.storage.getDirectory(),I;for(const T of this.vfsDir.split("/"))T&&(I=m,m=await m.getDirectoryHandle(T,{create:!0}));return Be(this,re,m),Be(this,ue,I),Be(this,se,await Y(this,re).getDirectoryHandle(g,{create:!0})),this.releaseAccessHandles(),this.acquireAccessHandles(h)}getPath(h){return E.isPtr(h)&&(h=E.cstrToJs(h)),(h instanceof URL?h:new URL(h,"file://localhost/")).pathname}deletePath(h){const m=Y(this,be).get(h);return m&&(Y(this,be).delete(h),this.setAssociatedPath(m,"",0)),!!m}storeErr(h,m){return h&&(h.sqlite3Rc=m||a.SQLITE_IOERR,this.error(h)),this.$error=h,m}popErr(){const h=this.$error;return this.$error=void 0,h}nextAvailableSAH(){const[h]=Y(this,qe).keys();return h}getOFileForS3File(h){return Y(this,Le).get(h)}mapS3FileToOFile(h,m){m?(Y(this,Le).set(h,m),l(h,this)):(Y(this,Le).delete(h),l(h,!1))}hasFilename(h){return Y(this,be).has(h)}getSAHForPath(h){return Y(this,be).get(h)}async removeVfs(){if(!Y(this,C).pointer||!Y(this,se))return!1;a.sqlite3_vfs_unregister(Y(this,C).pointer),Y(this,C).dispose();try{this.releaseAccessHandles(),await Y(this,re).removeEntry(g,{recursive:!0}),Be(this,se,void 0),await Y(this,ue).removeEntry(Y(this,re).name,{recursive:!0}),Be(this,re,Be(this,ue,void 0))}catch(h){e.config.error(this.vfsName,"removeVfs() failed:",h)}return!0}exportFile(h){const m=Y(this,be).get(h)||s("File not found:",h),I=m.getSize()-b,T=new Uint8Array(I>0?I:0);if(I>0){const D=m.read(T,{at:b});D!=I&&s("Expected to read "+I+" bytes but read "+D+".")}return T}async importDbChunked(h,m){const I=Y(this,be).get(h)||this.nextAvailableSAH()||s("No available handles to import to.");I.truncate(0);let T=0,D,G=!1;try{for(;(D=await m())!==void 0;)D instanceof ArrayBuffer&&(D=new Uint8Array(D)),T===0&&D.byteLength>=15&&(p.affirmDbHeader(D),G=!0),I.write(D,{at:b+T}),T+=D.byteLength;if((T<512||T%512!==0)&&s("Input size",T,"is not correct for an SQLite database."),!G){const ee=new Uint8Array(20);I.read(ee,{at:0}),p.affirmDbHeader(ee)}I.write(new Uint8Array([1,1]),{at:b+18})}catch(ee){throw this.setAssociatedPath(I,"",0),ee}return this.setAssociatedPath(I,h,a.SQLITE_OPEN_MAIN_DB),T}importDb(h,m){if(m instanceof ArrayBuffer)m=new Uint8Array(m);else if(m instanceof Function)return this.importDbChunked(h,m);const I=Y(this,be).get(h)||this.nextAvailableSAH()||s("No available handles to import to."),T=m.byteLength;(T<512||T%512!=0)&&s("Byte array size is invalid for an SQLite db.");const D="SQLite format 3";for(let ee=0;ee<D.length;++ee)D.charCodeAt(ee)!==m[ee]&&s("Input does not contain an SQLite database header.");const G=I.write(m,{at:b});return G!=T?(this.setAssociatedPath(I,"",0),s("Expected to write "+T+" bytes but wrote "+G+".")):(I.write(new Uint8Array([1,1]),{at:b+18}),this.setAssociatedPath(I,h,a.SQLITE_OPEN_MAIN_DB)),G}}re=new WeakMap,se=new WeakMap,ue=new WeakMap,fe=new WeakMap,be=new WeakMap,qe=new WeakMap,Le=new WeakMap,Ee=new WeakMap,F=new WeakMap,C=new WeakMap,R=new WeakMap,$=new WeakSet,bt=function(h,...m){Y(this,R)>h&&K[h](this.vfsName+":",...m)};class ne{constructor(h){Ce(this,X,void 0);Be(this,X,h),this.vfsName=h.vfsName}async addCapacity(h){return Y(this,X).addCapacity(h)}async reduceCapacity(h){return Y(this,X).reduceCapacity(h)}getCapacity(){return Y(this,X).getCapacity(Y(this,X))}getFileCount(){return Y(this,X).getFileCount()}getFileNames(){return Y(this,X).getFileNames()}async reserveMinimumCapacity(h){const m=Y(this,X).getCapacity();return m<h?Y(this,X).addCapacity(h-m):m}exportFile(h){return Y(this,X).exportFile(h)}importDb(h,m){return Y(this,X).importDb(h,m)}async wipeFiles(){return Y(this,X).reset(!0)}unlink(h){return Y(this,X).deletePath(h)}async removeVfs(){return Y(this,X).removeVfs()}}X=new WeakMap;const oe=async()=>{const U=await navigator.storage.getDirectory(),h=".opfs-sahpool-sync-check-"+O(),T=(await(await U.getFileHandle(h,{create:!0})).createSyncAccessHandle()).close();return await T,await U.removeEntry(h),T!=null&&T.then&&s("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};e.installOpfsSAHPoolVfs=async function(U=Object.create(null)){var m;const h=U.name||W.name;return i[h]?i[h]:!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!((m=navigator==null?void 0:navigator.storage)!=null&&m.getDirectory)?i[h]=Promise.reject(new Error("Missing required OPFS APIs.")):i[h]=oe().then(async function(){if(U.$testThrowInInit)throw U.$testThrowInInit;const I=new J(U);return I.isReady.then(async()=>{const T=new ne(I);if(e.oo1){const D=e.oo1,G=I.getVfs(),ee=function(...ae){const pe=D.DB.dbCtorHelper.normalizeArgs(...ae);pe.vfs=G.$zName,D.DB.dbCtorHelper.call(this,pe)};ee.prototype=Object.create(D.DB.prototype),T.OpfsSAHPoolDb=ee,D.DB.dbCtorHelper.setVfsPostOpenSql(G.pointer,function(ae,pe){pe.capi.sqlite3_exec(ae,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)})}return I.log("VFS initialized."),T}).catch(async T=>(await I.removeVfs().catch(()=>{}),T))}).catch(I=>i[h]=Promise.reject(I))}}),typeof n<"u"){const e=Object.assign(Object.create(null),{exports:typeof wasmExports>"u"?n.asm:wasmExports,memory:n.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=e;let s;try{s=globalThis.sqlite3ApiBootstrap()}catch(r){throw console.error("sqlite3ApiBootstrap() error:",r),r}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}n.sqlite3=s}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")}),le.ready}})();Et=function(){var le,t;const L=Et;if(!L)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const Q=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:(le=globalThis==null?void 0:globalThis.document)==null?void 0:le.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:(t=globalThis==null?void 0:globalThis.location)!=null&&t.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(Q.debugModule=Q.urlParams.has("sqlite3.debugModule")?(...he)=>console.warn("sqlite3.debugModule:",...he):()=>{},Q.urlParams.has("sqlite3.dir"))Q.sqlite3Dir=Q.urlParams.get("sqlite3.dir")+"/";else if(Q.moduleScript){const he=Q.moduleScript.src.split("/");he.pop(),Q.sqlite3Dir=he.join("/")+"/"}if(globalThis.sqlite3InitModule=function he(...Ie){return L(...Ie).then(we=>{const Ae=we.sqlite3;Ae.scriptInfo=Q,he.__isUnderTest&&(Ae.__isUnderTest=!0);const Fe=Ae.asyncPostInit;return delete Ae.asyncPostInit,Fe()}).catch(we=>{throw console.error("Exception loading sqlite3 module:",we),we})},globalThis.sqlite3InitModule.ready=L.ready,globalThis.sqlite3InitModuleState.moduleScript){const he=globalThis.sqlite3InitModuleState;let Ie=he.moduleScript.src.split("/");Ie.pop(),he.scriptDir=Ie.join("/")+"/"}return Q.debugModule("sqlite3InitModuleState =",Q),globalThis.sqlite3InitModule}();var qn=Et;globalThis.sqlite3Worker1Promiser=function L(Q=L.defaultConfig){if(arguments.length===1&&typeof arguments[0]=="function"){const Z=Q;Q=Object.assign(Object.create(null),L.defaultConfig),Q.onready=Z}else Q=Object.assign(Object.create(null),L.defaultConfig,Q);const le=Object.create(null),t=function(){},he=Q.onerror||t,Ie=Q.debug||t,we=Q.generateMessageId?void 0:Object.create(null),Ae=Q.generateMessageId||function(Z){return Z.type+"#"+(we[Z.type]=(we[Z.type]||0)+1)},Fe=(...Z)=>{throw new Error(Z.join(" "))};Q.worker||(Q.worker=L.defaultConfig.worker),typeof Q.worker=="function"&&(Q.worker=Q.worker());let xe;return Q.worker.onmessage=function(Z){Z=Z.data,Ie("worker1.onmessage",Z);let ye=le[Z.messageId];if(!ye){if(Z&&Z.type==="sqlite3-api"&&Z.result==="worker1-ready"){Q.onready&&Q.onready();return}if(ye=le[Z.type],ye&&ye.onrow){ye.onrow(Z);return}Q.onunhandled?Q.onunhandled(arguments[0]):he("sqlite3Worker1Promiser() unhandled worker message:",Z);return}switch(delete le[Z.messageId],Z.type){case"error":ye.reject(Z);return;case"open":xe||(xe=Z.dbId);break;case"close":Z.dbId===xe&&(xe=void 0);break}try{ye.resolve(Z)}catch(me){ye.reject(me)}},function(){let Z;arguments.length===1?Z=arguments[0]:arguments.length===2?(Z=Object.create(null),Z.type=arguments[0],Z.args=arguments[1],Z.dbId=Z.args.dbId):Fe("Invalid arugments for sqlite3Worker1Promiser()-created factory."),!Z.dbId&&Z.type!=="open"&&(Z.dbId=xe),Z.messageId=Ae(Z),Z.departureTime=performance.now();const ye=Object.create(null);ye.message=Z;let me;Z.type==="exec"&&Z.args&&(typeof Z.args.callback=="function"?(me=Z.messageId+":row",ye.onrow=Z.args.callback,Z.args.callback=me,le[me]=ye):typeof Z.args.callback=="string"&&Fe("exec callback may not be a string when using the Promise interface."));let je=new Promise(function(tt,_t){ye.resolve=tt,ye.reject=_t,le[Z.messageId]=ye,Ie("Posting",Z.type,"message to Worker dbId="+(xe||"default")+":",Z),Q.worker.postMessage(Z)});return me&&(je=je.finally(()=>delete le[me])),je}},globalThis.sqlite3Worker1Promiser.defaultConfig={worker:function(){return new Worker(new URL(""+new URL("sqlite3-worker1-bundler-friendly-CESf8QvT.js",self.location.href).href,self.location.href),{type:"module"})},onerror:(...L)=>console.error("worker1 promiser error",...L)};const et=(...L)=>console.log(...L),Nt=(...L)=>console.error(...L);let Oe=null;const wn=async()=>{if(Oe)return Oe;et("Loading and initializing SQLite3 module...");try{const L=await qn({print:et,printErr:Nt});return Oe=En(L),Oe}catch(L){if(L instanceof Error)throw Nt(L.name,L.message),L}throw new Error("unknown error")},En=L=>(et("Running SQLite3 version",L.version.libVersion),"opfs"in L?(Oe=new L.oo1.OpfsDb("/mydb.sqlite3","ct"),et("OPFS is available, created persisted database at",Oe.filename)):(Oe=new L.oo1.DB("/mydb.sqlite3","ct"),et("OPFS is not available, created transient database",Oe.filename)),Oe),vn=(L,Q={})=>{if(!Oe)throw new Error;return typeof L=="string"?Oe.exec(L,Q):Oe.exec(L)},Sn=(L,Q,le)=>{if(!Oe)throw new Error;return Oe.selectValue(L,Q,le)},vt={};var xn=Object.freeze({__proto__:null,binding:(L,Q)=>{if(!Oe)throw new Error;return vt[L].bind(Q),L},connectDB:wn,exec:vn,prepare:L=>{if(!Oe)throw new Error;const Q=Oe.prepare(L),le=Q.pointer;return vt[le]=Q,le},selectValue:Sn,stepFinalize:L=>{if(!Oe)throw new Error;return vt[L].stepFinalize()}});qt(xn)})();
